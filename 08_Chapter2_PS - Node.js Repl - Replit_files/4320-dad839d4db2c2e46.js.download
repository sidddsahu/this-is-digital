"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4320],{59369:function(n,e,t){t.d(e,{Z:function(){return R}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=t(67294),u=t(70804),c=t(49444),s=t(96594),d=t(41664),p=t.n(d),f=t(11163),h=t(81255),m=t(70917),v=t(44044),g=t(16965),Z=t(65975),b=t(34140),w=(0,Z.KD)("ul"),C=(0,Z.KD)("li"),y=(0,Z.KD)("a"),k=function(n){var e=n.isHighlighted,t=n.isDestructive;return(0,m.iv)([Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.p(8),Z.l0.cursor.pointer,t&&[Z.l0.color.accentNegativeDefault],e&&{backgroundColor:v.gU.listItem[":not([disabled])"][":not(textarea):active"].backgroundColor},e&&t&&[Z.l0.color.foregroundDefault,Z.l0.backgroundColor.accentNegativeDefault]])};function R(n){var e=n.label,t=n.items,d=n.onItemClick,m=n.onOpenChange,R=n.large,x=n.orientation,P=n.resetOnSelect,U=(0,f.useRouter)(),E=(0,o.Z)(a.useState(!1),2),T=E[0],D=E[1],I=(0,g.Z)(m);a.useEffect((function(){I.current&&I.current(T)}),[T,I]);var B=(0,s.L7)({isOpen:T,items:t,onSelectedItemChange:function(n){var e=n.selectedItem;e&&(D(!1),P&&_(),e.link?U.push(e.link.href,e.link.as):d(e))}}),S=B.getToggleButtonProps,G=B.getMenuProps,X=B.highlightedIndex,A=B.getItemProps,W=B.getLabelProps,_=B.reset,z=R?32:24,N=R?20:16;return(0,l.BX)(u.Z,{isOpen:T,padding:0,gap:4,zIndex:h.n0,placement:"bottom-end",onClickOutside:function(){return D(!1)},children:[(0,l.BX)(Z.G7,{children:[(0,l.BX)(Z.G7,(0,i.Z)((0,r.Z)({css:[Z.l0.reset.button,v.gU.listItem,Z.l0.borderRadius(8),Z.l0.center,{width:z,height:z}],tag:"button"},S({refKey:"innerRef",onClick:function(){return D((function(n){return!n}))}})),{children:["horizontal"===x?(0,l.tZ)(c.MoreHorizontal,{size:N}):(0,l.tZ)(c.MoreVertical,{size:N}),(0,l.tZ)(b.T,{children:(0,l.tZ)("label",(0,i.Z)((0,r.Z)({},W()),{children:e}))})]})),(0,l.tZ)(Z.G7,(0,r.Z)({},G({refKey:"innerRef"})))]}),(0,l.tZ)(w,{css:[Z.l0.minWidth(120),Z.l0.overflow("hidden"),Z.l0.borderRadius(8)],children:t.map((function(n,e){var t=X===e,o=(0,l.BX)(l.HY,{children:[n.icon,(0,l.tZ)(Z.xv,{css:Z.l0.flex.shrink(1),children:n.label})]});return(0,l.tZ)(C,(0,i.Z)((0,r.Z)({css:k({isHighlighted:t,isDestructive:n.isDestructive})},A({item:n,index:e,key:"".concat(n.label).concat(e)})),{children:n.link?(0,l.tZ)(p(),(0,i.Z)((0,r.Z)({passHref:!0},n.link),{children:(0,l.tZ)(y,{css:[Z.l0.align.center,Z.l0.rowWithGap(8),{color:"inherit"}],children:o})})):o}))}))})]})}},7243:function(n,e,t){t.d(e,{Z:function(){return l}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255);function l(n){var e=n.gap,t=n.inset,l=n.children,a=n.className;return(0,r.tZ)(i.ZP,{className:a,css:[{overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":[o.l0.display.none]}],children:(0,r.tZ)(i.ZP,{css:[o.l0.px(t),o.l0.rowWithGap(e),{width:"fit-content"}],children:l})})}},30758:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(67294);function i(n){var e=(0,r.useState)(!1),t=e[0],i=e[1],o=(0,r.useRef)(0),l=(0,r.useMemo)((function(){return{onDragEnter:function(n){n.preventDefault(),o.current++,i(!0)},onDragLeave:function(n){n.preventDefault(),o.current--,0===o.current&&i(!1)},onDrop:function(e){var t,r;e.preventDefault(),o.current=0,i(!1),e.persist();var l=Array.from(null!==(r=null===e||void 0===e||null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);0!==l.length?n(l):n(null)},onDragOver:function(n){n.preventDefault()}}}),[n]);return[t,l]}},60459:function(n,e,t){t.d(e,{Z:function(){return c}});var r=t(47568),i=t(10253),o=t(34051),l=t.n(o),a=t(67294),u=t(62722);function c(n){var e=n.onUploadPreview,t=n.onUpload,o=n.onError,c=(0,i.Z)(a.useState(!1),2),s=c[0],d=c[1],p=a.useCallback(function(){var n=(0,r.Z)(l().mark((function n(r,i){var a,c,s,p,f;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!0),n.prev=2,n.next=5,(0,u.o1)(r);case 5:a=n.sent,n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(2),o(new Error("This image is over the ".concat(u.bq/1e6,"MB maximum"))),n.abrupt("return",!1);case 12:return e({dataUrl:a}),c=null,n.prev=14,n.next=17,(0,u.mh)(a,i);case 17:c=n.sent,n.next=25;break;case 20:return n.prev=20,n.t1=n.catch(14),s=n.t1.message.toLowerCase().includes("entity too large")?"This image is over the 1mb maximum":"Something went wrong",o(new Error(s)),n.abrupt("return",!1);case 25:if(p=c.id,f=c.url,"number"===typeof p){n.next=28;break}throw new Error("Expected id");case 28:if("string"===typeof f){n.next=30;break}throw new Error("Expected url");case 30:return d(!1),n.prev=31,n.next=34,t({id:p,url:f});case 34:n.next=40;break;case 36:return n.prev=36,n.t2=n.catch(31),o(n.t2),n.abrupt("return",!1);case 40:return n.abrupt("return",!0);case 41:case"end":return n.stop()}}),n,null,[[2,8],[14,20],[31,36]])})));return function(e,t){return n.apply(this,arguments)}}(),[o,t,e]);return{isLoading:s,uploadImage:p}}},54854:function(n,e,t){function r(n,e){if(!n)return null;var t=n[e];return t?Array.isArray(t)?null:t:null}t.d(e,{Z:function(){return r}})},62722:function(n,e,t){t.d(e,{W9:function(){return f},bq:function(){return u},mh:function(){return d},o1:function(){return c}});var r=t(47568),i=t(34051),o=t.n(i),l=t(15794),a=t(32703),u=1e7;function c(n){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(o().mark((function n(e){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.L0)(e);case 2:if(t=n.sent,!(e.size>u)){n.next=5;break}throw new Error("This image is over the ".concat(u/1e6,"MB maximum"));case 5:if(t){n.next=7;break}throw new Error("Expected file");case 7:return n.abrupt("return",t);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(n,e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(o().mark((function n(e,t){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.uz)("/data/images/upload",{image:e,context:t});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var f=["image/png","image/jpeg","image/gif","image/webp"]},70338:function(n,e,t){var r=t(47568),i=t(34051),o=t.n(i),l=t(15794);e.Z=function(){var n=(0,r.Z)(o().mark((function n(e,t){var r,i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}r=e.user,n.next=14;break;case 5:if(!((i=t.getState().user)&&i.userInfo.isLoggedIn&&i.userInfo)){n.next=10;break}r=i.userInfo,n.next=14;break;case 10:return n.next=12,(0,l.LK)("/is_authenticated");case 12:(a=n.sent).success&&(r=a.user);case 14:return r&&(e&&(r=JSON.parse(JSON.stringify(r))),t.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:r})),n.abrupt("return",{user:r});case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},15764:function(n,e,t){t.d(e,{FW:function(){return f},NH:function(){return v}});var r=t(26042),i=t(7297),o=t(31230),l=t(9523),a=t(28433),u=t(46829);function c(){var n=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return c=function(){return n},n}function s(){var n=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return n},n}function d(){var n=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return n},n}var p={},f=(0,o.ZP)(c(),l.C,a.B),h=(0,o.ZP)(s(),l.D),m=(0,o.ZP)(d(),h);function v(n){var e=(0,r.Z)({},p,n);return u.useQuery(m,e)}},28433:function(n,e,t){t.d(e,{B:function(){return o}});var r=t(7297);function i(){var n=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return n},n}var o=(0,t(31230).ZP)(i())},19244:function(n,e,t){t.d(e,{O:function(){return v}});var r=t(47568),i=t(10253),o=t(34051),l=t.n(o),a=t(26042),u=t(7297),c=t(31230),s=t(15764),d=t(46829);function p(){var n=(0,u.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return n},n}var f={},h=(0,c.ZP)(p(),s.FW);function m(n){var e,t,r,i,o,l,a;return n.error?n.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(e=n.data)||void 0===e||null===(t=e.createReplPost2)||void 0===t?void 0:t.__typename)||"UnauthorizedError"===(null===(r=n.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=n.data)||void 0===o||null===(l=o.createReplPost2)||void 0===l?void 0:l.__typename)?n.data.createReplPost2.message:(null===(a=n.data)||void 0===a?void 0:a.createReplPost2)&&"Post"!==n.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var n=(0,i.Z)(function(n){var e=(0,a.Z)({},f,n);return d.useMutation(h,e)}(),2),e=n[0],t=n[1],o=function(){var n=(0,r.Z)(l().mark((function n(r){var i,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.input,!t.loading){n.next=3;break}return n.abrupt("return",{data:null,error:null});case 3:return n.prev=3,n.next=6,e({variables:{input:i}});case 6:return o=n.sent,n.abrupt("return",{data:o.data,error:m(o)});case 10:return n.prev=10,n.t0=n.catch(3),n.abrupt("return",{data:null,error:"Something went wrong publishing your Repl"});case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}();return{publish:o,data:t.data,loading:t.loading,error:m(t)}}},5804:function(n,e,t){t.d(e,{JL:function(){return y},L8:function(){return Z},M6:function(){return g},QH:function(){return b},nr:function(){return v}});var r=t(14924),i=t(26042),o=t(29815),l=t(35944),a=t(67294),u=t(69346),c=t(81255),s=t(1144),d=t(46197),p=t(44365),f=t(72917),h=t(7243),m=t(68480);function v(n,e){var t,r=(null===(t=e.tags)||void 0===t?void 0:t.length)?e.tags.join(","):null;return{href:{pathname:"/postsFeed",query:{boardSlug:r,q:n}},as:{pathname:r?"/community/".concat(r):"/community/all",query:{q:n}}}}function g(n,e){return e?{href:{pathname:"/postsFeed",query:{boardSlug:n,order:e.order}},as:{pathname:"/community/".concat(n),query:(0,i.Z)({},e.order!==p.eR?{order:e.order.toLowerCase()}:{})}}:{href:{pathname:"/postsFeed",query:{boardSlug:n}},as:"/community/".concat(n)}}function Z(n){return g("all",n)}function b(n,e){var t=e.tags?e.tags.join(","):"all";return{href:{pathname:"/postsFeed",query:{boardSlug:t,order:(0,p.Zb)(n)}},as:{pathname:"/community/".concat(t),query:(0,i.Z)({},n!==p.eR?{order:(0,p.Zb)(n)}:{})}}}var w=(0,u.KD)("div"),C=m.Mz+32;function y(n){var e,t,i=n.tagGroups,p=n.params,v=(0,o.Z)(i.official).concat((0,o.Z)(i.community)).map((function(n){var e,t=Boolean(null===(e=p.tags)||void 0===e?void 0:e.includes(n.id)),r=t?Z(p):g(n.id,p);return(0,l.tZ)(f.t,{tag:n,link:r,isActive:t},n.id)})),b=(0,a.useState)(!1),y=b[0],k=b[1],R=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(R.current){var n=new window.IntersectionObserver((function(n){n.forEach((function(n){window.scrollY<n.boundingClientRect.top-C?k(!1):k(!n.isIntersecting)}))}),{root:null,rootMargin:"".concat(-C,"px 0px 0px 0px"),threshold:1}),e=R.current;return n.observe(e),function(){n.unobserve(e),n.disconnect()}}}),[]),(0,l.BX)(u.ZP,{children:[(0,l.tZ)(w,{ref:R}),(0,l.BX)(u.ZP,{css:[c.l0.colWithGap(16),y&&(0,r.Z)({},d.A.desktop,[c.l0.position.fixed,c.l0.overflowY("auto"),c.l0.height("calc(100vh - ".concat(m.Mz,"px)")),c.l0.py(32),{top:m.Mz}])],children:[(0,l.tZ)(s.x,{color:"dimmer",children:"TOP TAGS"}),(0,l.BX)(u.ZP,{children:[(0,l.tZ)(h.Z,{gap:8,inset:16,css:[(e={},(0,r.Z)(e,d.A.desktop,[c.l0.display.none]),(0,r.Z)(e,"marginLeft","calc(-1 * ".concat(c.TV.space16,")")),(0,r.Z)(e,"marginRight","calc(-1 * ".concat(c.TV.space16,")")),e)],children:v}),(0,l.tZ)(u.ZP,{css:(t={},(0,r.Z)(t,d.A.mobile,[c.l0.display.none]),(0,r.Z)(t,d.A.desktop,[c.l0.colWithGap(32)]),t),children:(0,l.tZ)(u.ZP,{css:[c.l0.colWithGap(8),c.l0.align.start],children:v})})]})]})]})}},4924:function(n,e,t){t.d(e,{Vs:function(){return w},ZP:function(){return y},p0:function(){return C}});var r=t(26042),i=t(69396),o=t(35944),l=(t(67294),t(41664)),a=t.n(l),u=t(70917),c=t(65975),s=t(53427),d=t(69928),p=t(5804),f=t(72917),h=t(88046),m=t(82447),v=t(45273),g=t(94718),Z=(0,c.KD)("a"),b=(0,u.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function w(n){var e=n.tags,t=n.maxVisible,r=void 0===t?3:t,i=n.onTagClick,l=e.slice(0,r),a=e.length-l.length;return(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[l.map((function(n){return(0,o.tZ)(f.t,{small:!0,tag:n,link:(0,p.M6)(n.id),onClick:i},n.id)})),a>0?(0,o.BX)(c.xv,{variant:"small",color:"dimmest",children:["+",a]}):null]})}function C(n){var e=n.repl,t=n.showOwner,l=n.maxVisibleTags,u=n.onReplClick,p=n.onUserClick,f=n.onTagClick,C=e.owner;return(0,o.BX)(c.G7,{css:[c.l0.colWithGap(16)],children:[(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.start,c.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(s.ZP,{size:84,iconUrl:e.iconUrl,alt:e.title}),(0,o.BX)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.colWithGap(4)],children:[(0,o.tZ)(a(),(0,i.Z)((0,r.Z)({passHref:!0},(0,h.j3)(e)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},b],onClick:u,children:(0,o.tZ)(c.xv,{variant:"subheadBig",children:e.title})})})),t&&C?(0,o.tZ)(c.G7,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(g.Z,{username:C.username,children:(0,o.tZ)(m.ZP,{user:C,children:(0,o.BX)(Z,{css:[{color:"inherit"},c.l0.rowWithGap(4),c.l0.align.center,c.l0.pr(16)],onClick:p,children:[(0,o.tZ)(v.Z,{src:C.image,username:C.username,size:16,layout:"intrinsic"}),(0,o.tZ)(c.xv,{children:C.username})]})})})}):null,e.description?(0,o.tZ)(c.xv,{color:"dimmer",maxLines:2,css:[c.l0.maxWidth(450)],children:e.description}):null]})]}),(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.justify.spaceBetween,c.l0.flex.wrap],children:[(0,o.tZ)(d.Z,{css:[c.l0.pb(2)],repl:e}),l?(0,o.tZ)(c.G7,{css:[c.l0.position.relative,c.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(w,{tags:e.tags,maxVisible:l,onTagClick:f})}):null]})]})}function y(n){var e=n.repl,t=n.showOwner,r=n.maxVisibleTags,i=n.onReplClick,l=n.onUserClick,a=n.onTagClick,u=n.dataCy;return(0,o.tZ)(c.Tg,{elevated:!0,css:[c.l0.borderRadius(8),c.l0.p(8),c.l0.position.relative,c.gU.filledAndOutlined,c.l0.backgroundColor.backgroundDefault,{border:"1px solid "+c.TV.outlineDimmest}],dataCy:u,children:(0,o.tZ)(C,{repl:e,showOwner:t,maxVisibleTags:r,onReplClick:i,onUserClick:l,onTagClick:a})})}},69928:function(n,e,t){t.d(e,{Z:function(){return d}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255),l=t(12530),a=t(51995),u=t(75026),c=t(27843),s=t(34847);function d(n){var e=n.repl;return(0,r.BX)(i.ZP,{css:[o.l0.rowWithGap(16),o.l0.align.center],children:[(0,r.tZ)(l.Z,{small:!0,count:e.runCount,tooltip:(0,s.Z)("runs",e.runCount),children:(0,r.tZ)(a.Z,{})}),(0,r.tZ)(l.Z,{small:!0,count:e.commentCount,tooltip:(0,s.Z)("comment",e.commentCount),children:(0,r.tZ)(u.Z,{})}),(0,r.tZ)(l.Z,{small:!0,count:e.likeCount,tooltip:(0,s.Z)("like",e.likeCount),children:(0,r.tZ)(c.Z,{})})]})}},72917:function(n,e,t){t.d(e,{g:function(){return y},t:function(){return w}});var r=t(26042),i=t(69396),o=t(35944),l=(t(67294),t(70917)),a=t(41664),u=t.n(a),c=t(69346),s=t(93160),d=t(81255),p=t(1144),f=t(44044),h=t(67629),m=t(16857),v=(0,l.iv)({border:"1px solid "+d.TV.accentPrimaryDefault,backgroundColor:"transparent"}),g=function(n){var e=n.isActive,t=n.small;return(0,l.iv)([d.l0.p(t?4:8),d.l0.align.center,d.l0.rowWithGap(4),d.l0.fontSize(12),e?v:f.gU.outlined,d.l0.borderRadius(16),{color:"inherit","&:hover":v}])};function Z(n){var e=n.tag,t=n.isActive,r=n.isRemovable,i=n.small,l=i?"small":"text";return(0,o.tZ)(s.Z,{elevated:t,css:[d.l0.borderRadius(16)],children:(0,o.BX)(s.Z,{elevated:t,css:[g({isActive:t,small:i})],children:[(0,o.BX)(c.ZP,{css:[d.l0.flex.row,d.l0.align.center,d.l0.flex.shrink(1)],children:[(0,o.tZ)(p.x,{variant:l,color:"dimmest",children:"#"}),(0,o.tZ)(p.x,{color:"dimmer",variant:l,css:[d.l0.flex.shrink(1)],children:e.id})]}),e.isOfficial&&!i?(0,o.tZ)(m.Z,{}):null,r?(0,o.tZ)(h.Z,{size:i?12:16}):null]})})}var b=(0,c.KD)("a");function w(n){var e=n.tag,t=n.link,l=n.isActive,a=n.small,c=n.onClick;return(0,o.tZ)(u(),(0,i.Z)((0,r.Z)({},t),{passHref:!0,css:[d.l0.flex.shrink(1),{backgroundColor:"red"}],children:(0,o.tZ)(b,{css:[{color:"inherit"},d.l0.flex.shrink(1)],onClick:c,children:(0,o.tZ)(Z,{tag:e,isActive:l,small:a,isRemovable:l})})}))}var C=(0,c.KD)("button");function y(n){var e=n.tag,t=n.onClick,r=n.isActive,i=n.small;return(0,o.tZ)(C,{css:[d.l0.reset.button],onClick:t,children:(0,o.tZ)(Z,{tag:e,isActive:r,small:i,isRemovable:!0})})}},46197:function(n,e,t){t.d(e,{A:function(){return i}});var r=t(57263),i={mobile:"@media (max-width: ".concat(r.j.tabletMin,"px)"),desktop:"@media (min-width: ".concat(r.j.tabletMin+1,"px)")}},44365:function(n,e,t){t.d(e,{Qf:function(){return u},Zb:function(){return a},eR:function(){return o}});var r=t(90317),i=t(54854),o=r.vX.Hot,l={hot:r.vX.Hot,new:r.vX.New,top:r.vX.Top,votes:r.vX.Top};function a(n){return n.toLowerCase()}function u(n){var e=(0,i.Z)(n,"after")||void 0,t=(0,i.Z)(n,"q")||void 0,r=(0,i.Z)(n,"boardSlug")||void 0,u=r&&"all"!==r?r.split(","):void 0,c=(0,i.Z)(n,"order")||a(o),s=l[c]||o,d=(0,i.Z)(n,"count"),p=d?parseInt(d,10):void 0;return void 0!==p&&Number.isNaN(p)&&(p=void 0),{tags:u,order:s,count:p,searchQuery:t,after:e}}},12530:function(n,e,t){t.d(e,{Z:function(){return c}});var r=t(35944),i=t(67294),o=t(1144),l=t(81255),a=t(69346),u=t(81456);function c(n){var e=n.count,t=n.children,c=n.tooltip,s=n.small,d=(0,u.d)(e);return(0,r.BX)(a.ZP,{"aria-label":c,"data-microtip-position":"left",role:"tooltip",css:[l.l0.rowWithGap(4),l.l0.align.center,l.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[i.cloneElement(t,{size:s?12:void 0}),(0,r.tZ)(o.x,{variant:s?"small":void 0,color:"dimmer",children:d})]})}},49483:function(n,e,t){t.d(e,{W:function(){return h},Z:function(){return m}});var r=t(35944),i=t(67294),o=t(53427),l=t(64080),a=t(77365),u=t(60459),c=t(69346),s=t(93160),d=t(49619),p=t(81255),f=t(62722);function h(n){var e=(0,i.useState)(null),t=e[0],r=e[1],o=(0,i.useState)(null),l=o[0],a=o[1],c=(0,u.Z)({onUpload:function(e){var t=e.url;r(null),n(t)},onUploadPreview:function(n){var e=n.dataUrl;a(null),r(e)},onError:function(n){r(null),a(n.message)}}),s=(0,i.useCallback)((function(){return a(null)}),[]);return{uploadImage:c.uploadImage,error:l,clearError:s,previewUrl:t}}function m(n){var e=(0,i.useRef)(null),t=n.size||48;return(0,r.BX)(c.ZP,{css:[p.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var n;null===(n=e.current)||void 0===n||n.click()},"aria-label":n.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[n.value?(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.ZP,{iconUrl:n.value,size:n.size,alt:"icon"}),(0,r.tZ)(s.Z,{className:"surface",elevated:!0,css:[p.l0.borderRadius(8),p.l0.coverContainer,{opacity:n.isUploading?.8:0}]}),(0,r.tZ)(c.ZP,{className:"icon",css:[p.l0.coverContainer,p.l0.center,p.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:n.isUploading?1:0}],children:n.isUploading?(0,r.tZ)(a.Z,{}):(0,r.tZ)(l.Z,{})})]}):(0,r.tZ)(c.ZP,{css:[p.l0.center,p.l0.width(t),p.l0.height(t),p.l0.borderRadius(8),p.l0.color.foregroundDimmer,{border:"1px dashed "+p.TV.outlineDefault,"&:hover":{color:p.TV.accentPrimaryDefault,borderColor:p.TV.accentPrimaryDefault}}],children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)("input",{css:[[p.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:e,accept:f.W9.join(","),type:"file",onChange:function(e){var t=e.target,r=t.validity,i=t.files;if(r.valid){var o=i?i[0]:null;o&&n.onUpload(o)}}})]})}},29359:function(n,e,t){t.d(e,{sI:function(){return s},wP:function(){return p}});var r=t(26042),i=t(7297),o=t(31230),l=t(46829);function a(){var n=(0,i.Z)(["\n  fragment ReplViewerOutputOverlayRepl on Repl {\n    id\n    title\n    imageUrl\n    lastPublishedAt\n    currentUserPermissions {\n      changeImageUrl\n    }\n  }\n"]);return a=function(){return n},n}function u(){var n=(0,i.Z)(["\n  mutation ReplViewerOutputOverlayUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        imageUrl\n      }\n    }\n  }\n"]);return u=function(){return n},n}var c={},s=(0,o.ZP)(a()),d=(0,o.ZP)(u());function p(n){var e=(0,r.Z)({},c,n);return l.useMutation(d,e)}},41307:function(n,e,t){t.d(e,{Z:function(){return B},y:function(){return E}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=t(67294),u=t(30758),c=t(81255),s=t(69346),d=t(61756),p=t(57704),f=t(68368),h=t(1879),m=t(29359),v=t(60459),g=t(29163),Z=t(62913),b=t(70917),w=t(1144),C=t(49619),y=t(86292),k=t(62722),R=t(7657),x=t(15833),P=t(8633),U=(0,b.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function E(n){var e=n.src,t=n.alt;return(0,l.BX)(s.ZP,{css:[U,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,l.tZ)(Z.Z,{objectFit:"cover",layout:"fill",src:e,alt:t}),(0,l.tZ)(s.ZP,{css:[U,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}function T(n){var e=n.onClick;return(0,l.tZ)(s.ZP,{onClick:function(){(0,y.j)(y.U3.RUN_BUTTON_CLICKED,{context:"replView",overlay:!0}),e()},css:[U,c.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:c.TV.shadowDefault}}],children:(0,l.tZ)(P.Z,{color:c.TV.white})})}function D(n){var e=n.isPublished,t=n.onChangeClick,r=n.onRemoveClick,i=(0,o.Z)(a.useState(!1),2),u=i[0],m=i[1];return(0,l.BX)(s.ZP,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[(0,l.tZ)(d.ZP,{onClick:function(n){n.stopPropagation(),t()},text:"Change image"}),e?(0,l.tZ)(g.Z,{alt:"Cannot remove cover image of a published Repl",disabled:!0,colorway:"negative",children:(0,l.tZ)(p.Z,{})}):null,e?null:(0,l.tZ)(s.ZP,{children:(0,l.tZ)(g.Z,{alt:"Remove Image",colorway:"negative",onClick:function(){m(!0)},children:(0,l.tZ)(p.Z,{})})}),(0,l.tZ)(h.Z,{isOpen:u,onRequestClose:function(){return m(!1)},children:(0,l.tZ)(f.Z,{confirmLabel:"Yes, remove this image",title:"Remove image",isDestructive:!0,onConfirm:function(){r(),m(!1)},onCancel:function(){return m(!1)},children:"This will remove your Repl\u2019s cover image. You can always add one back at any time."})})]})}function I(n){var e=n.onClick,t=n.isActive;return(0,l.BX)(s.ZP,{css:[c.l0.colWithGap(16),c.l0.center],children:[(0,l.BX)(s.ZP,{css:[c.l0.colWithGap(8),c.l0.center],children:[(0,l.tZ)(s.ZP,{css:[{"> svg":{width:44,height:"auto"}},t&&{color:c.TV.accentPrimaryDefault}],children:(0,l.tZ)(C.Z,{})}),(0,l.tZ)(w.x,{children:"Drag and drop a cover image"})]}),(0,l.tZ)(s.ZP,{children:(0,l.tZ)(d.ZP,{onClick:e,iconLeft:(0,l.tZ)(x.Z,{}),colorway:"primary",text:"Or select a file"})})]})}function B(n){var e=n.onClick,t=n.repl,d=function(n){if(null!==n&&0!==n.length){var e=n.find((function(n){return n.type.startsWith("image/")}));e?(g(null),C.uploadImage(e,R.N.ReplCoverImage)):g("Expected an image file")}},p=a.useRef(null),f=(0,o.Z)(a.useState(null),2),h=f[0],g=f[1],Z=(0,o.Z)(a.useState(t.imageUrl),2),b=Z[0],w=Z[1],C=(0,v.Z)({onUpload:function(n){var e=n.url;y({variables:{input:{id:t.id,imageUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},t),{imageUrl:e})}}})},onUploadPreview:function(n){var e=n.dataUrl;w(e)},onError:function(n){g(n.message)}}),y=(0,o.Z)((0,m.wP)({onCompleted:function(n){g(null),w(n.updateRepl.repl.imageUrl)}}),1)[0],x=t.currentUserPermissions.changeImageUrl,P=(0,o.Z)((0,u.Z)(d),2),U=P[0],B=P[1],S=!b&&x;return(0,l.BX)(s.ZP,(0,i.Z)((0,r.Z)({css:[c.l0.center,c.l0.flex.growAndShrink(1),!S&&{backgroundColor:c.TV.black},{borderBottomLeftRadius:8,borderBottomRightRadius:8,position:"relative",":hover .image-controls":{opacity:1}}]},B),{children:[b?(0,l.tZ)(E,{src:b,alt:t.title}):null,S?null:(0,l.tZ)(T,{onClick:e}),b&&x?(0,l.BX)(s.ZP,{className:"image-controls",css:[{position:"absolute",top:c.TV.space8,right:c.TV.space8,opacity:0,".is-touch-device &":{opacity:1}}],children:[(0,l.tZ)(D,{onChangeClick:function(){var n;null===(n=p.current)||void 0===n||n.click()},onRemoveClick:function(){y({variables:{input:{id:t.id,imageUrl:null}}})},isPublished:Boolean(t.lastPublishedAt)}),h?(0,l.tZ)("div",{className:"error",children:h}):null]}):null,S?(0,l.tZ)(I,{isActive:U,onClick:function(){var n;null===(n=p.current)||void 0===n||n.click()}}):null,x?(0,l.tZ)("input",{css:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ref:p,accept:k.W9.join(","),type:"file",onChange:function(n){var e=n.target,t=e.validity,r=e.files;t.valid&&d(r?Array.from(r):null)}}):null]}))}},99900:function(n,e,t){t.d(e,{Z:function(){return b}});var r=t(10253),i=t(35944),o=(t(67294),t(65975)),l=t(90317),a=t(26042),u=t(7297),c=t(31230),s=t(6565),d=t(46829);function p(){var n=(0,u.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return n},n}var f={},h=(0,c.ZP)(p(),s.jN);var m=t(93058),v=t(86292),g=t(64184),Z=(0,o.KD)("form");function b(n){var e=n.repl,t=n.source,u=n.onDone,c=(0,m.Z)(),s=c.showConfirm,p=c.showError,b=(0,r.Z)(function(n){var e=(0,a.Z)({},f,n);return d.useMutation(h,e)}({variables:{input:{replId:e.id}},onCompleted:function(n){if("Repl"===n.unpublishReplFromCommunity.__typename){var r=n.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,a=r.commentCount;(0,v.j)(v.U3.REPL_UNPUBLISHED,{source:t,numRuns:i,numLikes:o,numComments:a,replType:e.publishedAs===l.O2.Template?"template_repl":"regular_repl"}),s("Repl removed from the community.")}else"NotFoundError"===n.unpublishReplFromCommunity.__typename||"UnauthorizedError"===n.unpublishReplFromCommunity.__typename?p(n.unpublishReplFromCommunity.message):p("An unexpected error occurred.");u()},onError:function(){p("Something went wrong. Please try again.")},update:function(n){n.modify({id:n.identify({__typename:"Repl",id:e.id}),fields:{comments:function(n,e){return e.DELETE},tags:function(n,e){return e.DELETE}}})}}),2),w=b[0],C=b[1].loading;return(0,i.BX)(o.G7,{css:[o.l0.colWithGap(24)],children:[(0,i.tZ)(o.xv,{multiline:!0,variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(Z,{onSubmit:function(n){n.preventDefault(),w()},css:[o.l0.colWithGap(32)],children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.end],children:[(0,i.tZ)(o.G7,{children:(0,i.tZ)(o.zx,{type:"button",text:"Cancel",onClick:function(){return u()}})}),(0,i.tZ)(o.G7,{children:(0,i.tZ)(o.zx,{disabled:C,colorway:"negative",text:C?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(g.Z,{})})})]})]})]})}},7657:function(n,e,t){var r;t.d(e,{N:function(){return r}}),function(n){n.AdminTutorialUpdate="admin-tutorial-update",n.CommunityPost="community-post",n.ProfileImage="profile-image",n.ProfileCoverImage="profile-cover-image",n.TemplateIcon="template-icon",n.ReplIcon="repl-icon",n.ReplCoverImage="repl-cover-image",n.TrainingProfileImage="training-profile-image"}(r||(r={}))}}]);
//# sourceMappingURL=4320-dad839d4db2c2e46.js.map