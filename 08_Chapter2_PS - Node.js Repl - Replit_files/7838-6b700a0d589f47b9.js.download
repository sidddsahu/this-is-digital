"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7838],{71255:function(e,t,r){r.d(t,{Z:function(){return l},c:function(){return n}});var n="https://twitter.com/intent/tweet";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=e.url,l=e.hashtags,i=e.via,a=new URLSearchParams;t&&a.append("text",t),r&&a.append("url",r),l&&a.append("hashtags",l.join(",")),i&&a.append("via",i);var o=a.toString();return o.length>0?"".concat(n,"?").concat(o):n}},61179:function(e,t,r){function n(e,t){var r=t.existing,n=t.getKey,l=new Map,i=!0,a=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;l.set(n(c),c)}}catch(S){a=!0,o=S}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}var d=new Set,p=[],h=!0,f=!1,g=void 0;try{for(var v,m=r[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var Z=n(v.value),b=l.get(Z);b&&(p.push(b),d.add(Z))}}catch(S){f=!0,g=S}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}var w=!0,x=!1,y=void 0;try{for(var R,k=e[Symbol.iterator]();!(w=(R=k.next()).done);w=!0){var C=R.value;d.has(n(C))||p.push(C)}}catch(S){x=!0,y=S}finally{try{w||null==k.return||k.return()}finally{if(x)throw y}}return p}r.d(t,{Z:function(){return n}})},37838:function(e,t,r){r.d(t,{Z:function(){return gr}});var n=r(35944),l=r(67294),i=r(69346),a=r(15764),o=r(65975),u=r(77365),s=r(47568),c=r(14924),d=r(26042),p=r(69396),h=r(10253),f=r(34051),g=r.n(f),v=r(88961),m=r(18048),Z=r(38630),b=r(9517),w=r(85485),x=r(29815),y=r(41664),R=r.n(y),k=r(70917),C=r(1144),S=r(93160),P=r(81255),T=r(69928),B=r(4924),V=r(53427),I=r(88046),G=r(27843),F=r(45273),E=(0,i.KD)("a"),U=(0,k.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function D(e){var t=e.post,r=t.repl,l=t.user,a=r.isTemplate?"Template":"Repl";return(0,n.BX)(i.ZP,{css:P.l0.colWithGap(8),children:[(0,n.BX)(i.ZP,{css:[P.l0.flex.row,P.l0.align.center,P.l0.justify.spaceBetween],children:[(0,n.tZ)(i.ZP,{css:[P.l0.flex.row,P.l0.align.center],children:(0,n.BX)(i.ZP,{css:[P.l0.rowWithGap(8),P.l0.align.center],children:[(0,n.tZ)(F.Z,{size:24,username:l.username,src:l.image}),(0,n.BX)(i.ZP,{css:P.l0.rowWithGap(4),children:[(0,n.tZ)(C.x,{children:l.username}),(0,n.BX)(C.x,{color:"dimmest",children:[" published a ",a]})]})]})}),(0,n.tZ)(G.Z,{size:12})]}),(0,n.BX)(S.Z,{css:[P.l0.borderRadius(8),P.l0.colWithGap(8),P.l0.p(8),P.l0.position.relative,{border:"1px solid "+P.TV.outlineDimmest}],children:[(0,n.tZ)(i.ZP,{css:[P.l0.colWithGap(16)],children:(0,n.tZ)(i.ZP,{css:[P.l0.rowWithGap(16),P.l0.justify.spaceBetween],children:(0,n.BX)(i.ZP,{css:[P.l0.rowWithGap(8),P.l0.align.start,P.l0.flex.growAndShrink(1)],children:[(0,n.tZ)(V.ZP,{iconUrl:r.iconUrl,alt:r.title,size:84,css:[P.l0.backgroundColor.backgroundHigher]}),(0,n.BX)(i.ZP,{css:[P.l0.flex.growAndShrink(1),P.l0.colWithGap(4)],children:[(0,n.BX)(i.ZP,{css:[P.l0.flex.row],children:[(0,n.tZ)(R(),(0,p.Z)((0,d.Z)({passHref:!0},(0,I.j3)(r)),{children:(0,n.tZ)(E,{css:[{color:"inherit"},U,P.l0.flex.growAndShrink(1),P.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,n.tZ)(C.x,{variant:"subheadBig",children:r.title})})})),r.isTemplate&&(0,n.tZ)(W,{})]}),r.description?(0,n.tZ)(C.x,{color:"dimmer",maxLines:2,children:r.description}):null]})]})})}),(0,n.BX)(i.ZP,{css:[P.l0.rowWithGap(8),P.l0.justify.spaceBetween,P.l0.minHeight(24)],children:[(0,n.tZ)(T.Z,{repl:{id:r.id,runCount:0,likeCount:0,commentCount:0}}),(0,n.tZ)(i.ZP,{css:[P.l0.position.relative,{zIndex:1},P.l0.flex.shrink(1)],children:(0,n.tZ)(B.Vs,{tags:r.tags,onTagClick:function(e){return e.preventDefault()}})})]})]})]})}var W=function(){return(0,n.tZ)("span",{css:[P.l0.display.inlineFlex,P.l0.align.center,P.l0.height(24),P.l0.px(8),P.l0.borderRadius(16),P.l0.backgroundColor.yellowDimmest,P.l0.color.yellowStrongest,P.l0.justify.center,P.l0.ml(8),{fontSize:P.TV.fontSizeSmall,lineHeight:P.TV.fontSizeSmall}],children:"Template"})},X=function(){return(0,n.BX)(i.ZP,{css:[P.l0.colWithGap(8),{opacity:.5}],children:[(0,n.BX)(i.ZP,{css:[P.l0.flex.row,P.l0.align.center,P.l0.flex.grow(1),P.l0.justify.spaceBetween],children:[(0,n.BX)(i.ZP,{css:[P.l0.rowWithGap(8),P.l0.align.center],children:[(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(24),P.l0.height(24),P.l0.borderRadius(16)]}),(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(126),P.l0.height(12),P.l0.borderRadius(4)]})]}),(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(12),P.l0.height(12),P.l0.borderRadius(8)]})]}),(0,n.BX)(i.ZP,{css:[P.l0.backgroundColor.backgroundDefault,P.l0.width("100%"),P.l0.height(132),P.l0.borderRadius(8),P.l0.colWithGap(8),P.l0.p(8)],children:[(0,n.BX)(i.ZP,{css:P.l0.rowWithGap(8),children:[(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.height(84),P.l0.width(84),P.l0.borderRadius(4)]}),(0,n.BX)(i.ZP,{css:[P.l0.colWithGap(12),P.l0.pt(4),P.l0.flex.grow(1)],children:[(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(80),P.l0.height(16),P.l0.borderRadius(4)]}),(0,n.BX)(i.ZP,{css:P.l0.colWithGap(8),children:[(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width("100%"),P.l0.height(12),P.l0.borderRadius(4)]}),(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width("80%"),P.l0.height(12),P.l0.borderRadius(4)]})]})]})]}),(0,n.BX)(i.ZP,{css:[P.l0.flex.row,P.l0.flex.grow(1),P.l0.align.center,P.l0.justify.spaceBetween],children:[(0,n.tZ)(i.ZP,{css:P.l0.rowWithGap(16),children:(0,x.Z)(Array(3)).map((function(e,t){return(0,n.BX)(i.ZP,{css:[P.l0.rowWithGap(4),P.l0.align.center],children:[(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(12),P.l0.height(12),P.l0.borderRadius(8)]}),(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(16),P.l0.height(8),P.l0.borderRadius(2)]})]},t)}))}),(0,n.tZ)(i.ZP,{css:P.l0.rowWithGap(4),children:(0,x.Z)(Array(2)).map((function(e,t){return(0,n.tZ)("span",{css:[P.l0.backgroundColor.backgroundHigher,P.l0.width(48),P.l0.height(24),P.l0.borderRadius(16)]},t)}))})]})]})]})},_=r(51438),H=r(28668),L=r(25892),M=r(25171),A=r(64063),z=r.n(A),N=r(90317),O=r(7297),K=r(31230),$=r(46829);function j(){var e=(0,O.Z)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var Y={},q=(0,K.ZP)(j(),a.FW);var Q=r(30992),J=r(49483),ee=r(16965);function te(){var e=(0,O.Z)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return te=function(){return e},e}var re={},ne=(0,K.ZP)(te(),a.FW);function le(e){return e.message||"Something went wrong saving updates to your Repl"}function ie(){var e=(0,h.Z)(function(e){var t=(0,d.Z)({},re,e);return $.useMutation(ne,t)}(),2),t=e[0],r=e[1];function n(){return(n=(0,s.Z)(g().mark((function e(n){var l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.loading){e.next=2;break}return e.abrupt("return",{data:null,error:null});case 2:return e.prev=2,e.next=5,t({variables:{input:n}});case 5:return l=e.sent,e.abrupt("return",{data:l.data,error:null});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{data:null,error:le(e.t0)});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&le(r.error),updateRepl:function(e){return n.apply(this,arguments)}}}function ae(){var e=(0,O.Z)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ae=function(){return e},e}var oe={},ue=(0,K.ZP)(ae(),a.FW);function se(e){var t,r,n,l,i,a,o;return e.error?e.error.message||"Something went wrong saving your Cover page":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(r=t.setReplViewSettings)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(n=e.data)||void 0===n||null===(l=n.setReplViewSettings)||void 0===l?void 0:l.__typename)||"UserError"===(null===(i=e.data)||void 0===i||null===(a=i.setReplViewSettings)||void 0===a?void 0:a.__typename)?e.data.setReplViewSettings.message:(null===(o=e.data)||void 0===o?void 0:o.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function ce(){var e=(0,h.Z)(function(e){var t=(0,d.Z)({},oe,e);return $.useMutation(ue,t)}(),2),t=e[0],r=e[1];function n(){return(n=(0,s.Z)(g().mark((function e(n){var l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.loading){e.next=2;break}return e.abrupt("return",{data:null,error:null});case 2:return e.prev=2,e.next=5,t({variables:{input:n}});case 5:return l=e.sent,e.abrupt("return",{data:l.data,error:se(l)});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{data:null,error:"Something went wrong saving your Cover page"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{data:r.data,loading:r.loading,error:se(r),setReplViewSettings:function(e){return n.apply(this,arguments)}}}function de(){var e=(0,O.Z)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return de=function(){return e},e}var pe={},he=(0,K.ZP)(de(),a.FW);function fe(e){var t,r,n,l,i,a,o;return e.error?e.error.message||"Something went wrong saving your Repl Tags":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(r=t.setReplTags)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(n=e.data)||void 0===n||null===(l=n.setReplTags)||void 0===l?void 0:l.__typename)||"UserError"===(null===(i=e.data)||void 0===i||null===(a=i.setReplTags)||void 0===a?void 0:a.__typename)?e.data.setReplTags.message:(null===(o=e.data)||void 0===o?void 0:o.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function ge(){var e=(0,h.Z)(function(e){var t=(0,d.Z)({},pe,e);return $.useMutation(he,t)}(),2),t=e[0],r=e[1];function n(){return(n=(0,s.Z)(g().mark((function e(n){var l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.loading){e.next=2;break}return e.abrupt("return",{data:null,error:null});case 2:return e.prev=2,e.next=5,t({variables:{input:n}});case 5:return l=e.sent,e.abrupt("return",{data:l.data,error:fe(l)});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{data:null,error:"Something went wrong saving your Repl Tags"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return{data:r.data,loading:r.loading,error:fe(r),setReplTags:function(e){return n.apply(this,arguments)}}}var ve,me=r(19244),Ze=r(40914),be=r(86292),we=1e3;function xe(e){return"repl_file"===e||"repl_image"===e}!function(e){e.ReplFile="repl_file",e.ReplImage="repl_image"}(ve||(ve={}));var ye=function(e){(0,H.Z)(r,e);var t=(0,M.Z)(r);function r(){return(0,_.Z)(this,r),t.apply(this,arguments)}return r}((0,L.Z)(Error)),Re=function(e){(0,H.Z)(r,e);var t=(0,M.Z)(r);function r(){return(0,_.Z)(this,r),t.apply(this,arguments)}return r}((0,L.Z)(Error)),ke=function(e){(0,H.Z)(r,e);var t=(0,M.Z)(r);function r(){return(0,_.Z)(this,r),t.apply(this,arguments)}return r}((0,L.Z)(Error));function Ce(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function Se(e){return e?e.length>we?{message:"Description should not be more than ".concat(we," characters")}:void 0:{message:"What does this Repl do?"}}function Pe(e){var t,r,n,i,a,o=(0,Q.Y)(e.replId||null,(function(e){return e?null:{message:"Select a Repl to share"}})),u=function(e){var t=(0,d.Z)({},Y,e);return $.useQuery(q,t)}({variables:{id:o.value||""},skip:!o.value}),c="Repl"===(null===(t=u.data)||void 0===t?void 0:t.repl.__typename)?u.data.repl:null,p=Boolean(null===c||void 0===c?void 0:c.publishedAs),h=(0,Q.Y)("",Ce),f=(0,Q.Y)("",Se),v=(0,Q.Y)(null,(function(){return null})),m=(0,Q.Y)(ve.ReplImage,(function(){return null})),Z=(0,Q.Y)(null,(function(){return null})),b=(0,Q.Y)("",e.fileValidator),w=(0,Q.Y)([],(function(){return null})),x=(0,ee.Z)(c),y=(0,Q.Y)(!1,(function(e){var t=x.current;return e&&(null===t||void 0===t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null===t||void 0===t?void 0:t.publishedAs)!==N.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}})),R=[o,h,f,v,m,Z,w,b,y],k=ce(),C=ge(),S=ie(),P=(0,me.O)(),T=(0,Ze.r)(),B=(null===c||void 0===c||null===(r=c.replViewSettings)||void 0===r?void 0:r.defaultView)&&xe(c.replViewSettings.defaultView)?c.replViewSettings.defaultView:ve.ReplImage,V=(0,ee.Z)(h.setValue),I=(0,ee.Z)(f.setValue),G=(0,ee.Z)(w.setValue),F=(0,ee.Z)(v.setValue),E=(0,ee.Z)(Z.setValue),U=(0,ee.Z)(m.setValue),D=(0,ee.Z)(b.setValue),W=(0,ee.Z)(y.setValue);(0,l.useEffect)((function(){var e,t,r,n;c&&(W.current("Template"===c.publishedAs),U.current(B),D.current(null!==(t=null===(e=c.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),V.current(c.isRenamed?c.title:"",{preventTouch:!0}),I.current(null!==(r=c.description)&&void 0!==r?r:"",{preventTouch:!0}),G.current(c.tags),F.current(c.iconUrl.endsWith(".svg")?null:c.iconUrl),E.current(null!==(n=c.imageUrl)&&void 0!==n?n:null))}),[c,E,F,G,V,I,B,U,D,W]);var X,_=(0,J.W)(v.setValue),H=_.previewUrl||v.value||(null===c||void 0===c?void 0:c.iconUrl)||(null===c||void 0===c?void 0:c.templateInfo.iconUrl),L=null!==(X=null===(n=R.filter((function(e){return(e!==b||m.value===ve.ReplFile)&&e.error})))||void 0===n||null===(i=n[0])||void 0===i||null===(a=i.error)||void 0===a?void 0:a.message)&&void 0!==X?X:null;function M(){return M=(0,s.Z)(g().mark((function e(){var t,r,n,l,i,a,o,u,s,d,p;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}throw new ye("Missing repl");case 3:if(r=c.title!==h.value,n=c.description!==f.value,l=c.iconUrl!==v.value,i="repl_image"===m.value&&c.imageUrl!==Z.value,a=b.value&&"repl_file"===m.value&&(null===(t=c.replViewSettings)||void 0===t?void 0:t.replFile)!==b.value,o=m.value&&B!==m.value,u=!z()(c.tags,w.value),!(r||n||l)){e.next=18;break}if(!(h.error||f.error||v.error)){e.next=13;break}throw new ye;case 13:return e.next=15,S.updateRepl({id:c.id,title:r?h.value:void 0,description:n?f.value:void 0,iconUrl:l?v.value:void 0});case 15:if(!(s=e.sent).error){e.next=18;break}throw new Re(s.error);case 18:if(!(o||i||a)){e.next=26;break}if(!(m.value===ve.ReplImage&&Z.error||m.value===ve.ReplFile&&b.error)){e.next=21;break}throw new ye;case 21:return e.next=23,k.setReplViewSettings({replId:c.id,defaultView:"repl_image"===m.value?N.bV.ReplImage:N.bV.ReplFile,replImage:i?Z.value:void 0,replFile:a?b.value:void 0});case 23:if(!(d=e.sent).error){e.next=26;break}throw new Re(d.error);case 26:if(!u){e.next=34;break}if(!w.error){e.next=29;break}throw new ye;case 29:return e.next=31,C.setReplTags({replId:c.id,tags:w.value.map((function(e){return e.id}))});case 31:if(!(p=e.sent).error){e.next=34;break}throw new Re(p.error);case 34:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function A(){return(A=(0,s.Z)(g().mark((function t(){var r,n;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}throw new ye("Missing repl");case 2:if(!L){t.next=4;break}throw new ye(null!==L&&void 0!==L?L:"Something went wrong");case 4:if(!y.value){t.next=12;break}return t.next=7,T.createDeployment({input:{replId:c.id,description:f.value,iconUrl:H||c.iconUrl}});case 7:if(!(r=t.sent).error){t.next=10;break}throw new ke(r.error);case 10:return(0,be.j)(be.U3.POST_MADE,{source:e.source,replType:"template_repl",title:h.value,description:f.value,tags:w.value.map((function(e){return e.id})),defaultView:m.value}),t.abrupt("return");case 12:return t.next=14,P.publish({input:{replId:c.id}});case 14:if(!(n=t.sent).error){t.next=17;break}throw new ke(n.error);case 17:(0,be.j)(be.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:h.value,description:f.value,tags:w.value.map((function(e){return e.id})),defaultView:m.value});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O=S.loading||k.loading||C.loading,K=S.error||k.error||C.error,j=P.loading||T.loading,te=P.error||T.error;return{selectedRepl:c,isReplLoading:u.loading,replLoadingError:u.error,replIdField:o,replTitleField:h,replDescriptionField:f,iconUrlField:v,coverDefaultViewField:m,coverUrlField:Z,coverFileField:b,tagsField:w,isTemplateField:y,replIconInput:_,replIconUrl:H,inputError:L,save:function(){return M.apply(this,arguments)},isSaving:O,savingError:K,publish:function(){return A.apply(this,arguments)},isPublishing:j,publishingError:te,isPublished:p}}var Te=l.createContext(null),Be=function(e){var t=l.useContext(Te);if(!t)throw new Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},Ve=function(){var e=l.useContext(Te);if(!e)throw new Error("usePublishForm must be used within a PublishInputContext");return e},Ie=r(72917),Ge=r(92002),Fe=r(96594);function Ee(){var e=(0,O.Z)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return Ee=function(){return e},e}function Ue(){var e=(0,O.Z)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return Ue=function(){return e},e}var De={},We=(0,K.ZP)(Ee()),Xe=(0,K.ZP)(Ue(),We);var _e=r(32951),He=r(24351),Le=r(61179),Me=/^[0-9a-zA-Z]+$/,Ae=function(e){return e.id};function ze(e){var t=e.search,r=e.filter,n=function(e){var t=(0,d.Z)({},De,e);return $.useQuery(Xe,t)}({variables:{limit:t?10:3,search:t}}).data,i=(0,l.useState)({official:[],community:[],newTag:[]}),a=i[0],o=i[1],u=(0,l.useMemo)((function(){if(n){var e=[],l=[],i=new Set,a=!0,o=!1,u=void 0;try{for(var s,c=n.tagGroups.official[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;i.add(d.id.toLowerCase()),r(d)&&e.push(d)}}catch(w){o=!0,u=w}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}var p=!0,h=!1,f=void 0;try{for(var g,v=n.tagGroups.community[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var m=g.value;i.add(m.id.toLowerCase()),r(m)&&l.push(m)}}catch(w){h=!0,f=w}finally{try{p||null==v.return||v.return()}finally{if(h)throw f}}var Z=l.find((function(e){return e.id===t})),b=!t||Z||i.has(t.toLowerCase())?void 0:{id:t,isOfficial:!1};return{official:e,community:l,newTag:b&&r(b)?[b]:[]}}}),[n,r,t]);return(0,l.useEffect)((function(){if(u){var e=u.official,t=u.community,r=u.newTag;o((function(n){return{official:(0,Le.Z)(e,{existing:n.official,getKey:Ae}),community:(0,Le.Z)(t,{existing:n.community,getKey:Ae}),newTag:r}}))}}),[u]),{tagGroups:a,reset:function(){o({official:[],community:[],newTag:[]})}}}var Ne=r(44044),Oe=r(25019),Ke=r(16857),$e=(0,i.KD)("ul"),je=(0,i.KD)("li");function Ye(e){var t=e.children;return(0,n.tZ)(i.ZP,{css:[P.l0.px(8),P.l0.pt(8)],children:(0,n.tZ)(C.x,{css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function qe(e){var t=e.highlighted,r=e.tag;return(0,n.tZ)(i.ZP,{css:[P.l0.rowWithGap(8),P.l0.p(8),t&&{backgroundColor:Ne.gU.listItem[":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,n.BX)(i.ZP,{css:[P.l0.flex.growAndShrink(1),P.l0.rowWithGap(4)],children:[(0,n.tZ)(C.x,{children:r.id}),r.isOfficial?(0,n.tZ)(Ke.Z,{}):null]})})}var Qe=l.memo((function(e){var t=e.getItemProps,r=e.highlightedIndex,l=e.data;return(0,n.tZ)(Oe.Z,{css:[P.l0.minWidth(200)],children:l.sections.reduce((function(e,l){return e.sections.push((0,n.BX)(je,{children:[(0,n.tZ)(Ye,{children:l.title}),(0,n.tZ)($e,{css:[P.l0.pt(4),P.l0.pb(8)],children:l.tags.map((function(l){var i=e.itemIndex++;return(0,n.tZ)(je,(0,p.Z)((0,d.Z)({},t({item:l,index:i})),{children:(0,n.tZ)(qe,{tag:l,highlighted:r===i})}),l.id)}))})]},l.title)),e}),{sections:[],itemIndex:0}).sections})})),Je=(0,i.KD)("div"),et=(0,i.KD)("input"),tt=(0,k.iv)([P.l0.fontSize(12),P.l0.pl(24),P.l0.pr(8),P.l0.py(4)]);function rt(){return(0,n.tZ)(C.x,{css:[P.l0.px(4),P.l0.flex.row,P.l0.align.center,P.l0.position.absolute,P.l0.height("100%"),P.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,n.tZ)(Ge.Z,{size:12})})}function nt(e){var t=e.text,r=e.children;return(0,n.BX)(S.Z,{elevated:!0,css:[P.l0.position.relative,P.l0.minWidth(30),P.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:P.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,n.tZ)(rt,{}),(0,n.tZ)(C.x,{css:[{visibility:"hidden"},tt],children:t}),r]})}function lt(e){var t=e.onSelect,r=function(e){var t=e.onSelect,r=e.filter,n=void 0===r?function(){return!0}:r,i=(0,l.useState)(""),a=i[0],o=i[1],u=(0,He.Z)(a,100),s=(0,ee.Z)(t),c=ze({search:u,filter:n}),d=c.tagGroups,p=c.reset,h=(0,Fe.Kb)({inputValue:a,items:(0,x.Z)(d.official).concat((0,x.Z)(d.community),(0,x.Z)(d.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(p(),o(""),h.reset(),h.openMenu())}});return(0,_e.Z)((function(){h.selectedItem&&s.current(h.selectedItem)}),[h.selectedItem]),{tagGroups:d,combobox:h,onChange:function(e){var t=e.currentTarget.value;t&&!Me.test(t)||t.length>30||o(t)}}}({filter:e.filter,onSelect:t}),a=r.combobox,o=r.tagGroups,u=r.onChange,s=(0,l.useMemo)((function(){return function(e){var t=[];return e.official.length&&t.push({title:"Official Tags",tags:e.official}),e.community.length&&t.push({title:"Community Tags",tags:e.community}),e.newTag.length&&t.push({title:"Create new tag",tags:e.newTag}),0===t.length?null:{type:"sections",sections:t}}(o)}),[o]),c="Add tag";return(0,n.BX)(i.ZP,{children:[(0,n.tZ)(Je,(0,p.Z)((0,d.Z)({},a.getComboboxProps()),{css:[P.l0.flex.row],children:(0,n.tZ)(nt,{text:a.inputValue||c,children:(0,n.tZ)(et,(0,d.Z)({css:[P.l0.coverContainer,tt,P.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":P.l0.color.foregroundDefault,"&:focus::placeholder":P.l0.color.foregroundDimmest}]},a.getInputProps({placeholder:c,onChange:u,onFocus:function(){a.openMenu()}})))})})),(0,n.tZ)(Je,(0,p.Z)((0,d.Z)({},a.getMenuProps()),{css:[P.l0.position.relative],children:s&&a.isOpen?(0,n.tZ)(Qe,{getItemProps:a.getItemProps,highlightedIndex:a.highlightedIndex,data:s}):null}))]})}function it(e){var t=e.tags,r=e.max,l=void 0===r?5:r,a=e.onAdd,o=e.onRemove,u=t.map((function(e){return e.id}));return(0,n.BX)(i.ZP,{css:[P.l0.flex.row,P.l0.flex.wrap,{margin:"calc(-1 * ".concat(P.TV.space4,")")}],children:[t.map((function(e,t){return(0,n.tZ)(i.ZP,{css:[P.l0.m(4)],children:(0,n.tZ)(Ie.g,{small:!0,tag:e,onClick:function(){return o(t)}})},e.id)})),t.length<l?(0,n.tZ)(i.ZP,{css:[P.l0.m(4)],children:(0,n.tZ)(lt,{onSelect:a,filter:function(e){return!u.includes(e.id.toLowerCase())}})}):null]})}var at=function(){var e=Be("tags");return(0,n.BX)(o.G7,{css:[o.l0.colWithGap(8)],children:[(0,n.tZ)(o.G7,{css:[o.l0.colWithGap(4)],children:(0,n.tZ)(it,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,x.Z)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,x.Z)(e.value.slice(0,t)).concat((0,x.Z)(e.value.slice(t+1))))}})}),(0,n.BX)(o.G7,{css:o.l0.rowWithGap(4),children:[(0,n.tZ)(o.xv,{color:"dimmer",variant:"small",children:"Adding tags helps others find your Repl."}),(0,n.BX)(o.xv,{color:"dimmest",variant:"small",children:[e.value.length,"/",5]})]})]})};function ot(){var e=(0,O.Z)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return ot=function(){return e},e}function ut(){var e=(0,O.Z)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return ut=function(){return e},e}var st={},ct=(0,K.ZP)(ot()),dt=(0,K.ZP)(ut(),ct);var pt=r(40963),ht=r(93604),ft=r(87653),gt=r(4306),vt=r(19815),mt=(0,i.KD)("div"),Zt=(0,i.KD)("li"),bt={searchValue:"",loading:!1,repls:[]};function wt(e,t){switch(t.type){case"data":var r,n=(null===(r=t.data.currentUser)||void 0===r?void 0:r.publishableReplSearch)||[];return(0,p.Z)((0,d.Z)({},e),{loading:!1,repls:(0,Le.Z)(n,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,p.Z)((0,d.Z)({},e),{loading:!0});case"searchValue":return(0,p.Z)((0,d.Z)({},e),{searchValue:t.searchValue})}}function xt(){var e=(0,l.useReducer)(wt,bt),t=e[0],r=e[1],n=function(e){var t=(0,d.Z)({},st,e);return $.useQuery(dt,t)}({variables:{search:(0,He.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){r({type:"data",data:e})}}).loading;(0,l.useEffect)((function(){n&&r({type:"loading"})}),[n]);var i=(0,l.useCallback)((function(e){return r({type:"searchValue",searchValue:e||""})}),[]);return{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:i}}function yt(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function Rt(e){var t,r=l.useRef(null);(0,vt.rf)((function(){var t;e.selectedRepl&&(null===(t=r.current)||void 0===t||t.blur())}),[e.selectedRepl]);var a=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&yt(e.selectedRepl)===e.inputValue?(0,n.tZ)(i.ZP,{css:[P.l0.px(8),P.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,n.tZ)(V.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,n.BX)(i.ZP,{css:[{position:"relative"}],children:[(0,n.BX)(mt,(0,p.Z)((0,d.Z)({},e.getComboboxProps()),{css:{position:"relative"},children:[a,(0,n.tZ)(pt.ZP,(0,d.Z)({css:[P.l0.pr(32),a&&P.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:r}))),(0,n.tZ)(i.ZP,{css:[P.l0.center,P.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,n.tZ)(u.Z,{}):(0,n.tZ)(ft.Z,{})})]})),(0,n.tZ)(mt,(0,p.Z)((0,d.Z)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,n.BX)(Oe.Z,{children:[e.loading&&0===e.repls.length?(0,n.tZ)(Zt,{css:[P.l0.center,P.l0.py(32)],children:(0,n.tZ)(u.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,n.tZ)(Zt,{css:[P.l0.center,P.l0.py(32)],children:(0,n.tZ)(C.x,{color:"dimmer",variant:"small",children:"No repls found"})}),e.repls.map((function(t,r){return(0,n.tZ)(Zt,(0,p.Z)((0,d.Z)({},e.getItemProps({item:t,index:r})),{children:(0,n.tZ)(gt.Z,{filter:"",title:yt(t),subtitle:(0,ht.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===r,icon:t.iconUrl?(0,n.tZ)(V.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)}))]}):null}))]})}var kt=r(37424);function Ct(e){var t=e.error,r=e.dataCy;return t?(0,n.BX)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:[(0,n.tZ)(v.Z,{css:[o.l0.color.accentNegativeDefault]}),(0,n.tZ)(o.xv,{multiline:!0,css:[o.l0.flex.growAndShrink(1)],dataCy:r,children:t.message})]}):null}var St=(0,o.KD)("label"),Pt=l.forwardRef((function(e,t){return(0,n.tZ)(St,(0,p.Z)((0,d.Z)({},e),{ref:t,css:o.l0.color.foregroundDimmer}))})),Tt=function(){var e=(0,kt.H)()("repl"),t=Be("replId"),r=Be("iconUrl"),l=xt(),i=(0,Fe.Kb)({id:e,items:l.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;l.setSearchValue(t)},onSelectedItemChange:function(e){(null===e||void 0===e?void 0:e.selectedItem)&&(t.setValue(e.selectedItem.id),i.closeMenu())},itemToString:yt});return(0,n.BX)(o.G7,{css:[o.l0.colWithGap(4)],children:[(0,n.tZ)(Pt,{css:o.l0.color.foregroundDimmer,htmlFor:e,children:"Repl"}),(0,n.tZ)(Rt,{getComboboxProps:i.getComboboxProps,getInputProps:i.getInputProps,getItemProps:i.getItemProps,getMenuProps:i.getMenuProps,isOpen:i.isOpen,highlightedIndex:i.highlightedIndex,inputValue:i.inputValue,selectedRepl:i.selectedItem?(0,p.Z)((0,d.Z)({},i.selectedItem),{iconUrl:r.value||i.selectedItem.iconUrl}):void 0,repls:l.repls,loading:l.loading,onFocus:function(e){i.selectedItem&&(e.preventDefault(),e.currentTarget.select(),l.setSearchValue("")),i.openMenu()}})]})},Bt=function(){var e=(0,kt.H)(),t=e("replName"),r=e("replDescription"),l=Ve(),i=l.replIdField,a=l.replTitleField,u=l.replDescriptionField,s=l.isSaving,c=l.selectedRepl,d=c&&!c.isRenamed?"Default name: ".concat(c.title):"Enter a name for your Repl";return(0,n.BX)(o.G7,{css:[o.l0.colWithGap(16),o.l0.flex.growAndShrink(1)],children:[(!i.value||i.touched)&&(0,n.tZ)(Tt,{}),(0,n.BX)(o.G7,{css:[o.l0.colWithGap(4)],children:[(0,n.BX)(o.G7,{css:[o.l0.flex.row,o.l0.align.baseline,o.l0.justify.spaceBetween],children:[(0,n.tZ)(Pt,{css:[o.l0.color.foregroundDimmer,{lineHeight:o.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"}),(0,n.BX)(o.xv,{css:{color:a.value.length>60?o.TV.accentNegativeStronger:o.TV.foregroundDimmest},children:[a.value.length,"/",60]})]}),(0,n.tZ)(o.II,{id:t,disabled:!i.value||s,value:a.value,onChange:function(e){a.setValue(e.currentTarget.value)},placeholder:d,dataCy:"publish-form-repl-title-input"}),a.touched&&(0,n.tZ)(Ct,{error:a.error,dataCy:"publish-form-repl-title-error"})]}),(0,n.BX)(o.G7,{css:[o.l0.colWithGap(4)],children:[(0,n.BX)(o.G7,{css:[o.l0.flex.row,o.l0.align.baseline,o.l0.justify.spaceBetween],children:[(0,n.tZ)(Pt,{css:[o.l0.color.foregroundDimmer,{lineHeight:o.TV.lineHeightSmall}],htmlFor:r,children:"Repl description"}),(0,n.BX)(o.xv,{css:{color:u.value.length>we?o.TV.accentNegativeStronger:o.TV.foregroundDimmest},children:[u.value.length,"/",we]})]}),(0,n.tZ)(o.B,{id:r,value:u.value,disabled:!i.value||s,onChange:function(e){u.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[o.l0.minHeight(128),o.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),u.touched&&(0,n.tZ)(Ct,{error:u.error,dataCy:"publish-form-repl-description-error"})]})]})},Vt=function(e){var t=e.showPlayButton,r=e.children;return(0,n.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,n.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden"},children:r}),(0,n.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,n.tZ)("rect",{width:"268",height:"17",fill:o.TV.backgroundDefault}),(0,n.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:o.TV.accentPositiveDimmer}),(0,n.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:o.TV.backgroundHighest}),(0,n.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:o.TV.backgroundHighest}),(0,n.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:o.TV.outlineDimmer}),t&&(0,n.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:o.TV.white}),(0,n.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:o.TV.outlineDimmer,strokeWidth:"1"})]})]})},It=r(62722),Gt=function(e){var t=function(e){var t=l.useRef(null),r={onClick:function(e){var r;return e.preventDefault(),e.stopPropagation(),null===(r=t.current)||void 0===r?void 0:r.click()}};return{inputProps:{onChange:function(t){var r=t.target,n=r.validity,l=r.files;if(n.valid){var i=l?l[0]:null;i&&e(i)}},"aria-hidden":"true",ref:t,accept:It.W9.join(","),type:"file"},buttonProps:r,inputRef:t}}(e.onFile),r=t.inputProps,i=t.buttonProps;return(0,n.BX)(n.HY,{children:[(0,n.tZ)("input",(0,p.Z)((0,d.Z)({},r),{css:{display:"none"}})),l.cloneElement(e.children,i)]})},Ft=r(15833),Et=r(48551);function Ut(e){return e.slice().sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{file:e,pathDepth:(0,Et.U$)(e)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}))}var Dt=(0,o.KD)("ol"),Wt=(0,o.KD)("li"),Xt=(0,k.iv)([P.l0.py(4),P.l0.borderRadius(8),{border:"1px solid ".concat(o.TV.outlineDimmest),borderRadius:o.TV.borderRadius8,backgroundColor:o.vb.interactiveBackground,zIndex:o.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:o.TV.space8,listStyle:"none"}]),_t={backgroundColor:o.vb.interactiveBackgroundActive},Ht={backgroundColor:o.TV.accentPrimaryDefault},Lt=(0,k.iv)([P.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,d.Z)({},_t),":active":(0,d.Z)({},Ht)}}]);function Mt(e){var t=e.fs,r=e.initiallySelectedFile,i=e.onFileSelect,a=e.onClear,u=l.useRef(null),c=function(e){var t=e.fs,r=(0,h.Z)(l.useState({isLoading:!0,error:null,files:[]}),2),n=r[0],i=r[1];return l.useEffect((function(){function e(){return(e=(0,s.Z)(g().mark((function e(){var r,n,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.listFiles();case 3:if(!(r=e.sent).error){e.next=6;break}throw new Error(r.error);case 6:l=Ut(null!==(n=r.files)&&void 0!==n?n:[]),i({isLoading:!1,error:null,files:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i({isLoading:!1,error:"Could not load files",files:[]});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),(0,d.Z)({},n)}({fs:t}),f=c.isLoading,v=c.files,m=c.error,Z=function(e){var t=e.files,r=e.inputRef,n=e.initiallySelectedFile,i=(0,h.Z)(l.useState(!1),2),a=i[0],o=i[1],u=(0,h.Z)(l.useState(t),2),s=u[0],c=u[1],f=l.useCallback((function(e){return t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}))}),[t]),g=(0,Fe.Kb)({items:s,isOpen:a,initialInputValue:n,initialSelectedItem:s.find((function(e){return e===n})),onIsOpenChange:function(e){o(Boolean(e.isOpen))},onInputValueChange:function(e){var t;c(f(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),v=l.useCallback((function(){var e;o(!1),null===(e=r.current)||void 0===e||e.blur()}),[r]);return l.useEffect((function(){var e;c(f(null!==(e=g.inputValue)&&void 0!==e?e:""))}),[t,f,g.inputValue]),l.useEffect((function(){g.selectedItem&&v()}),[g.selectedItem,v]),(0,p.Z)((0,d.Z)({},g),{closeMenu:v,items:s})}({files:v,inputRef:u,initiallySelectedFile:r}),b=(0,ee.Z)(i);return l.useEffect((function(){Z.selectedItem&&b.current(Z.selectedItem)}),[Z.selectedItem,b]),(0,n.BX)(o.G7,{children:[(0,n.tZ)(o.G7,(0,p.Z)((0,d.Z)({},Z.getComboboxProps({refKey:"innerRef"})),{css:[P.l0.position.relative],children:(0,n.tZ)(o.E1,(0,p.Z)((0,d.Z)({},Z.getInputProps({onFocus:Z.openMenu,ref:u,refKey:"inputRef",disabled:f,placeholder:"Search your files"})),{onClear:function(){var e;Z.reset(),null===(e=u.current)||void 0===e||e.focus(),a()},loading:f}))})),(0,n.BX)(o.G7,(0,p.Z)((0,d.Z)({},Z.getMenuProps({refKey:"innerRef"})),{css:[P.l0.position.relative],children:[m&&(0,n.tZ)(o.G7,{css:[P.l0.p(8)],children:(0,n.tZ)(o.xv,{children:"Something went wrong loading your files. Please try again."})}),!m&&Z.isOpen&&(0,n.tZ)(Dt,{css:[Xt],children:Z.items.length>0?Z.items.map((function(e,t){return(0,n.tZ)(Wt,(0,p.Z)((0,d.Z)({css:[Lt,Z.highlightedIndex===t&&_t,e===Z.selectedItem&&Ht]},Z.getItemProps({item:e,index:t,onClick:function(){Z.closeMenu()}})),{children:(0,n.tZ)(o.xv,{children:e})}),e)})):(0,n.tZ)(Wt,{css:[P.l0.p(8)],children:(0,n.BX)(o.xv,{children:['No files found for "',Z.inputValue,'"']})})})]}))]})}var At=r(7657),zt=r(41307),Nt=[{value:ve.ReplImage,text:"Photo"},{value:ve.ReplFile,text:"File"}],Ot=function(e){var t=e.fs,r=(0,kt.H)(),l=r("coverPage"),i=Ve(),a=i.selectedRepl,u=i.coverFileField,s=i.coverUrlField,c=i.coverDefaultViewField,d=(0,J.W)(s.setValue);return(0,n.BX)(o.G7,{css:[o.l0.colWithGap(16)],children:[(0,n.BX)(o.G7,{css:o.l0.colWithGap(12),children:[(0,n.tZ)(o.G7,{css:[o.l0.rowWithGap(8)],children:(0,n.tZ)(o.Ee,{tag:"fieldset",css:[o.l0.rowWithGap(24)],name:l,value:c.value,onChange:function(e){xe(e.target.value)&&c.setValue(e.target.value)},children:Nt.map((function(e){return(0,n.BX)(o.G7,{css:[o.l0.rowWithGap(8)],children:[(0,n.tZ)(o.Y8,{id:r(e.value),value:e.value}),(0,n.tZ)("label",{htmlFor:r(e.value),children:e.text})]},e.value)}))})}),c.value===ve.ReplImage&&(0,n.tZ)(n.HY,{children:(0,n.tZ)(Gt,{onFile:function(e){return d.uploadImage(e,At.N.ReplCoverImage)},children:(0,n.tZ)(o.zx,{text:"Upload a cover photo",iconLeft:(0,n.tZ)(Ft.Z,{})})})}),c.value===ve.ReplFile&&(0,n.BX)(o.G7,{css:[o.l0.colWithGap(4)],children:[(0,n.tZ)(Mt,{fs:t,initiallySelectedFile:u.value,onFileSelect:u.setValue,onClear:function(){return u.setValue("")}},null===a||void 0===a?void 0:a.id),(0,n.tZ)(Ct,{error:u.error})]})]}),c.value===ve.ReplImage&&(0,n.tZ)(Vt,{showPlayButton:c.value===ve.ReplImage&&!!s.value,children:c.value===ve.ReplImage&&!!s.value&&(0,n.tZ)(zt.y,{src:s.value,alt:"cover"})})]})},Kt=(r(67629),function(){Be("iconUrl");var e=Ve(),t=e.replIconInput,r=e.replIconUrl;return(0,n.BX)(o.G7,{css:[o.l0.colWithGap(16),o.l0.align.center],children:[(0,n.BX)(o.G7,{css:[o.l0.colWithGap(8)],children:[(0,n.BX)(o.G7,{css:[o.l0.rowWithGap(8)],children:[(0,n.tZ)(Gt,{onFile:function(e){return t.uploadImage(e,At.N.ReplIcon)},css:o.l0.backgroundColor.accentNegativeDefault,children:(0,n.tZ)(o.zx,{text:"Upload image",iconLeft:(0,n.tZ)(Ft.Z,{}),css:[o.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}),false]}),t.error?(0,n.tZ)(o.G7,{children:(0,n.tZ)(o.E_,{icon:(0,n.tZ)(v.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,n.tZ)(V.LN,{alt:"icon",size:84,iconUrl:r,isLoading:Boolean(t.previewUrl),css:[o.l0.backgroundColor.backgroundHigher]})]})}),$t=r(92876),jt=r(18962),Yt=r(45528),qt=r(66223),Qt=r(75240),Jt=r(99336),er=r(88812);function tr(e){var t=e.repl,r=e.currentUser,n=(0,h.Z)(l.useState(""),2),i=n[0],a=n[1],o=(0,h.Z)(l.useState((function(){return function(e){var t=e.setBsodSentryEventId,r=(0,Qt.Z)({onUnrecoverableError:function(e){$t.Tb(e);var r=(0,Jt.ZP)(e,{tags:{publish2:"true"}});t(r)}}),n=(0,qt.Z)({container:r});return{container:r,fs:n,dotReplit:(0,er.Z)({container:r,fs:n})}}({setBsodSentryEventId:a})})),1),u=o[0],s=u.container,c=u.fs,d=u.dotReplit,p=(0,h.Z)(l.useState((function(){return s.getConnectionState()===jt.e.CONNECTED})),2),f=p[0],g=p[1],v=(0,Yt.b)(t?{repl:t,currentUser:r}:null);return l.useEffect((function(){if(t&&v&&s.getConnectionState()===jt.e.DISCONNECTED)return s.connect({context:v}),function(){return s.close()}}),[t,s,v]),l.useEffect((function(){return s.onConnectionStateChanged((function(e){g(e===jt.e.CONNECTED)}))}),[s]),{isConnected:f,container:s,fs:c,dotReplit:d,didBsod:Boolean(i),devClearBsod:function(){return a("")}}}var rr=r(22862),nr=r(65456);var lr=r(88075),ir=(0,o.KD)("button"),ar=function(){return(0,n.tZ)(i.ZP,{css:[o.l0.flex.row,o.l0.flex.grow(1),{borderTop:"1px solid ".concat(o.TV.outlineDimmest)}]})},or=function(e){var t=e.isActive,r=e.isComplete,l=e.children,i=e.onClick,a=e.disabled;return(0,n.BX)(ir,{type:"button",css:[o.l0.reset.button,o.l0.position.relative,o.gU.nofill,t&&o.l0.backgroundColor.backgroundHigher,o.l0.p(4),o.l0.borderRadius(4)],onClick:i,disabled:a,children:[(0,n.tZ)(o.xv,{variant:"small",children:l}),r&&(0,n.tZ)(lr.Z,{size:6,strokeWidth:6,color:o.TV.foregroundDimmer,css:[o.l0.position.absolute,{top:2,right:-2}]})]})},ur=r(61193),sr=function(){var e=Be("isTemplate"),t=(0,kt.H)()("templateCheckbox"),r=(0,ur.c)("flag-templates-page-v2"),l=r.enabled,i=r.loading,a=l&&!i;return(0,n.BX)(o.G7,{css:[o.l0.colWithGap(8)],children:[(0,n.BX)(o.G7,{css:[o.l0.colWithGap(8)],children:[(0,n.BX)(o.G7,{css:[o.l0.rowWithGap(8)],children:[(0,n.tZ)(o.XZ,{id:t,checked:e.value,onChange:function(t){return e.setValue(t.target.checked)}}),(0,n.tZ)("label",{htmlFor:t,children:a?"Submit as Template for Review":"Publish Repl as a Template"})]}),(0,n.tZ)(Ct,{error:e.error})]}),(0,n.tZ)(o.xv,{variant:"small",color:"dimmer",multiline:!0,children:"This is a good option for Repls meant as starting points for future work."}),a?(0,n.BX)(n.HY,{children:[(0,n.tZ)(o.xv,{variant:"small",color:"dimmer",multiline:!0,children:"The Replit team will review your template before it is live on the Templates page."}),(0,n.tZ)(o.xv,{variant:"small",multiline:!0,children:(0,n.tZ)("a",{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",children:"Read more about what makes a great template in order to be considered for a feature."})})]}):(0,n.tZ)(n.HY,{children:(0,n.tZ)(o.xv,{variant:"small",multiline:!0,css:o.l0.color.orangeStrongest,children:"Please include a README or other explanation of your template in order to be considered for a feature."})})]})},cr=r(79064),dr=(0,o.KD)("form"),pr=function(e){var t=e.user,r=Ve(),l=r.selectedRepl,i=r.replTitleField,a=r.replDescriptionField,s=r.replIconUrl,h=r.tagsField,f=r.isTemplateField;return(0,n.BX)(o.Tg,{background:"root",css:[(0,c.Z)({},(0,w.et)("tabletMin"),{display:"flex"}),o.l0.flex.growAndShrink(1),o.l0.p(16),o.l0.colWithGap(12),o.l0.align.center,o.l0.display.none],children:[(0,n.tZ)(o.xv,{variant:"small",color:"dimmer",css:[o.l0.width("100%"),{fontWeight:o.TV.fontWeightMedium}],children:"Preview"}),(0,n.BX)(o.G7,{css:[o.l0.width("100%"),o.l0.maxWidth(432),o.l0.position.relative],children:[(0,n.tZ)(o.G7,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+o.TV.backgroundRoot+", inset 0 -48px 24px -24px "+o.TV.backgroundRoot}}),(0,n.BX)(o.G7,{css:[o.l0.height(416),o.l0.colWithGap(24),o.l0.justify.center,o.l0.overflow("hidden"),o.l0.backgroundColor.backgroundRoot],children:[(0,n.tZ)(X,{}),l&&s?(0,n.tZ)(D,{post:{user:t,repl:(0,p.Z)((0,d.Z)({},l),{title:i.value,iconUrl:s,tags:h.value,description:a.value,isTemplate:f.value})}}):(0,n.tZ)(o.G7,{css:[o.l0.flex.grow(1),o.l0.align.center,o.l0.justify.center],children:(0,n.tZ)(u.Z,{})}),(0,n.tZ)(X,{})]})]})]})},hr=["Basics","Tags","Icon","Cover page","More"];function fr(e){var t=e.replId,r=e.currentUser,i=e.source,a=function(){var e=(0,s.Z)(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}return e.abrupt("return",{message:"Could not get file"});case 2:if(t){e.next=4;break}return e.abrupt("return",{message:"File path cannot be blank"});case 4:return e.prev=4,e.next=7,H.stat(t);case 7:if((r=e.sent).exists&&r.type===nr.Tv.File){e.next=10;break}return e.abrupt("return",{message:"File does not exist"});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",{message:"Could not get file"});case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),p=Pe({replId:t,fileValidator:a,source:i}),f=p.selectedRepl,x=p.isReplLoading,y=p.replLoadingError,R=p.replIdField,k=p.replTitleField,C=p.replDescriptionField,S=p.iconUrlField,P=p.tagsField,T=p.coverDefaultViewField,B=p.coverUrlField,V=p.coverFileField,I=p.isTemplateField,G=p.save,F=p.isSaving,E=p.savingError,U=p.publish,D=p.isPublishing,W=p.publishingError,X=p.isPublished,_=tr({repl:f,currentUser:r}),H=_.fs,L=_.dotReplit,M=_.didBsod,A=_.devClearBsod,z=(0,h.Z)(l.useState(0),2),N=z[0],O=z[1],K=hr[N],$=N===hr.length-1,j=(0,h.Z)(l.useState({show:!1,isUpdate:!1}),2),Y=j[0],q=j[1],Q=(0,ur.c)("flag-templates-page-v2"),J=Q.enabled,te=Q.loading,re=J&&!te,ne=(0,h.Z)(l.useState((function(){return Array(hr.length).fill(!1)})),2),le=ne[0],ie=ne[1],ae=l.useCallback((function(e,t){var r=le;r[e]=t,ie(r)}),[le]);l.useEffect((function(){p.replTitleField.value&&p.replDescriptionField.value?ae(0,!0):ae(0,!1),p.tagsField.value.length>0?ae(1,!0):ae(1,!1),p.iconUrlField.value?ae(2,!0):ae(2,!1),p.coverDefaultViewField.value===ve.ReplImage&&p.coverUrlField.value||p.coverDefaultViewField.value===ve.ReplFile&&p.coverFileField.value?ae(3,!0):ae(3,!1)}),[le,p,ae]);var oe=function(e){var t=e.dotReplit,r=(0,h.Z)(l.useState({isLoading:!0,error:null,entryPoint:null}),2),n=r[0],i=r[1];return l.useEffect((function(){function e(){return e=(0,s.Z)(g().mark((function e(){var r,n,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,t.getConfig();case 4:if(!(n=e.sent).error){e.next=7;break}throw new Error(n.errorMessage);case 7:i({isLoading:!1,error:null,entryPoint:null!==(l=null===n||void 0===n||null===(r=n.config)||void 0===r?void 0:r.entrypoint)&&void 0!==l?l:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i({isLoading:!1,error:"Could not load .replit config",entryPoint:null});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),(0,d.Z)({},n)}({dotReplit:L});l.useEffect((function(){oe.isLoading||!oe.entryPoint||V.value||V.setValue(oe.entryPoint)}),[oe.isLoading,oe.entryPoint,V]);var ue=(0,h.Z)(l.useState(!1),2),se=ue[0],ce=ue[1];l.useEffect((function(){se||t&&(x||X)||(ce(!0),(0,be.j)(be.U3.PUBLISH_SELECTED,{source:i}))}),[se,i,t,x,X]);var de=(0,ee.Z)(Boolean((null===f||void 0===f?void 0:f.publishedAs)||(null===f||void 0===f?void 0:f.lastPublishedAt))),pe=(0,ee.Z)(K);if(l.useEffect((function(){return function(){de.current||(0,be.j)(be.U3.PUBLISH_FLOW_EXITED,{source:i,lastSectionVisited:pe.current})}}),[i,de,pe]),M)return(0,n.tZ)(rr.Z,{devHide:A});if(Y.show&&f)return(0,n.tZ)(cr.q,{repl:f,isUpdate:Y.isUpdate});var he,fe={Basics:{hasError:Boolean(R.error||k.error||C.error),isValid:(0,s.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([R.validate(),k.validate(),C.validate()]);case 2:return e.abrupt("return",e.sent.every((function(e){return!e})));case 3:case"end":return e.stop()}}),e)})))},Tags:{hasError:Boolean(P.error),isValid:(0,s.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.validate();case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})))},Icon:{hasError:Boolean(S.error),isValid:(0,s.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validate();case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})))},"Cover page":{hasError:Boolean(T.value===ve.ReplImage?B.error:V.error),isValid:(0,s.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.value!==ve.ReplImage){e.next=6;break}return e.next=3,B.validate();case 3:e.t0=!e.sent,e.next=9;break;case 6:return e.next=8,V.validate();case 8:e.t0=!e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})))},More:{hasError:Boolean(I.error),isValid:(0,s.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.validate();case 2:return e.abrupt("return",!e.sent);case 3:case"end":return e.stop()}}),e)})))}},ge=fe[K].hasError,me=fe[K].isValid,Ze=null!==(he=hr.find((function(e){return fe[e].hasError})))&&void 0!==he?he:null,we=null;f?y||E||W?we="Something went wrong - please try again":ge&&(we="Please fill out the the form"):we="Please select a Repl";var xe=Boolean(!f||ge||y||x||F||D),ye=Boolean(I.value),Re=ye&&re?"Submitting...":"Publishing...",ke=ye&&re?"Submit Template":"Publish to Community",Ce=function(){var e=(0,s.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xe,e.t0){e.next=5;break}return e.next=4,me();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,G();case 10:O(t),e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(7),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,n.tZ)(Te.Provider,{value:p,children:(0,n.BX)(o.Tg,{css:[o.l0.borderRadius(8),o.l0.flex.row,o.l0.overflow("hidden"),(0,c.Z)({},(0,w.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,n.BX)(o.G7,{css:[o.l0.colWithGap(12),o.l0.p(16),o.l0.minWidth(320),o.l0.flex.growAndShrink(1),(0,c.Z)({},(0,w.et)("tabletMin"),{maxWidth:320})],children:[(0,n.tZ)(o.xv,{variant:"subheadBig",children:X?"Edit Publish Settings":"Publish ".concat(t?"this":"a"," Repl")}),(0,n.BX)(dr,{onSubmit:function(){var e=(0,s.Z)(g().mark((function e(t){var r,n,l,i,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!$){e.next=39;break}r=!0,n=!1,l=void 0,e.prev=3,i=hr[Symbol.iterator]();case 5:if(r=(a=i.next()).done){e.next=14;break}return o=a.value,e.next=9,fe[o].isValid();case 9:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:r=!0,e.next=5;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),n=!0,l=e.t0;case 20:e.prev=20,e.prev=21,r||null==i.return||i.return();case 23:if(e.prev=23,!n){e.next=26;break}throw l;case 26:return e.finish(23);case 27:return e.finish(20);case 28:if(X){e.next=34;break}return e.next=31,U();case 31:q({show:!0,isUpdate:!1}),e.next=37;break;case 34:return e.next=36,G();case 36:q({show:!0,isUpdate:!0});case 37:e.next=40;break;case 39:Ce(N+1);case 40:case"end":return e.stop()}}),e,null,[[3,16,20,28],[21,,23,27]])})));return function(t){return e.apply(this,arguments)}}(),css:[o.l0.colWithGap(16),o.l0.flex.growAndShrink(1)],children:[(0,n.tZ)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:hr.map((function(e,t){return(0,n.BX)(l.Fragment,{children:[0!==t&&(0,n.tZ)(ar,{}),(0,n.tZ)(or,{isActive:N===t,isComplete:le[t],onClick:function(){return Ce(t)},disabled:xe,children:e})]},e)}))}),(0,n.BX)(o.G7,{css:o.l0.flex.growAndShrink(1),children:["Basics"===K&&(0,n.tZ)(Bt,{}),"Tags"===K&&(0,n.tZ)(at,{}),"Icon"===K&&(0,n.tZ)(Kt,{}),"Cover page"===K&&(0,n.tZ)(Ot,{fs:H}),"More"===K&&(0,n.tZ)(sr,{})]}),(0,n.BX)(o.G7,{children:[$&&Ze&&Ze!==K&&(0,n.tZ)(o.E_,{colorway:"negative",icon:(0,n.tZ)(v.Z,{}),text:"Please fix error in ".concat(Ze," section")}),E&&(0,n.tZ)(o.E_,{colorway:"negative",icon:(0,n.tZ)(v.Z,{}),text:E}),W&&(0,n.tZ)(o.E_,{colorway:"negative",icon:(0,n.tZ)(v.Z,{}),text:W})]}),(0,n.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.spaceBetween,o.l0.align.center],children:[(0,n.tZ)(o.zx,{css:[0===N&&o.l0.visibility.hidden],type:"button",iconLeft:(0,n.tZ)(Z.Z,{}),disabled:xe,onClick:function(){return Ce(N-1)},text:"Back"}),F&&(0,n.tZ)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.color.foregroundDimmer],children:(0,n.tZ)(u.Z,{})}),(0,n.BX)(o.u,{tooltip:we,placement:"bottom",isDisabled:!we,children:[!$&&(0,n.tZ)(o.zx,{type:"submit",colorway:"primary",iconLeft:(0,n.tZ)(b.Z,{}),disabled:xe,text:"Next",dataCy:"publish-form-next-button"}),$&&!X&&(0,n.tZ)(o.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(o.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,n.tZ)(m.Z,{}),disabled:Boolean(xe||Ze),text:D?Re:ke,dataCy:"publish-form-publish-button"}),$&&X&&(0,n.tZ)(o.zx,{type:"submit",colorway:"primary",iconLeft:(0,n.tZ)(m.Z,{}),disabled:Boolean(xe||Ze),text:F?"Saving...":"Save"})]})]})]})]}),(0,n.tZ)(pr,{user:r})]})})}function gr(e){var t,r,l=e.replId,s=e.source,c=(0,a.NH)(),d="CurrentUser"===(null===(t=c.data)||void 0===t||null===(r=t.currentUser)||void 0===r?void 0:r.__typename)?c.data.currentUser:null;return c.loading?(0,n.tZ)(i.ZP,{css:[o.l0.center,o.l0.p(32)],children:(0,n.tZ)(u.Z,{})}):c.error||!d?(0,n.tZ)(i.ZP,{css:[o.l0.center,o.l0.p(32)],children:(0,n.tZ)(o.xv,{children:"Something went wrong, please try again."})}):(0,n.tZ)(fr,{source:s,replId:l,currentUser:d})}},79064:function(e,t,r){r.d(t,{q:function(){return w}});var n=r(26042),l=r(69396),i=r(10253),a=r(35944),o=r(67294),u=r(65975),s=r(90317),c=r(41664),d=r.n(c),p=r(88046),h=r(79500),f=r(41034),g=r(85565),v=r(9517),m=r(71255),Z=r(61193),b=function(e){var t=e.url,r=e.successMessageDurationMs,n=void 0===r?1500:r,l=(0,i.Z)(o.useState(!1),2),s=l[0],c=l[1],d=o.useRef(null);return o.useEffect((function(){return function(){d.current&&clearTimeout(d.current)}}),[]),(0,a.tZ)(u.u,{isOpen:s,placement:"bottom",tooltip:s?"Copied!":"Copy link",delay:0,children:(0,a.tZ)(u.hU,{alt:"Copy link",tooltipHidden:!1,onClick:function(){t&&((0,h.Z)(t),c(!0),d.current=setTimeout((function(){c(!1)}),n))},children:(0,a.tZ)(f.Z,{})})})},w=function(e){var t=e.repl,r=e.isUpdate,i=(0,p.j3)(t),o=t.url?(0,p.QB)(t):"",c=t.publishedAs===s.O2.Template,h=(0,m.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:o}),f=(0,Z.c)("flag-templates-page-v2"),w=f.enabled,x=f.loading,y=w&&!x;return(0,a.BX)(u.Tg,{background:"default",css:[u.l0.borderRadius(8),u.l0.p(16),u.l0.overflow("hidden"),u.l0.colWithGap(16),u.l0.flex.growAndShrink(1)],dataCy:"published-repl-share-info-container",children:[(0,a.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,a.BX)(u.xv,{variant:"subheadBig",children:[c?"Template":"Repl"," ",r?"updated":"published","!"]})," ",(0,a.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,a.tZ)(u.xv,{variant:"small",css:[u.l0.color.foregroundDimmer],children:"Cover page link"}),(0,a.BX)(u.G7,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,a.tZ)(d(),(0,l.Z)((0,n.Z)({},i),{css:[u.l0.flex.growAndShrink(1)],children:(0,a.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:o})})),(0,a.tZ)(b,{url:o})]})]})]}),(0,a.BX)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.justify.end,{alignItems:"flex-end"}],children:[(0,a.tZ)(u.ZP,{prefetch:!1,href:h,iconLeft:(0,a.tZ)(g.Z,{}),text:"Share to twitter",target:"_blank"}),(0,a.tZ)(u.ZP,{iconRight:(0,a.tZ)(v.Z,{}),text:c?"Go to Templates":"Go to Community",href:c?{pathname:y?"/templates/templates2":"/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:c?"/templates":"/community/all"})]})]})}},40914:function(e,t,r){r.d(t,{r:function(){return b}});var n=r(47568),l=r(10253),i=r(34051),a=r.n(i),o=r(26042),u=r(7297),s=r(31230),c=r(15764),d=r(46829);function p(){var e=(0,u.Z)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,u.Z)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var f={},g=(0,s.ZP)(p(),c.FW);var v=(0,s.ZP)(h(),c.FW);var m="Something went wrong publishing your Template";function Z(e){if(e.error)return e.error.message||m;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return m}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return m}}}function b(){var e=(0,l.Z)(function(e){var t=(0,o.Z)({},f,e);return d.useMutation(g,t)}(),2),t=e[0],r=e[1],i=(0,l.Z)(function(e){var t=(0,o.Z)({},f,e);return d.useMutation(v,t)}(),2),u=i[0],s=i[1],c=function(){var e=(0,n.Z)(a().mark((function e(t){var n,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.input,!r.loading&&!s.loading){e.next=3;break}return e.abrupt("return",{data:null,error:null});case 3:return e.prev=3,e.next=6,u({refetchQueries:["ReplEnvironmentHeader"],variables:{input:n}});case 6:return l=e.sent,e.abrupt("return",{data:l.data,error:Z(l)});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{data:null,error:m});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)(a().mark((function e(n){var l,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.input,!r.loading&&!s.loading){e.next=3;break}return e.abrupt("return",{data:null,error:null});case 3:return e.prev=3,e.next=6,t({variables:{input:l}});case 6:return i=e.sent,e.abrupt("return",{data:i.data,error:Z(i)});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{data:null,error:m});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return{createRelease:c,createDeployment:p,data:r.data||s.data,loading:r.loading||s.loading,error:Z(r||s)}}}}]);
//# sourceMappingURL=7838-6b700a0d589f47b9.js.map