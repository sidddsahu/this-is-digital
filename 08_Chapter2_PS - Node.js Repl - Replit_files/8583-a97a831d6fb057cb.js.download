"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8583],{74591:function(e,t,n){var r=n(35944),i=(n(67294),n(69346)),a=n(1144),o=n(81255),l=n(65975),c=n(57704);t.Z=function(e){return(0,r.BX)(i.ZP,{css:[o.l0.colWithGap(24)],children:[(0,r.BX)(a.h,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType]}),(0,r.BX)(a.x,{multiline:!0,children:["Are you sure you want to delete this ",e.entityType,"? This cannot be undone."]}),(0,r.BX)(i.ZP,{css:[o.l0.rowWithGap(12),o.l0.justify.end],children:[(0,r.tZ)(l.zx,{text:"Cancel",onClick:e.hideModal}),(0,r.tZ)(l.zx,{dataCy:"delete-modal-confirm-button",iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete this ".concat(e.entityType),colorway:"negative"})]})]})}},60368:function(e,t,n){var r=n(35944),i=n(60536),a=n.n(i);n(67294);t.Z=function(e){var t=e.maxLength,n=void 0===t?140:t,i=e.value,o=void 0===i?"":i,l=e.hideLabel,c=void 0!==l&&l;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[o.length," / ",n," ",c?"":"characters",(0,r.tZ)(a(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},62794:function(e,t,n){var r=n(10253),i=n(35944),a=n(67294),o=n(48821),l=n(1879),c=n(69346),u=n(10164),s=n(81255),d=n(1144);t.Z=function(e){var t=e.feature,n=(0,r.Z)(a.useState(!1),2),f=n[0],h=n[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.ZP,{onClick:function(){return h(!f)},children:(0,i.tZ)(d.x,{css:[s.l0.fontSize("inherit"),s.l0.color.accentPrimaryStronger,s.l0.cursor.pointer,{":hover":{color:s.TV.accentPrimaryStrongest}}],children:"Share feedback"})}),(0,i.tZ)(o.b5,{children:(0,i.tZ)(l.Z,{isOpen:f,onRequestClose:function(){h(!1)},children:(0,i.tZ)(u.Z,{setFeedbackFormOpen:h,feature:t})})})]})}},80658:function(e,t,n){n.d(t,{Z:function(){return B}});var r=n(26042),i=n(69396),a=n(10253),o=n(35944),l=n(67294),c=n(92876),u=n(30992),s=n(65975),d=n(98967),f=n(83074),h=n(58086),p=n(37424),v=n(60368),m=n(14455),g=n(9836),Z=n(30168),x=n(94412),y=n(7297),b=n(31230),w=n(97212),k=n(46829);function E(){var e=(0,y.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return E=function(){return e},e}var C={},S=(0,b.ZP)(E(),w.s,w.a);var R=n(99383),T=function(e){var t=e.onFork,n=e.hideModal,r=e.initialTitle,i=e.initialDescription,c=void 0===i?"":i,d=e.initialPrivacy,y=e.teamContext,b=e.currentUser,w=l.useRef(null),k=(0,p.H)(),E=(0,a.Z)((0,g.Y)(b,y),2),C=E[0],S=E[1],T=(0,a.Z)((0,R.c)(C,b,d||!1),3),B=T[0],_=T[1],L=T[2],P=(0,u.Y)(r,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),W=(0,u.Y)(c,(function(e){if(e&&e.length>h.p)return{message:"Must be no longer than ".concat(h.p," characters")}}));l.useEffect((function(){w.current&&w.current.focus()}),[w]);var D="Team"===C.__typename?C.id:null;return(0,o.tZ)("form",{onSubmit:function(e){e.preventDefault(),P.validate()||W.validate()||(t(D,P.value,W.value,B),n())},children:(0,o.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(s.h4,{variant:"headerDefault",level:2,children:"Fork Repl"}),(0,o.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,o.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,o.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,o.tZ)(m._,{for:k("name"),children:"Name"}),(0,o.tZ)(v.Z,{maxLength:60,value:P.value,hideLabel:!0})]}),(0,o.tZ)(s.II,{ref:w,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return P.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:P.value,onBlur:P.handleBlur,id:k("name")}),P.error&&(0,o.tZ)(s.xv,{css:[s.l0.color.accentNegativeStronger],children:P.error.message})]}),(0,o.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,o.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,o.tZ)(m._,{for:k("description"),children:"Description"}),(0,o.tZ)(v.Z,{maxLength:h.p,value:W.value,hideLabel:!0})]}),(0,o.tZ)(s.B,{maxLength:h.p,value:W.value,onChange:function(e){return W.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(96),s.l0.maxHeight(128),{resize:"vertical"}],id:k("description")})]}),(0,o.tZ)(x.P,{context:"fork_modal",isPrivate:B,setIsPrivate:_,privacyState:L})]}),b.teams.length>0?(0,o.BX)(s.G7,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(m._,{for:k("owner"),children:"Owner"}),(0,o.tZ)(Z.Z,{id:k("owner"),currentUser:b,initialSelectedUsername:C.username,onChange:function(e){return S(e.username)}})]}):null,(0,o.BX)(s.G7,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,o.tZ)(s.zx,{onClick:n,text:"Cancel",type:"button"}),(0,o.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:Boolean(P.error||W.error),text:"Fork Repl",iconLeft:(0,o.tZ)(f.Z,{})})]})]})})};function B(e){var t=function(e){var t=(0,r.Z)({},C,e);return k.useQuery(S,t)}({fetchPolicy:"cache-and-network",onError:function(e){c.$e((function(t){t.setTag("fork-modal",!0),c.Tb(e)}))}}),n=t.data,a=t.loading,l=t.error;if(a)return(0,o.tZ)(s.xv,{color:"dimmer",children:"Loading..."});if(l)return(0,o.tZ)(s.xv,{children:"Something went wrong."});if(!n)return null;var u=n.currentUser;return u?(0,o.tZ)(T,(0,i.Z)((0,r.Z)({},e),{currentUser:u})):(0,o.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},59292:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(26042),i=n(69396),a=n(10253),o=n(67294),l=n(11163),c=n(93058),u=n(7297),s=n(31230),d=n(46829);function f(){var e=(0,u.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},p=(0,s.ZP)(f());function v(e){var t=(0,r.Z)({},h,e);return d.useMutation(p,t)}var m=n(33400),g=n(86292),Z=n(15935);function x(){var e,t,n,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=u.onFork,d=u.onError,f=(0,l.useRouter)(),h=(0,c.Z)().showError,p=(0,m.Z)(),x=(0,a.Z)(v({onCompleted:function(e){var t="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(t)if(s&&s(e),"/replEnvironment2"!==f.pathname&&"/replEnvironmentMobile"!==f.pathname)f.push({pathname:p,query:{replUrl:t.url}},{pathname:t.url});else{var n=t.url+(f.query.lite?"?lite=".concat(f.query.lite.toString()):"");window.location.href=n}}}),2),y=x[0],b=x[1],w="UserError"===(null===(e=b.data)||void 0===e?void 0:e.createRepl.__typename)?null===(t=b.data)||void 0===t?void 0:t.createRepl.message:null===(n=b.error)||void 0===n?void 0:n.message;o.useEffect((function(){w&&(h(w),d&&d())}),[w,h,d]);var k=o.useCallback((function(e){var t=e.originId,n=e.replReleaseId,a=e.teamId,o=e.title,l=e.description,c=e.isPrivate,u=e.trackingData,s=e.forkToPersonal;y({variables:{input:{originId:t,replReleaseId:n,teamId:a,title:o,isPrivate:c,description:l,forkToPersonal:s,gitRemoteUrl:""}}}).then((function(e){var t,a,o,l,c,s,d,f="Repl"===(null===(t=e.data)||void 0===t?void 0:t.createRepl.__typename)?e.data.createRepl:null;f&&(0,g.j)(g.U3.REPL_CREATED,(0,i.Z)((0,r.Z)({isSignup:!1,isOnboarding:!1},u),{isForked:!0,isPrivate:f.isPrivate,replId:f.id,isRenamed:!1,language:f.language,isSelfForked:!!(null===(a=f.origin)||void 0===a?void 0:a.isOwner),isTemplateFork:Boolean(n),templateReplId:(null===(o=f.source)||void 0===o||null===(l=o.release)||void 0===l||null===(c=l.repl)||void 0===c?void 0:c.id)||void 0,templateType:(null===(s=f.source)||void 0===s||null===(d=s.release)||void 0===d?void 0:d.repl)?(0,Z.lw)(f.source.release.repl):void 0}))}))}),[y]),E=!!(b.loading||b.data&&"Repl"===b.data.createRepl.__typename);return[k,{loading:E}]}},18332:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(10253),i=n(29815),a=n(67294),o=n(24351),l=n(26042),c=n(69396),u=function(e){return/\s/.test(e)};function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r.Z)(a.useState(null),2),o=i[0],s=i[1],d=a.useCallback(s,[s]),f=a.useRef(t);a.useEffect((function(){f.current=t}),[t]);var h=(0,r.Z)(a.useState(null),2),p=h[0],v=h[1];return a.useEffect((function(){if(o){var e=function(){var e=o.value,t=o.selectionStart;if(t){var n=1===t||u(e[t-2]||""),r=e.length?e[t-1]:null;v((function(i){if(i&&(t<i.index||0===t))return null;if(!r)return i;if(!i&&!n)return i;var a=f.current.includes(r);return i||a?i?u(r)?null:(0,c.Z)((0,l.Z)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i}))}else v(null)},t=function(){v(null)};return o.addEventListener("focus",e),o.addEventListener("keyup",e),o.addEventListener("blur",t),function(){v(null),o.removeEventListener("focus",e),o.removeEventListener("keyup",e),o.removeEventListener("blur",t)}}}),[o,v]),[p,d]}function d(e){var t=a.useRef(e);a.useEffect((function(){t.current=e}),[e]);var n=(0,r.Z)(a.useState(!1),2),l=n[0],c=n[1],u=(0,r.Z)(a.useState(null),2),d=u[0],f=u[1],h=(0,r.Z)(s.apply(void 0,(0,i.Z)(Object.keys(e))),2),p=h[0],v=h[1],m=a.useRef(p);a.useEffect((function(){m.current=p}),[p]);var g=(0,o.Z)(p,100);return a.useEffect((function(){if(g){var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(r){var i=!1;return c(!0),r(n).then((function(e){i||m.current===g&&(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,a=t.slice(g.index+g.text.length);a&&a.startsWith(" ")||(i+=" ");var o=r+i+a;return{cursorIndex:(r+i).length+(a&&a.startsWith(" ")?1:0),fullValue:o}}}))})),function(){i=!0}}f(null)}else f(null)}),[g,f]),[{isLoading:l,suggestions:d},v]}},48506:function(e,t,n){function r(e){var t=e.trim();return 0===t.length||t.startsWith("#")}function i(e,t){return e.split(t).length-1}function a(e){if(!e.includes("#"))return e;var t=e.split("#"),n=!1,r=[],a=!0,o=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;(1===i(s,'"')||i(s,"'"))&&(n?(n=!1,r.push(s)):n=!0),(0===r.length||n)&&r.push(s)}}catch(d){o=!0,l=d}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return r.join("#")}function o(e,t){var n=e.trim();if(0===n.length)return n;var r=n.length-1,i='"'===n[0]&&'"'===n[r],a="'"===n[0]&&"'"===n[r];return(a||i)&&(n=n.slice(1,-1)),i&&(n=(n=n.replace(/\\./g,(function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e}))).replace(/\\([^$])/g,"$1")),a||(n=n.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,(function(e){var n=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===n)return e;if("\\"===n[1]||"("===n[2])return n[0].slice(1);var r=n[4];return""!==r?t[r]||"":e}))),n}n.d(t,{Z:function(){return c}});var l=n(10253);var c={parse:function(e){var t={},n=e.split(/\n|\r|\r\n/),i=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var d=u.value;if(!r(d)){var f=(d=a(d)).indexOf("="),h=d.indexOf(":");if(-1!==h||-1!==f){var p=f;-1!==h&&(h<f||-1===f)&&(p=h);var v=d.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),m=o(d.slice(p+1),t);t[v]=m}}}}catch(g){l=!0,c=g}finally{try{i||null==s.return||s.return()}finally{if(l)throw c}}return t},serialize:function(e){return Object.entries(e).reduce((function(e,t){var n=(0,l.Z)(t,2),r=n[0],i=n[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+="".concat(r,'="').concat(i,'"\n')}),"")}}},83241:function(e,t){t.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking",allowFullScreen:!0,allowTransparency:!0,allowpaymentrequest:!0}},6600:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(47568),i=n(34051),a=n.n(i),o=n(35944),l=n(67294),c=n(65975),u=n(37424),s=n(1144),d=n(93160),f=n(69346),h=n(81255),p=n(33773);function v(){var e=(0,l.useState)(!1),t=e[0],n=e[1];return(0,o.BX)(d.Z,{background:t?"higher":"default",css:[h.l0.borderRadius(8),h.l0.colWithGap(16),h.l0.p(8)],children:[(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.BX)(f.ZP,{onClick:function(){return n(!t)},css:[h.l0.rowWithGap(8),{cursor:"pointer"}],children:[(0,o.tZ)(s.x,{children:"Style your post with Markdown"}),(0,o.tZ)(p.Z,{rotate:t?0:270})]}),t?(0,o.tZ)(s.x,{color:"dimmer",multiline:!0,children:"You can style your post with a limited set of Markdown. Here are some supported content types:"}):null]}),t?(0,o.BX)(o.HY,{children:[(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.tZ)(s.x,{children:"Bold Text"}),(0,o.tZ)(s.x,{color:"dimmer",children:"**bold**"})]}),(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.tZ)(s.x,{children:"Italic Text"}),(0,o.tZ)(s.x,{color:"dimmer",children:"__italic__"})]}),(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.tZ)(s.x,{children:"Links"}),(0,o.tZ)(s.x,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.tZ)(s.x,{children:"Images"}),(0,o.tZ)(s.x,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.tZ)(s.x,{children:"Code Blocks"}),(0,o.BX)(s.x,{color:"dimmer",children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(f.ZP,{css:[h.l0.colWithGap(8)],children:[(0,o.tZ)(s.x,{children:"Inline Code"}),(0,o.tZ)(s.x,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]})]}):null]})}var m=n(90317),g=n(30992),Z=n(88961),x=n(19244),y=n(86292),b=n(75026),w=(0,c.KD)("form");function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function E(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function C(e){var t,n,i=e.repl,l=e.source,s=e.onDone,d=(0,u.H)(),f=d("titleIdInput"),h=d("descriptionIdInput"),p=(0,g.Y)("",k),C=(0,g.Y)("",E),S=(0,x.O)();return(0,o.BX)(w,{onSubmit:function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!p.validate()&&!C.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,S.publish({input:{replId:i.id,title:p.value,body:C.value}});case 5:e.sent.error||((0,y.j)(y.U3.UPDATE_SHARED,{source:l,replType:i.publishedAs===m.O2.Template?"template_repl":"regular_repl"}),s());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),css:[c.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:2,variant:"subheadBig",children:"Add an update"}),(0,o.BX)(c.xv,{children:["Explain what has changed about this"," ",i.publishedAs===m.O2.Template?"Template":"Repl","."]}),(0,o.BX)(c.G7,{css:c.l0.colWithGap(8),children:[(0,o.tZ)("label",{css:c.l0.color.foregroundDimmer,htmlFor:f,children:"Title"}),(0,o.tZ)(c.II,{id:f,onChange:function(e){p.setValue(e.target.value)},disabled:S.loading,placeholder:"Give your post a title"}),p.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(Z.Z,{}),text:null===(t=p.error)||void 0===t?void 0:t.message,colorway:"negative"})]}),(0,o.BX)(c.G7,{css:c.l0.colWithGap(8),children:[(0,o.tZ)("label",{css:c.l0.color.foregroundDimmer,htmlFor:h,children:"Description"}),(0,o.tZ)(c.B,{id:h,onChange:function(e){C.setValue(e.target.value)},css:[c.l0.width("100%"),{minHeight:c.TV.space128,maxHeight:c.TV.space256,resize:"vertical",lineHeight:c.TV.lineHeightDefault}],disabled:S.loading,placeholder:"Write something about this post"}),C.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(Z.Z,{}),text:null===(n=C.error)||void 0===n?void 0:n.message,colorway:"negative"})]}),(0,o.tZ)(v,{}),S.error&&(0,o.tZ)(c.E_,{icon:(0,o.tZ)(Z.Z,{}),colorway:"negative",text:S.error}),(0,o.tZ)(c.zx,{text:S.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(S.loading||p.error||C.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(b.Z,{})})]})}},58086:function(e,t,n){n.d(t,{p:function(){return r}});var r=1e3},68928:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(35944),i=(n(67294),n(24561)),a=n(93160),o=n(81255),l=n(70917),c=n(42895),u=(0,l.F4)({"0%":{opacity:0},"100%":{opacity:.5}}),s=(0,l.iv)([o.l0.p(16),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:0,animation:"".concat(u," ease 0s forwards"),animationDelay:"400ms",maxWidth:640,minWidth:500,height:"auto"},"@media (min-width: 900px)":o.l0.pl(32)}]);function d(){var e=(0,c.T)();return(0,r.tZ)(a.Z,{background:"default",css:s,children:(0,r.BX)(i.ZP,{animate:!e,speed:2,backgroundColor:o.TV.backgroundHighest,foregroundColor:o.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10"}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10"}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10"}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10"}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10"}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10"}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10"}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10"}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10"}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10"}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10"}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10"}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10"}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10"}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10"})]})})}},24337:function(e,t,n){n.d(t,{Z:function(){return y}});var r,i=n(47568),a=n(10253),o=n(34051),l=n.n(o),c=n(35944),u=n(60536),s=n.n(u),d=n(67294),f=n(92876),h=n(96189),p=n(86292),v=n(48506),m=n(75240),g=n(6625),Z=n(77365);!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected"}(r||(r={}));var x="VNC_PASSWORD";function y(e){var t=e.fs,o=e.container,u=(0,a.Z)(d.useState(null),2),y=u[0],b=u[1],w=(0,a.Z)(d.useState(void 0),2),k=w[0],E=w[1],C=(0,a.Z)(d.useState(r.Connecting),2),S=C[0],R=C[1],T=(0,a.Z)(d.useState(null),2),B=T[0],_=T[1],L=(0,a.Z)(d.useState(!1),2),P=L[0],W=L[1],D=(0,a.Z)(d.useState(!1),2),X=D[0],G=D[1],I=(0,a.Z)(d.useState(null),2),N=I[0],j=I[1],F=d.useRef(0),U=(0,g.Z)();(0,p.j)(p.U3.VNC_OPENED),d.useEffect((function(){if(o.getConnectionState()!==m.e.CONNECTED)return o.onConnectionStateChanged((function(e){e===m.e.CONNECTED&&j(o.getVncUrl())}));j(o.getVncUrl())}),[o]);var O=(0,a.Z)(d.useState(null),2),V=O[0],z=O[1],M=d.useRef((function(){return null}));d.useEffect((function(){M.current()}),[V]);var A=(0,h.Z)((function(e){return z(e.width&&e.height?{width:e.width,height:e.height}:null)}),{type:"throttle",wait:100}),$=d.useRef((function(e){}));d.useEffect((function(){$.current(X)}),[X]),d.useEffect((function(){if(!y){var e=!1;return n.e(581).then(n.bind(n,80581)).then((function(t){e||b(t)})),function(){e=!0}}}),[y]),d.useEffect((function(){S===r.Disconnected&&setTimeout((function(){U.current&&R(r.Connecting)}),Math.random()*(Math.pow(2,F.current)-1)*1e3)}),[S,U]),d.useEffect((function(){if(N&&B&&y&&S===r.Connecting){F.current++;var e=y.default,n=o.getConnectionMetadata(),a={credentials:{username:null===n||void 0===n?void 0:n.token,password:k||""}};(0,p.j)(p.U3.VNC_CONNECTED);var c=new e(B,N,a);c.scaleViewport=!0,c.resizeSession=!0;var u=function(){U.current&&(F.current=0,R(r.Connected))},s=function(e){var t=e.detail.capabilities.audio;W(void 0!==window.MediaSource&&!!t)},d=function(){M.current=function(){return null},$.current=function(e){},c.removeEventListener("securityfailure",h),c.removeEventListener("disconnect",d),c.removeEventListener("capabilities",s),c.removeEventListener("connect",u),U.current&&R(r.Disconnected)},h=function(){if(U.current){var e=function(){var e=window.prompt("The output is password protected, please input it:");e&&E(e)},n=function(){var n=(0,i.Z)(l().mark((function n(){var r,i,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.readFile(".env");case 2:if(r=n.sent,U.current){n.next=5;break}return n.abrupt("return");case 5:if(!r.error){n.next=8;break}return e(),n.abrupt("return");case 8:if(i=r.content.toString("utf8"),a=v.Z.parse(i),x in a){n.next=13;break}return e(),n.abrupt("return");case 13:E(a.VNC_PASSWORD);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n().catch((function(e){return f.Tb(e)}))}};return c.addEventListener("connect",u),c.addEventListener("capabilities",s),c.addEventListener("disconnect",d),c.addEventListener("securityfailure",h),M.current=function(){return c._windowResize()},W(!1),G(!1),$.current=function(t){t?((0,p.j)(p.U3.VNC_AUDIO_ENABLED),c.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):c.disableAudio()},function(){U.current||(M.current=function(){return null},$.current=function(e){},c.removeEventListener("securityfailure",h),c.removeEventListener("disconnect",d),c.removeEventListener("capabilities",s),c.removeEventListener("connect",u),c.disconnect())}}}),[y,B,o,N,t,k,S,U]);var H="vnc-output-".concat(S.toLowerCase());return(0,c.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[P?(0,c.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\ud83c\udfa7"," ",(0,c.tZ)("input",{type:"checkbox",checked:X,onChange:function(e){return G(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,c.tZ)("div",{ref:function(e){A(e),_(e)},"data-cy":H,className:"jsx-612fb0831fb3a82c vnc-target"}),S!==r.Connected&&(0,c.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,c.tZ)(Z.Z,{size:32})}),(0,c.tZ)(s(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}},37452:function(e,t,n){n.d(t,{T:function(){return x},W:function(){return y}});var r=n(47568),i=n(10253),a=n(34051),o=n.n(a),l=n(15519),c=n(84810),u=n(65456),s=n(31066),d=n(58809),f=n(7297),h=n(31230);function p(){var e=(0,f.Z)(['\n  query LoadDefaultFile($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n    currentUser {\n      id\n      flagReadmePreview: gate(feature: "flag-readme-preview")\n    }\n  }\n']);return p=function(){return e},e}var v=(0,h.ZP)(p());var m=n(48551),g=".replit",Z="replit.nix";function x(e,t){var n=t.startsWith("nix"),r=n?null:l.Z.getMainFileName(t);if(r&&l.Z.usesInterpreter(t)&&e.includes(r))return r;if(e.includes("Makefile"))return"Makefile";if(r&&e.includes(r))return r;if(!n&&e.includes(g))return".replit";var i=e.find(m.gK);return i||e.find((function(e){return(!n||![g,Z].includes(e))&&!(0,c.C)(e)}))}function y(e){return b.apply(this,arguments)}function b(){return b=(0,r.Z)(o().mark((function e(t){var n,a,l,c,f,h,p,g,Z,y,b,w,k,E,C,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k=function(){return E.apply(this,arguments)},E=function(){return E=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===Z||void 0===Z?void 0:Z.entrypoint){e.next=3;break}return e.abrupt("return",null);case 3:if((0,m.Il)(t)){e.next=6;break}return e.abrupt("return",w.includes(t)?t:null);case 6:return e.next=8,a.stat(t);case 8:return n=e.sent,e.abrupt("return",n.exists&&n.type===u.Tv.File?t:null);case 10:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)},n=t.dotReplit,a=t.fs,l=t.replId,d.l){e.next=6;break}throw new Error("Expected apollo client");case 6:return e.t0=i.Z,e.next=9,Promise.all([d.l.query({query:v,variables:{replId:l}}),a.readDir(s.Ql),n.getConfig()]);case 9:if(e.t1=e.sent,f=(0,e.t0)(e.t1,3),h=f[0].data,p=f[1],g=f[2],Z=g.config,p&&!p.error){e.next=17;break}throw new Error("Could not read files");case 17:return y=p.children,b=y.find((function(e){return e.type===u.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")})),w=y.filter((function(e){return e.type===u.Tv.File})).map((function(e){return e.filename})),e.next=24,k();case 24:if(!(C=e.sent)){e.next=27;break}return e.abrupt("return",{entrypoint:C,readmeFile:null===b||void 0===b?void 0:b.filename});case 27:if(S="Repl"===h.repl.__typename?h.repl.language:"","CurrentUser"===(null===(c=h.currentUser)||void 0===c?void 0:c.__typename)&&h.currentUser.flagReadmePreview||!(null===b||void 0===b?void 0:b.filename)){e.next=31;break}return e.abrupt("return",{entrypoint:b.filename,readmeFile:b.filename});case 31:return e.abrupt("return",{entrypoint:x(w,S),readmeFile:null===b||void 0===b?void 0:b.filename});case 32:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}}}]);
//# sourceMappingURL=8583-a97a831d6fb057cb.js.map