(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3727],{8930:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teamsDashboard",function(){return t(85781)}])},61469:function(e,n,t){"use strict";var r=t(35944),a=(t(67294),t(81255)),i=t(69346),o=t(1144);n.Z=function(e){var n=e.text;return(0,r.BX)(i.ZP,{css:[a.l0.flex.row,a.l0.align.center],children:[(0,r.tZ)(i.ZP,{css:[a.l0.mr(8),{borderBottom:"1px solid ".concat(a.TV.backgroundHighest),width:a.TV.space8}]}),(0,r.tZ)(o.x,{css:[a.l0.color.foregroundDimmest,a.l0.flex.shrink(1)],multiline:!0,children:n}),(0,r.tZ)(i.ZP,{css:[a.l0.ml(8),a.l0.flex.grow(2),{borderBottom:"1px solid ".concat(a.TV.backgroundHighest),width:a.TV.space16}]})]})}},96258:function(e,n,t){"use strict";t.d(n,{Ke:function(){return d},Y1:function(){return h}});var r=t(26042),a=t(7297),i=t(31230),o=t(46829);function l(){var e=(0,a.Z)(["\n  query TeamOrganization($id: Int!) {\n    teamOrganization(id: $id) {\n      ... on TeamOrganization {\n        id\n        name\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,a.Z)(["\n  mutation updateTeamOrganization($input: UpdateTeamOrganizationInput!) {\n    updateTeamOrganization(input: $input) {\n      ... on TeamOrganization {\n        id\n        name\n      }\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,i.ZP)(l());function d(e){var n=(0,r.Z)({},c,e);return o.useQuery(u,n)}var m=(0,i.ZP)(s());function h(e){var n=(0,r.Z)({},c,e);return o.useMutation(m,n)}},85781:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Jt}});var r=t(47568),a=t(14924),i=t(10253),o=t(34051),l=t.n(o),s=t(35944),c=t(67294),u=t(26042),d=t(7297),m=t(31230),h=t(93071),v=t(46829);function Z(){var e=(0,d.Z)(["\n  fragment TeamsDashboardTeam on Team {\n    id\n    username\n    memberCount\n  }\n"]);return Z=function(){return e},e}function g(){var e=(0,d.Z)(["\n  fragment TeamsDashboardTeamOrganizationSubscription on TeamOrganizationSubscription {\n    id\n    planId\n    quantity\n    isTrial\n    timeExpired\n    interval\n    isManuallyProvisioned\n    stripeCustomer {\n      id\n      subscriptions {\n        id\n      }\n    }\n  }\n"]);return g=function(){return e},e}function p(){var e=(0,d.Z)(["\n  fragment TeamsDashboardTeamOrganization on TeamOrganization {\n    id\n    name\n    isOwner\n    isAdmin\n    isVerified\n    showVerificationBadge\n    canBeDeleted\n    customer {\n      id\n    }\n    subscription {\n      id\n      ...TeamsDashboardTeamOrganizationSubscription\n    }\n    teams {\n      id\n      ...TeamCard\n    }\n    archivedTeamsCount\n    unsubscribedTeamsCount\n    capabilities {\n      isExpired: isExpiring(daysFromNow: 0)\n      isExpiringIn30Days: isExpiring(daysFromNow: 30)\n      isEducationPlan\n      isBusinessPlan\n      isPerSeatPlan\n      isFlatPlan\n      canAddEducationTeam\n      canCreateNewTeam\n      availableSeats\n      memberCount\n    }\n    userPermissions {\n      canViewOrgSettings\n      canDeleteOrg\n      canLeaveOrg\n      canRemoveOrgAdmins\n      canRemoveOrgOwners\n      canAddOrgAdmins\n      canAddOrgOwners\n      canEditBilling\n      canCreateTeamsInOrg\n    }\n    inviteLink {\n      id\n      code\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,d.Z)(['\n  query TeamsDashboard {\n    currentUser {\n      id\n      email\n      canCreateNewFreeTeam\n      showVerifyTeacherBanner\n      capabilities {\n        canCreateEduTrial\n      }\n      freeTeams {\n        id\n        ...TeamCard\n      }\n      educationTeamOrgs: teamOrganizations(subscriptionType: EDUCATION) {\n        id\n        ...TeamsDashboardTeamOrganization\n      }\n      proTeamOrgs: teamOrganizations(subscriptionType: PRO) {\n        id\n        ...TeamsDashboardTeamOrganization\n      }\n      isPrivacyLimitedAccess: hasPrivacyRole\n      hasTeamsKillswitch: gate(feature: "flag-killswitch-teams")\n    }\n  }\n  ',"\n  ","\n"]);return f=function(){return e},e}var b={},T=(Z(),(0,m.ZP)(g())),P=(0,m.ZP)(p(),T,h.eL),O=(0,m.ZP)(f(),h.eL,P);var y=t(70338),C=t(41664),w=t.n(C),x=t(77663),z=t(37424);function B(){var e=(0,d.Z)(["\n  fragment TeamsDeleteTeamModalTeam on Team {\n    id\n    username\n  }\n"]);return B=function(){return e},e}function E(){var e=(0,d.Z)(["\n  mutation TeamsDeleteTeamModalDeleteTeam($input: DeleteTeamInput!) {\n    deleteTeam(input: $input) {\n      ... on Team {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}var I={},_=(B(),(0,m.ZP)(E()));var k=t(65975),S=t(93058),X=t(57704),D=function(e){var n=e.team,t=e.isOpen,r=e.onRequestClose,a=e.onDelete,o=(0,S.Z)(),l=o.showConfirm,d=o.showError,m=(0,z.H)()("confirmName"),h=n.displayName||n.username,Z=(0,i.Z)(c.useState(""),2),g=Z[0],p=Z[1],f=g===h,b=(0,i.Z)(function(e){var n=(0,u.Z)({},I,e);return v.useMutation(_,n)}({variables:{input:{teamId:n.id}},onCompleted:function(e){"Team"===e.deleteTeam.__typename?(a(),l("Team deleted"),r()):"UserError"===e.deleteTeam.__typename&&(d(e.deleteTeam.message),r())},onError:function(e){var n=e.graphQLErrors[0].message||"Something went wrong when deleting this team";d(n),r()}}),2),T=b[0],P=b[1].loading;return(0,s.tZ)(k.u_,{isOpen:t,onRequestClose:r,children:(0,s.BX)(k.G7,{css:[k.l0.colWithGap(24)],tag:"form",children:[(0,s.BX)(k.h4,{variant:"headerDefault",level:1,css:k.l0.maxWidth("100%"),children:["Delete ",h,"?"]}),(0,s.BX)(k.G7,{css:[k.l0.colWithGap(8)],children:[(0,s.tZ)(k.xv,{multiline:!0,children:"Deleting will remove the Team from this Organization, and all Repls and Folders in this Team will be deleted. Are you sure you want to delete this Team?"}),(0,s.tZ)(k.xv,{multiline:!0,children:"Be careful, deleting a Team cannot be undone. If you want to save the contents of the Team, consider archiving the Team instead."})]}),(0,s.BX)(k.G7,{css:[k.l0.colWithGap(8)],children:[(0,s.BX)("label",{htmlFor:m,css:[k.l0.color.foregroundDimmer,{fontSize:k.TV.fontSizeSmall,lineHeight:k.TV.lineHeightSmall}],children:["Type the Team name (",h,") to delete"]}),(0,s.tZ)(k.II,{autoFocus:!0,disabled:P,id:m,value:g,placeholder:h,onChange:function(e){return p(e.currentTarget.value)}})]}),(0,s.BX)(k.G7,{css:[k.l0.rowWithGap(12),k.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",disabled:P,onClick:r}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(X.Z,{}),disabled:!f||P,onClick:function(){return T()},text:"".concat(P?"Deleting Team...":"Yes, delete this Team"),colorway:"negative"})]})]})})};function U(){var e=(0,d.Z)(["\n  fragment LeaveTeamOutput on TeamOutput {\n    ... on Team {\n      id\n    }\n    ... on UserError {\n      message\n    }\n  }\n"]);return U=function(){return e},e}function N(){var e=(0,d.Z)(["\n  mutation TeamCardLeaveTeam($teamId: Int!) {\n    leaveTeam(teamId: $teamId) {\n      ...LeaveTeamOutput\n    }\n  }\n  ","\n"]);return N=function(){return e},e}var M={},R=(0,m.ZP)(U()),G=(0,m.ZP)(N(),R);var W=t(1879),L=t(69346),V=t(1144),F=t(81255),q=t(4275),A=function(e){var n=e.team,t=e.isOpen,r=e.onRequestClose,a=e.onLeave,o=(0,S.Z)(),l=o.showConfirm,c=o.showError,d=(0,i.Z)(function(e){var n=(0,u.Z)({},M,e);return v.useMutation(G,n)}({variables:{teamId:n.id},onError:function(e){var n=e.graphQLErrors[0];n.message?c(n.message):c("Something went wrong when leaving this team")},onCompleted:function(e){e&&"Team"===e.leaveTeam.__typename?(a(),l("Successfully left team"),r()):e&&"UserError"===e.leaveTeam.__typename&&c(e.leaveTeam.message)}}),2),m=d[0],h=d[1].loading;return(0,s.tZ)(W.Z,{isOpen:t,onRequestClose:r,children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.BX)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:["Leave ",n.displayName||n.username,"?"]}),(0,s.tZ)(V.x,{multiline:!0,children:"Are you sure you want to leave this Team? You will lose access to all of the Team\u2019s Repls and Folders."}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",disabled:h,onClick:r}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(q.Z,{}),disabled:h,onClick:function(){return m()},text:"Yes, leave Team",colorway:"negative"})]})]})})};function j(){var e=(0,d.Z)(["\n  mutation ArchiveTeamModalArchiveTeam($input: ArchiveTeamInput!) {\n    archiveTeam(input: $input) {\n      ... on Team {\n        id\n        archived\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return j=function(){return e},e}function $(){var e=(0,d.Z)(["\n  mutation UnarchiveTeamModalArchiveTeam($input: UnarchiveTeamInput!) {\n    unarchiveTeam(input: $input) {\n      ... on Team {\n        id\n        archived\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return $=function(){return e},e}var Y={},H=(0,m.ZP)(j());var Q=(0,m.ZP)($());var J,K=t(1138),ee=function(e){var n=e.team,t=e.isOpen,r=e.onRequestClose,a=e.onArchive,o=(0,S.Z)(),l=o.showConfirm,c=o.showError,d=(0,i.Z)(function(e){var n=(0,u.Z)({},Y,e);return v.useMutation(H,n)}({variables:{input:{teamId:n.id}},onCompleted:function(e){"Team"===e.archiveTeam.__typename&&(l("Team archived"),a(),r()),"UserError"!==e.archiveTeam.__typename&&"UnauthorizedError"!==e.archiveTeam.__typename&&"NotFoundError"!==e.archiveTeam.__typename||c(e.archiveTeam.message)}}),2),m=d[0],h=d[1].loading,Z=(0,i.Z)(function(e){var n=(0,u.Z)({},Y,e);return v.useMutation(Q,n)}({variables:{input:{teamId:n.id}},onCompleted:function(e){"Team"===e.unarchiveTeam.__typename&&(l("Team unarchived"),a(),r()),"UserError"!==e.unarchiveTeam.__typename&&"UnauthorizedError"!==e.unarchiveTeam.__typename&&"NotFoundError"!==e.unarchiveTeam.__typename||c(e.unarchiveTeam.message)}}),2),g=Z[0],p=Z[1].loading,f=h||p;return(0,s.tZ)(W.Z,{isOpen:t,onRequestClose:r,children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(32)],children:[(0,s.BX)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:[n.archived?"Unarchive":"Archive"," ",n.displayName||n.username,"?"]}),n.archived?(0,s.tZ)(V.x,{multiline:!0,children:"Unarchiving will show the Team in the Organization, and members will be able to create new Repls in the Team. You can archive again at any time."}):(0,s.BX)(L.ZP,{css:F.l0.colWithGap(8),children:[(0,s.tZ)(V.x,{multiline:!0,children:"Archiving will hide the Team from the Organization. Members will be able to access Repls created in this Team, but new Repls can not be created. You can unarchive the Team at any time."}),(0,s.tZ)(V.x,{multiline:!0,children:"Archiving is a good option if you are done with a Team, but want to retain access to the content in it."})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",disabled:f,onClick:r}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(K.Z,{}),disabled:f,onClick:function(){n.archived?g():m()},text:"".concat(n.archived?"Unarchive":"Yes, archive this"," Team"),colorway:n.archived?"primary":"negative"})]})]})})},ne=t(57263),te=t(59369),re=t(61756),ae=t(29163),ie=t(83117),oe=t(70917);!function(e){e.Leave="Leave Team",e.Delete="Delete Team",e.Archive="Archive Team",e.Unarchive="Unarchive Team"}(J||(J={}));var le="@media screen and (min-width: ".concat(ne.j.tabletMin,"px)"),se=function(e){var n=e.team;return(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center,F.l0.flex.shrink(2),F.l0.color.foregroundDefault,(0,a.Z)({},le,{flexGrow:1})],children:[(0,s.tZ)(ce,{imageUrl:n.image}),(0,s.tZ)(L.ZP,{css:[F.l0.flex.shrink(2)],children:(0,s.tZ)(V.x,{multiline:!1,maxLines:1,variant:"subheadDefault",children:n.displayName||n.username})})]})},ce=function(e){var n=e.imageUrl;return(0,s.tZ)(L.ZP,{tag:"span",css:[F.l0.mr(16),F.l0.borderRadius(16),{width:32,height:32,backgroundImage:"url(".concat(n,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}]})},ue=function(e){var n,t,r,o=e.team,l=e.onRemove,u=e.showBottomBorder,d=e.canJoinTeam,m=void 0!==d&&d,v=(0,S.Z)().showError,Z=(0,i.Z)(c.useState(!1),2),g=Z[0],p=Z[1],f=(0,i.Z)((0,h._O)({onCompleted:function(e){var n=e.joinTeamAsOrgAdmin;"Team"===n.__typename?l():"UserError"!==n.__typename&&"NotFoundError"!==n.__typename&&"UnauthorizedError"!==n.__typename||(v(n.message),p(!1))},onError:function(){p(!1)}}),1),b=f[0],T=(0,oe.F4)("\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  "),P=(0,i.Z)(c.useState(null),2),O=P[0],y=P[1],C=function(){return y(null)},z=Boolean(null===(n=o.userPermissions)||void 0===n?void 0:n.canLeaveTeam),B=Boolean(null===(t=o.userPermissions)||void 0===t?void 0:t.canDeleteTeam),E=[];return Boolean(null===(r=o.userPermissions)||void 0===r?void 0:r.canArchiveTeam)&&E.push({label:o.archived?J.Unarchive:J.Archive,icon:(0,s.tZ)(K.Z,{}),isDestructive:!o.archived}),z&&E.push({label:J.Leave,icon:(0,s.tZ)(q.Z,{}),isDestructive:!0}),B&&E.push({label:J.Delete,icon:(0,s.tZ)(X.Z,{}),isDestructive:!0}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.mx(16),F.l0.py(16),{borderBottom:u?"1px solid ".concat(F.TV.backgroundHighest):"none"}],children:[(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.flex.shrink(2),(0,a.Z)({},le,{flexGrow:1})],children:[m?(0,s.tZ)(se,{team:o}):(0,s.tZ)(w(),{href:{pathname:"/teamProfile",query:{teamname:o.username}},as:"/team/".concat(o.username),passHref:!0,children:(0,s.tZ)("a",{children:(0,s.tZ)(se,{team:o})})}),(0,s.tZ)(L.ZP,{css:[(0,a.Z)({display:"none"},le,{display:"flex"})],children:(0,s.tZ)(x.C,{size:32,members:o.members.map((function(e){return e.user})),memberCount:o.memberCount})})]}),m&&g&&(0,s.tZ)(ae.Z,{disabled:!0,css:[{alignSelf:"center",margin:"0 33px",animation:"".concat(T," 1s infinite linear")}],alt:"Joining team",children:(0,s.tZ)(ie.Z,{})}),m&&!g&&(0,s.tZ)(re.ZP,{css:[F.l0.ml(8)],text:"Join Team",onClick:function(){p(!0),b({variables:{teamId:o.id}})}}),0!==E.length&&!m&&(0,s.BX)(s.HY,{children:[(0,s.tZ)(L.ZP,{css:[F.l0.ml(8)],children:(0,s.tZ)("div",{onClick:function(e){e.preventDefault()},children:(0,s.tZ)(te.Z,{label:"Team Actions",items:E,onItemClick:function(e){return y(e.label)}})})}),(0,s.tZ)(D,{isOpen:O===J.Delete,team:o,onDelete:l,onRequestClose:C}),(0,s.tZ)(A,{isOpen:O===J.Leave,team:o,onLeave:l,onRequestClose:C}),(0,s.tZ)(ee,{isOpen:O===J.Archive||O===J.Unarchive,team:o,onArchive:l,onRequestClose:C})]})]})};function de(){var e=(0,d.Z)(["\n  query TeamsListSectionArchivedTeams($orgId: Int!) {\n    teamOrganization(id: $orgId) {\n      ... on TeamOrganization {\n        id\n        archivedTeams {\n          id\n          ...TeamCard\n        }\n      }\n    }\n  }\n  ","\n"]);return de=function(){return e},e}function me(){var e=(0,d.Z)(["\n  query TeamsListSectionUnsubscribedTeams($orgId: Int!) {\n    teamOrganization(id: $orgId) {\n      ... on TeamOrganization {\n        id\n        unsubscribedTeams {\n          id\n          ...TeamCard\n        }\n      }\n    }\n  }\n  ","\n"]);return me=function(){return e},e}var he={},ve=(0,m.ZP)(de(),h.eL);var Ze=(0,m.ZP)(me(),h.eL);var ge=t(11163),pe=t(77365),fe=t(98202),be=t(95596),Te=t(67376),Pe=t(96258),Oe=t(64080),ye=t(40963),Ce=t(30992),we=t(88075),xe=function(e){var n=e.organization,t=(0,S.Z)(),r=t.showConfirm,a=t.showError,o=(0,i.Z)(c.useState(!1),2),l=o[0],u=o[1],d=(0,i.Z)((0,Pe.Y1)({onCompleted:function(e){"TeamOrganization"===e.updateTeamOrganization.__typename&&(r("Success"),u(!1))},onError:function(e){var n=e.message;a(n),u(!1)}}),2),m=d[0],h=d[1].loading,v=(0,Ce.Y)(n.name,(function(e){if(e.length<1)return{message:"Name is required"}}));return(0,s.tZ)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center,F.l0.pb(32)],children:l?(0,s.tZ)("form",{onSubmit:function(e){e.preventDefault(),m({variables:{input:{id:n.id,name:v.value}}})},children:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[(0,s.tZ)(ye.ZP,{placeholder:"Organization name",value:v.value,onChange:function(e){return v.setValue(e.target.value)},autoFocus:!0}),(0,s.tZ)(re.ZP,{text:"Cancel",onClick:function(){return u(!1)},css:[F.l0.ml(16)],disabled:h}),(0,s.tZ)(re.ZP,{iconLeft:(0,s.tZ)(we.Z,{}),text:h?"Saving...":"Save",type:"submit",css:[F.l0.ml(16)],disabled:h,colorway:"primary"})]})}):(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[(0,s.tZ)(V.h,{level:2,variant:"headerBig",css:[F.l0.pr(8)],children:n.name}),(0,s.tZ)(ae.Z,{alt:"Update organization name",size:24,onClick:function(){return u(!0)},children:(0,s.tZ)(Oe.Z,{})})]})})},ze=t(90317);function Be(){var e=(0,d.Z)(["\n  fragment MemberUser on User {\n    id\n    displayName\n    image\n  }\n"]);return Be=function(){return e},e}function Ee(){var e=(0,d.Z)(["\n  fragment MemberMgmtMember on TeamOrganizationMembership {\n    id\n    role\n    user {\n      id\n      ...MemberUser\n    }\n  }\n  ","\n"]);return Ee=function(){return e},e}function Ie(){var e=(0,d.Z)(["\n  fragment TeamOrganizationPendingInvite on TeamOrganizationInvite {\n    id\n    usernameOrEmail\n    user {\n      id\n      ...MemberUser\n    }\n  }\n  ","\n"]);return Ie=function(){return e},e}function _e(){var e=(0,d.Z)(["\n  fragment MemberMgmtOrg on TeamOrganization {\n    id\n    name\n    members {\n      id\n      ...MemberMgmtMember\n    }\n    pendingInvites {\n      id\n      ...TeamOrganizationPendingInvite\n    }\n    inviteLink {\n      id\n      code\n    }\n  }\n  ","\n  ","\n"]);return _e=function(){return e},e}function ke(){var e=(0,d.Z)(["\n  query TeamOrgMemberMgmt($teamOrgId: Int!) {\n    teamOrganization(id: $teamOrgId) {\n      ...MemberMgmtOrg\n    }\n  }\n  ","\n"]);return ke=function(){return e},e}function Se(){var e=(0,d.Z)(["\n  mutation UpdateTeamOrgMemberRole($input: UpdateTeamOrganizationMemberInput!) {\n    updateTeamOrganizationMember(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Se=function(){return e},e}function Xe(){var e=(0,d.Z)(["\n  mutation DeleteTeamOrgMember($input: DeleteTeamOrganizationMemberInput!) {\n    deleteTeamOrganizationMember(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Xe=function(){return e},e}function De(){var e=(0,d.Z)(["\n  mutation CreateTeamOrgInviteLink($orgId: Int!) {\n    createTeamOrgInviteLink(orgId: $orgId) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return De=function(){return e},e}function Ue(){var e=(0,d.Z)(["\n  mutation DeleteTeamOrgInviteLink($orgId: Int!) {\n    deleteTeamOrgInviteLink(orgId: $orgId) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Ue=function(){return e},e}var Ne={},Me=(0,m.ZP)(Be()),Re=(0,m.ZP)(Ee(),Me),Ge=(0,m.ZP)(Ie(),Me),We=(0,m.ZP)(_e(),Re,Ge),Le=(0,m.ZP)(ke(),We);var Ve=(0,m.ZP)(Se(),We);var Fe=(0,m.ZP)(Xe(),We);var qe=(0,m.ZP)(De(),We);var Ae=(0,m.ZP)(Ue(),We);var je=t(37552),$e=t(93160),Ye=t(26473),He=t(67629),Qe=t(41034),Je=t(6148),Ke=t(49619),en=t(70570),nn=t(70008),tn=t(24351),rn=t(17556),an=t(8766),on=t(79500),ln=t(61193);function sn(e){var n,t=e.organization,r=e.createInvite,a=(0,S.Z)().showError,o=(0,ln.c)("flag-org-member-mgmt-invite-link"),l=o.enabled,d=o.loading,m=(0,ln.c)("flag-org-member-mgmt-invite-csv"),h=m.enabled,Z=m.loading,g=(0,i.Z)(c.useState(!1),2),p=g[0],f=g[1],b=(0,Ce.Y)("",an.Z.isValidEmail),T=(0,tn.Z)(b.value,250);(0,nn.gJ)({variables:{query:T,limit:5},onCompleted:function(e){var n=e.usernameSearch;n&&C(n)}});var P,O=(0,i.Z)(c.useState([]),2),y=O[0],C=O[1],w=(0,i.Z)(c.useState(null!==(P=null===(n=t.inviteLink)||void 0===n?void 0:n.code)&&void 0!==P?P:""),2),x=w[0],B=w[1],E=(0,i.Z)(function(e){var n=(0,u.Z)({},Ne,e);return v.useMutation(qe,n)}({onCompleted:function(e){var n=e.createTeamOrgInviteLink;"TeamOrganization"===(null===n||void 0===n?void 0:n.__typename)&&n.inviteLink?B(n.inviteLink.code):"UserError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)&&"NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)||a(n.message)},onError:function(e){var n=e.message;a(n)}}),2),I=E[0],_=E[1].loading,k=(0,i.Z)(function(e){var n=(0,u.Z)({},Ne,e);return v.useMutation(Ae,n)}({onCompleted:function(e){var n=e.deleteTeamOrgInviteLink;"TeamOrganization"===(null===n||void 0===n?void 0:n.__typename)?B(""):"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)&&"NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)||a(n.message)},onError:function(e){var n=e.message;a(n)}}),1),D=k[0],U=c.useCallback((function(e){var n="";n=e||b.value,r({variables:{input:{usernameOrEmail:n,orgId:t.id}}}),b.setValue(""),C([])}),[r,t,b]),N=(0,i.Z)(c.useState(!1),2),M=N[0],R=N[1],G=(0,rn.Z)((function(){return R(!1)}),[]),W=c.useCallback((function(){I({variables:{orgId:t.id}})}),[t,I]),q=c.useCallback((function(){D({variables:{orgId:t.id}})}),[t,D]);c.useEffect((function(){y.length>0?R(!0):R(!1)}),[y]);var A=(0,oe.F4)("\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  "),j=(0,z.H)();return(0,s.tZ)(L.ZP,{children:p?(0,s.tZ)($e.Z,{background:"higher",css:[F.l0.p(16),F.l0.borderRadius(8)],children:(0,s.BX)(L.ZP,{children:[(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.mb(16)],children:[(0,s.BX)(V.x,{variant:"subheadDefault",children:["Add admin to ",t.name]}),(0,s.tZ)(ae.Z,{alt:"Close add admin or org dialog",onClick:function(){return f(!1)},children:(0,s.tZ)(He.Z,{})})]}),(0,s.BX)(L.ZP,{css:[F.l0.mb(32)],children:[(0,s.tZ)("label",{htmlFor:j("usernameOrEmail"),children:(0,s.tZ)(V.x,{variant:"small",color:"dimmer",children:"Invite with username or email"})}),(0,s.tZ)("form",{onSubmit:function(){},children:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.mt(4)],innerRef:G,children:[(0,s.BX)(L.ZP,{css:[{flexGrow:2}],children:[(0,s.tZ)(ye.ZP,{placeholder:"Type a username or email address",value:b.value,onChange:function(e){return b.setValue(e.target.value)},id:j("usernameOrEmail")}),M&&(0,s.tZ)(L.ZP,{css:[F.l0.backgroundColor.backgroundHighest,F.l0.borderRadius(8),{position:"relative",border:"1px solid ".concat(F.TV.outlineDefault)}],children:(0,s.tZ)(je.ZP,{label:"Returned users from search",onAction:U,children:y.map((function(e){return(0,s.tZ)(je.ck,{"aria-label":e.username,children:(0,s.tZ)(en.Z,{src:e.image,username:e.username,small:!0})},e.username)}))})})]}),(0,s.tZ)(re.ZP,{type:"submit",text:"Invite",iconLeft:(0,s.tZ)(Ye.Z,{}),css:[F.l0.ml(16)],onClick:function(){return U()},disabled:Boolean(b.error)})]})})]}),!d&&l&&(0,s.BX)(L.ZP,{css:[F.l0.mb(32)],children:[(0,s.tZ)("label",{htmlFor:j("link"),children:(0,s.tZ)(V.x,{variant:"small",color:"dimmer",children:"Invite with link"})}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(16),F.l0.mt(4),F.l0.align.center],children:[(0,s.tZ)(ye.ZP,{placeholder:"Click refresh to generate a new invite link",value:x?"".concat(window.location.origin,"/organization/join/").concat(x):"",disabled:!0,id:j("link")}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(8)],children:[(0,s.tZ)(ae.Z,{alt:"Copy invite link to your clipboard",onClick:function(){x&&(0,on.Z)("".concat(window.location.origin,"/organization/join/").concat(x))},children:(0,s.tZ)(Qe.Z,{})}),(0,s.tZ)(ae.Z,{alt:"Create new invite link",onClick:W,css:[{animation:_?"".concat(A," 1s infinite linear"):"none"}],children:(0,s.tZ)(ie.Z,{})}),(0,s.tZ)(ae.Z,{alt:"Remove invite link",onClick:q,children:(0,s.tZ)(X.Z,{})})]})]})]}),!Z&&h&&(0,s.BX)(L.ZP,{children:[(0,s.tZ)(V.x,{children:"Invite from CSV"}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.mt(8),F.l0.align.center],children:[(0,s.tZ)(re.ZP,{iconLeft:(0,s.tZ)(Je.Z,{}),text:"Download Template",css:[F.l0.mr(16)]}),(0,s.tZ)(re.ZP,{iconLeft:(0,s.tZ)(Ke.Z,{}),text:"Upload CSV"})]})]})]})}):(0,s.tZ)(L.ZP,{css:[F.l0.flex.row],children:(0,s.tZ)(re.ZP,{iconLeft:(0,s.tZ)(Ye.Z,{}),text:"Add Org Admin or Owner",onClick:function(){return f(!0)},colorway:"primary",stretch:!1})})})}var cn=t(61469);function un(){var e=(0,d.Z)(["\n  mutation CreateTeamOrgInvite($input: CreateTeamOrgInviteInput!) {\n    createTeamOrganizationInvite(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return un=function(){return e},e}function dn(){var e=(0,d.Z)(["\n  mutation DeleteTeamOrgInvite($input: DeleteTeamOrgInviteInput!) {\n    deleteTeamOrganizationInvite(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return dn=function(){return e},e}var mn={},hn=(0,m.ZP)(un(),We);var vn=(0,m.ZP)(dn(),We);var Zn,gn=function(e){var n=e.image;return(0,s.tZ)(L.ZP,{tag:"span",css:[F.l0.mr(16),F.l0.borderRadius(16),{width:32,height:32,backgroundSize:"cover",backgroundImage:"url(".concat(n,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center"}]})},pn=function(e){var n=e.organization,t=e.currentUserId,r=(0,S.Z)().showError,a=(0,i.Z)(c.useState([]),2),o=a[0],l=a[1],d=(0,i.Z)(c.useState([]),2),m=d[0],h=d[1],Z=function(e){l(e.members),h(e.pendingInvites)},g=function(e){r(e.message)},p=function(e){var n=(0,u.Z)({},Ne,e);return v.useQuery(Le,n)}({variables:{teamOrgId:n.id},onCompleted:function(e){var n;"TeamOrganization"===(null===(n=e.teamOrganization)||void 0===n?void 0:n.__typename)&&Z(e.teamOrganization)},onError:function(e){g(e)}}).loading,f=(0,i.Z)(function(e){var n=(0,u.Z)({},Ne,e);return v.useMutation(Ve,n)}({onCompleted:function(e){var n,t,r;"TeamOrganization"===(null===(n=e.updateTeamOrganizationMember)||void 0===n?void 0:n.__typename)?Z(e.updateTeamOrganizationMember):"UnauthorizedError"!==(null===(t=e.updateTeamOrganizationMember)||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===(r=e.updateTeamOrganizationMember)||void 0===r?void 0:r.__typename)||g(e.updateTeamOrganizationMember)},onError:function(e){g(e)}}),1),b=f[0],T=(0,i.Z)(function(e){var n=(0,u.Z)({},Ne,e);return v.useMutation(Fe,n)}({onCompleted:function(e){var n,t,r;"TeamOrganization"===(null===(n=e.deleteTeamOrganizationMember)||void 0===n?void 0:n.__typename)?Z(e.deleteTeamOrganizationMember):"UnauthorizedError"!==(null===(t=e.deleteTeamOrganizationMember)||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===(r=e.deleteTeamOrganizationMember)||void 0===r?void 0:r.__typename)||g(e.deleteTeamOrganizationMember)},onError:function(e){g(e)}}),1),P=T[0],O=(0,i.Z)(function(e){var n=(0,u.Z)({},mn,e);return v.useMutation(hn,n)}({onCompleted:function(e){var n,t,r,a;"TeamOrganization"===(null===(n=e.createTeamOrganizationInvite)||void 0===n?void 0:n.__typename)?Z(e.createTeamOrganizationInvite):"UserError"!==(null===(t=e.createTeamOrganizationInvite)||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===(r=e.createTeamOrganizationInvite)||void 0===r?void 0:r.__typename)&&"NotFoundError"!==(null===(a=e.createTeamOrganizationInvite)||void 0===a?void 0:a.__typename)||g(e.createTeamOrganizationInvite)},onError:function(e){g(e)}}),1),y=O[0],C=(0,i.Z)(function(e){var n=(0,u.Z)({},mn,e);return v.useMutation(vn,n)}({onCompleted:function(e){var n,t,r,a;"TeamOrganization"===(null===(n=e.deleteTeamOrganizationInvite)||void 0===n?void 0:n.__typename)?Z(e.deleteTeamOrganizationInvite):"UserError"!==(null===(t=e.deleteTeamOrganizationInvite)||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===(r=e.deleteTeamOrganizationInvite)||void 0===r?void 0:r.__typename)&&"NotFoundError"!==(null===(a=e.deleteTeamOrganizationInvite)||void 0===a?void 0:a.__typename)||g(e.deleteTeamOrganizationInvite)},onError:function(e){g(e)}}),1),w=C[0];return p?(0,s.tZ)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.center],children:(0,s.tZ)(pe.Z,{})}):(0,s.BX)(L.ZP,{children:[(0,s.tZ)(sn,{organization:n,createInvite:y}),(0,s.BX)(L.ZP,{children:[o.map((function(e,r){var a,i,o,l,c,u;return"User"!==(null===(a=e.user)||void 0===a?void 0:a.__typename)?null:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.pt(16),F.l0.mt(16),{borderTop:0===r?"none":"1px solid ".concat(F.TV.backgroundHighest)}],children:[(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[(0,s.tZ)(gn,{image:e.user.image}),(0,s.BX)(L.ZP,{children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"".concat(null===(i=e.user)||void 0===i?void 0:i.displayName).concat(t===e.user.id?" (you)":"")}),!1]})]}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[("admin"===e.role&&(null===(o=n.userPermissions)||void 0===o?void 0:o.canRemoveOrgAdmins)||"owner"===e.role&&(null===(l=n.userPermissions)||void 0===l?void 0:l.canRemoveOrgOwners))&&t!==e.user.id&&(0,s.tZ)(ae.Z,{alt:"Remove user ".concat(e.user.displayName," with role ").concat(e.role),size:28,onClick:function(){var t;(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)&&P({variables:{input:{orgId:n.id,memberId:e.user.id,retainTeamAccess:!0}}})},children:(0,s.tZ)(X.Z,{})}),(!(null===(c=n.userPermissions)||void 0===c?void 0:c.canRemoveOrgOwners)||t===e.user.id)&&(0,s.tZ)(re.ZP,{disabled:!0,text:"owner"===e.role?"Org Owner":"Org Admin",css:[F.l0.ml(8),F.l0.color.foregroundDefault]}),(null===(u=n.userPermissions)||void 0===u?void 0:u.canRemoveOrgOwners)&&t!==e.user.id&&(0,s.tZ)(L.ZP,{css:[F.l0.ml(8)],children:(0,s.BX)(je.ZE,{label:"owner"===e.role?"Org Owner":"Org Admin",onAction:function(t){var r,a;(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.id)&&b({variables:{input:{orgId:n.id,memberId:null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.id,role:t}}})},children:[(0,s.tZ)(je.ck,{children:"Org Owner"},ze.fg.Owner),(0,s.tZ)(je.ck,{children:"Org Admin"},ze.fg.Admin)]})})]})]},e.id)})),m.length>0&&(0,s.BX)(L.ZP,{css:[F.l0.mt(16)],children:[(0,s.tZ)(cn.Z,{text:"Pending Invitations"}),m.map((function(e,t){var r;return(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.mt(16),F.l0.pt(0===t?0:16),{borderTop:0===t?"none":"1px solid ".concat(F.TV.backgroundHighest)}],children:[(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[e.user&&(0,s.tZ)(gn,{image:e.user.image}),(0,s.BX)(L.ZP,{children:[(0,s.tZ)(V.x,{variant:"subheadDefault",css:[F.l0.mb(e.user?4:0)],children:(null===(r=e.user)||void 0===r?void 0:r.displayName)||e.usernameOrEmail}),e.user&&!1]})]}),(0,s.tZ)(ae.Z,{alt:"Remove invite for user",size:28,onClick:function(){w({variables:{input:{orgId:n.id,inviteId:e.id}}})},children:(0,s.tZ)(X.Z,{})})]})}))]})]})]})},fn=function(e){var n=e.orgId;return(0,s.BX)(L.ZP,{children:[(0,s.tZ)(V.x,{variant:"subheadBig",css:[F.l0.pt(8),F.l0.pb(16)],children:"Manage Plan"}),(0,s.tZ)(V.x,{children:(0,s.tZ)("a",{href:"/stripe-customer-portal?orgId=".concat(n),children:"Change payment method, view invoices, and cancel subscription"})})]})},bn=function(e){var n=e.text,t=e.selected,r=e.onClick,a=e.Icon,i=(0,oe.iv)({paddingTop:F.TV.space16,paddingBottom:F.TV.space24,backgroundColor:t?"default":F.TV.backgroundHigher});return(0,s.tZ)(L.ZP,{css:[F.l0.mx(4)],children:(0,s.tZ)(re.ZP,{css:i,text:n,stretch:!1,iconLeft:(0,s.tZ)(a,{}),onClick:r})})},Tn=function(e){var n=e.children,t=(0,oe.iv)({overflow:"hidden",borderBottom:"1px solid",borderColor:F.TV.backgroundHighest,height:32});return(0,s.tZ)(L.ZP,{css:t,children:(0,s.tZ)(L.ZP,{css:[F.l0.flex.row,F.l0.ml(16)],children:n})})};!function(e){e.MEMBERS="MEMBERS",e.BILLING="BILLING"}(Zn||(Zn={}));var Pn=function(e){var n,t,r,a,o,l,u,d=e.isOpen,m=e.setClose,h=e.organization,v=e.currentUserId,Z=(0,i.Z)(c.useState(Zn.MEMBERS),2),g=Z[0],p=Z[1],f=(null===(n=h.capabilities)||void 0===n?void 0:n.isBusinessPlan)?"".concat(h.capabilities.availableSeats,"/").concat(null===(t=h.subscription)||void 0===t?void 0:t.quantity," Members"):"Members",b=(null===h||void 0===h||null===(r=h.userPermissions)||void 0===r?void 0:r.canEditBilling)&&!(null===(a=h.capabilities)||void 0===a?void 0:a.isEducationPlan),T=Boolean(null===(u=null===(o=h.subscription)||void 0===o||null===(l=o.stripeCustomer)||void 0===l?void 0:l.subscriptions[0])||void 0===u?void 0:u.id);return(0,s.BX)(W.Z,{isOpen:d,onRequestClose:m,noPadding:!0,maxWidth:872,children:[(0,s.tZ)(L.ZP,{css:[F.l0.p(16),F.l0.pb(0)],children:(0,s.tZ)(xe,{organization:h})}),(0,s.BX)(Tn,{children:[(0,s.tZ)(bn,{text:f,Icon:be.Z,selected:g===Zn.MEMBERS,onClick:function(){return p(Zn.MEMBERS)}}),b&&T?(0,s.tZ)(bn,{text:"Billing/Plan",Icon:Te.Z,selected:g===Zn.BILLING,onClick:function(){return p(Zn.BILLING)}}):null]}),(0,s.BX)(L.ZP,{css:[F.l0.p(16)],children:[g===Zn.MEMBERS&&(0,s.tZ)(pn,{organization:h,currentUserId:v}),g===Zn.BILLING&&(0,s.tZ)(fn,{orgId:h.id})]})]})},On=t(42844);function yn(e){var n=e.organization,t=e.onMenuItemSelected,r=[];return n&&n.userPermissions&&(n.userPermissions.canViewOrgSettings&&r.push({value:"OrgSettings",label:"Org Settings",icon:(0,s.tZ)(On.Z,{})}),n.userPermissions.canDeleteOrg&&r.push({value:"DeleteOrg",label:"Delete Org",icon:(0,s.tZ)(X.Z,{}),isDestructive:!0}),n.userPermissions.canLeaveOrg&&r.push({value:"LeaveOrg",label:"Leave Org",icon:(0,s.tZ)(q.Z,{}),isDestructive:!0})),0===r.length?null:(0,s.tZ)(te.Z,{label:"Org Actions",items:r,onItemClick:function(e){return t(e.value)}})}var Cn=t(27206);function wn(){var e=(0,d.Z)(["\n  mutation DeleteTeamOrg($input: DeleteTeamOrganizationInput!) {\n    deleteTeamOrganization(input: $input) {\n      ... on TeamOrganization {\n        id\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return wn=function(){return e},e}var xn={},zn=(0,m.ZP)(wn());var Bn=function(e){var n=e.orgName,t=e.orgId,a=e.isOpen,o=e.canBeDeleted,c=e.onRequestClose,d=e.onOrgDeleted,m=(0,z.H)()("confirmName"),h=(0,S.Z)(),Z=h.showError,g=h.showConfirm,p=(0,i.Z)(function(e){var n=(0,u.Z)({},xn,e);return v.useMutation(zn,n)}({onError:function(e){Z(e.message)},onCompleted:function(e){"TeamOrganization"===e.deleteTeamOrganization.__typename?(g("Organization successfully deleted."),d(),y()):"NotFoundError"!==e.deleteTeamOrganization.__typename&&"UnauthorizedError"!==e.deleteTeamOrganization.__typename||Z(e.deleteTeamOrganization.message)}}),2),f=p[0],b=p[1].loading,T=(0,Ce.Y)("",(function(e){if(e!==n)return{message:"Please type the organization name exactly"}})),P=Boolean(T.error),O=(0,oe.iv)({borderRadius:"".concat(F.TV.space8," !important")}),y=function(){T.setValue(""),c()},C=function(){var e=(0,r.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!T.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f({variables:{input:{orgId:t}}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.tZ)(W.Z,{isOpen:a,onRequestClose:y,children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],tag:"form",onSubmit:C,children:[(0,s.BX)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:["Delete ",n]}),o?(0,s.BX)(s.HY,{children:[(0,s.BX)(L.ZP,{css:F.l0.colWithGap(8),children:[(0,s.BX)(V.x,{multiline:!0,children:["Deleting ",n," will remove access to the Organization for anyone in the Organization, and any Teams in the Organization."]}),(0,s.tZ)(V.x,{multiline:!0,children:"It will also cancel the Organization\u2019s paid plan, if it has one, effective at the next billing cycle."}),(0,s.tZ)(V.x,{multiline:!0,children:"This cannot be undone!"})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(8)],children:[(0,s.tZ)("label",{css:[F.l0.color.foregroundDimmer,{fontSize:F.TV.fontSizeSmall,lineHeight:F.TV.lineHeightSmall}],htmlFor:m,children:"Type the organization name to confirm"}),(0,s.tZ)(Cn.ZP,{autoFocus:!0,required:!0,css:O,id:m,value:T.value,placeholder:"Type the organization name to confirm",onBlur:T.handleBlur,disabled:b,validationResults:T.error?[{message:T.error.message,state:"error"}]:void 0,onChange:function(e){return T.setValue(e.currentTarget.value)}})]})]}):(0,s.tZ)(L.ZP,{css:F.l0.colWithGap(8),children:(0,s.tZ)(V.x,{multiline:!0,children:"This Organization has active Teams in it. Deleting Organizations with Teams is not currently supported. If you want to delete this Organization, please delete the Teams in the Organization first."})}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",type:"button",onClick:y}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(X.Z,{}),disabled:b||P||!o,text:"Yes, Cancel Plan & Delete Organization",colorway:"negative",type:"submit"})]})]})})},En=t(72806);function In(){var e=(0,d.Z)(["\n  mutation LeaveTeamOrg($input: DeleteTeamOrganizationMemberInput!) {\n    deleteTeamOrganizationMember(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return In=function(){return e},e}var _n={},kn=(0,m.ZP)(In(),We);var Sn=function(e){var n=e.orgName,t=e.currentUserId,r=e.orgId,a=e.isOpen,o=e.onRequestClose,l=e.onLeave,d=(0,S.Z)(),m=d.showError,h=d.showConfirm,Z=(0,z.H)()("retainTeamAccess"),g=(0,i.Z)(c.useState(!0),2),p=g[0],f=g[1],b=(0,i.Z)(function(e){var n=(0,u.Z)({},_n,e);return v.useMutation(kn,n)}({onError:function(e){m(e.message)},onCompleted:function(e){"TeamOrganization"===e.deleteTeamOrganizationMember.__typename?(h("Successfully left ".concat(n)),l(),o()):"NotFoundError"!==e.deleteTeamOrganizationMember.__typename&&"UnauthorizedError"!==e.deleteTeamOrganizationMember.__typename||m(e.deleteTeamOrganizationMember.message)}}),2),T=b[0],P=b[1].loading;return(0,s.tZ)(W.Z,{isOpen:a,onRequestClose:o,children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.BX)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:["Leave ",n]}),(0,s.tZ)(L.ZP,{css:F.l0.colWithGap(8),children:(0,s.BX)(V.x,{multiline:!0,children:["Are you sure you want to leave ",n,"? This will mean you will lose access to the Organization. If you are a member of any Teams in the Organization, you can optionally choose to keep access to those Teams you\u2019ve joined."]})}),(0,s.BX)(L.ZP,{css:F.l0.rowWithGap(8),children:[(0,s.tZ)(En.Z,{id:Z,checked:p,onChange:function(e){return f(e.target.checked)},disabled:P}),(0,s.tZ)("label",{css:F.l0.cursor.pointer,htmlFor:Z,children:"Keep existing access to Teams"})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",onClick:o}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(q.Z,{}),text:"Yes, Leave Organization",colorway:"negative",disabled:P,onClick:function(){T({variables:{input:{orgId:r,memberId:t,retainTeamAccess:p}}})}})]})]})})};function Xn(){var e=(0,d.Z)(["\n  mutation CreateTeamForm($input: CreateTeamV2Input!) {\n    createTeamV2(input: $input) {\n      ... on Team {\n        id\n        ...TeamCard\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Xn=function(){return e},e}var Dn={},Un=(0,m.ZP)(Xn(),h.eL);var Nn=t(97994),Mn=t(18757),Rn=t(3553),Gn=t(15794),Wn=function(e){var n=e.org,t=e.onCreate,a=e.onCancel,o=(0,z.H)(),d=o("displayName"),m=o("teamUsername"),h=(0,i.Z)(c.useState(!1),2),Z=h[0],g=h[1],p=(0,S.Z)().showError,f=(0,Ce.Y)("",(function(e){if(e.length>60)return{message:"Display name limited 60 characters"}})),b=(0,Ce.Y)("",an.Z.teamUsername),T=Boolean(f.error||b.error),P=(0,i.Z)(function(e){var n=(0,u.Z)({},Dn,e);return v.useMutation(Un,n)}({onError:function(e){p(e.message)},onCompleted:function(e){"Team"===e.createTeamV2.__typename?(t(e.createTeamV2),w()):"UserError"!==e.createTeamV2.__typename&&"UnauthorizedError"!==e.createTeamV2.__typename||p(e.createTeamV2.message)}}),2),O=P[0],y=P[1].loading,C=function(){var e=(0,r.Z)(l().mark((function e(){var n,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=f.value,n=a.toLowerCase().replace(/\s+/g,"-").replace(/[^0-9a-z-]/g,"").replace(/^-|-$|--/g,"")||"team-".concat(Math.ceil(1e7*Math.random())),g(!0),e.next=5,(0,Gn.uz)("/data/user/generate_username",{initialName:n,maxLength:28});case 5:t=e.sent,r=t.username,b.setValue(r),g(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),g(!1),p("Could not generate a unique username.");case 15:case"end":return e.stop()}var a}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),w=function(){f.setValue(""),b.setValue(""),g(!1),a()},x=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.t0=f.validate(),e.t0){e.next=6;break}return e.next=5,b.validate();case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,O({variables:{input:{displayName:f.value,username:b.value,orgId:null===n||void 0===n?void 0:n.id}}});case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=(0,oe.iv)({borderRadius:"".concat(F.TV.space8," !important")}),E=(0,oe.iv)({border:"none",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal",textDecoration:"underline",":disabled":{color:F.TV.foregroundDimmest},":not([disabled])":{cursor:"pointer"}}),I=y||Z;return(0,s.BX)(L.ZP,{tag:"form",css:[F.l0.colWithGap(24)],onSubmit:x,children:[(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(16)],children:[(0,s.tZ)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:n?"New Team in ".concat(n.name):"New Friends Team"}),n&&(0,s.tZ)(Nn.Z,{icon:(0,s.tZ)(Mn.Z,{}),href:"https://docs.replit.com/teams-edu/assigning-user-roles",text:"This Team is in ".concat(n.name,". Organization owners can see the members and contents of this team. Click here to learn more about Organization roles.")})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.tZ)("label",{htmlFor:d,children:"Team display name"}),(0,s.tZ)(Cn.ZP,{autoFocus:!0,disabled:I,css:B,id:d,value:f.value,placeholder:"What should the Team be called?",onBlur:f.handleBlur,validationResults:f.error?[{message:f.error.message,state:"error"}]:void 0,onChange:function(e){return f.setValue(e.currentTarget.value)}})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12)],children:[(0,s.tZ)("label",{htmlFor:m,children:"Team username"}),(0,s.tZ)("button",{disabled:I,css:[E],type:"button",onClick:C,children:"Generate Unique Username"})]}),(0,s.tZ)(Cn.ZP,{required:!0,disabled:I,css:B,id:m,value:b.value,placeholder:"team-username",onBlur:b.handleBlur,validationResults:b.error?[{message:b.error.message,state:"error"}]:void 0,onChange:function(e){return b.setValue(e.currentTarget.value)}}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(4)],children:[(0,s.tZ)(Rn.Z,{size:12}),(0,s.tZ)(V.x,{variant:"small",children:"You can\u2019t change this after creating a Team! So pick carefully."})]})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",type:"button",onClick:w,disabled:I}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(we.Z,{}),disabled:T||I,text:"Create Team",colorway:"primary",type:"submit"})]})]})},Ln=t(92002),Vn=t(34847);function Fn(){var e=(0,d.Z)(["\n  fragment TeamsChangePlanModalPreviewInvoiceItemGroup on PreviewInvoiceLineItemGroup {\n    periodStart\n    periodEnd\n    type\n    items {\n      description\n      amount\n      quantity\n    }\n  }\n"]);return Fn=function(){return e},e}function qn(){var e=(0,d.Z)(["\n  query TeamsChangePlanModal($orgId: Int!) {\n    teamOrganization(id: $orgId) {\n      ... on TeamOrganization {\n        id\n        subscription {\n          id\n          quantity\n        }\n        capabilities {\n          memberCount\n          availableSeats\n        }\n      }\n    }\n  }\n"]);return qn=function(){return e},e}function An(){var e=(0,d.Z)(["\n  query TeamsChangePlanModalPreviewInvoice($input: PreviewInvoiceInput!) {\n    previewInvoice(input: $input) {\n      ... on PreviewInvoiceOutput {\n        total\n        balance\n        chargeDate\n        currentItems {\n          ...TeamsChangePlanModalPreviewInvoiceItemGroup\n        }\n        upcomingItems {\n          ...TeamsChangePlanModalPreviewInvoiceItemGroup\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return An=function(){return e},e}function jn(){var e=(0,d.Z)(["\n  mutation TeamsChangePlanModalUpdateSubscription(\n    $input: UpdateSubscriptionInput!\n  ) {\n    updateSubscription(input: $input) {\n      ... on UpdateSubscriptionOutput {\n        subscriptions {\n          id\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return jn=function(){return e},e}var $n={},Yn=(0,m.ZP)(Fn()),Hn=(0,m.ZP)(qn());var Qn=(0,m.ZP)(An(),Yn);var Jn=(0,m.ZP)(jn());var Kn,et=t(66060),nt=t(86292),tt=t(87251),rt=t(25108);!function(e){e[e.SelectSeats=0]="SelectSeats",e[e.PreviewInvoice=1]="PreviewInvoice",e[e.Confirmation=2]="Confirmation"}(Kn||(Kn={}));var at=999,it=(0,oe.iv)({borderRadius:"".concat(F.TV.space8," !important")}),ot=function(e){var n=e.initialSeats,t=e.seats,r=e.memberCount,a=e.availableSeats,i=e.onCancel,o=e.onPreview,l=(0,z.H)()("orgSeats"),u=(0,Ce.Y)(t,(function(e){return Number.isNaN(e)?{message:"Please enter a whole number"}:e?e<1?{message:"Please enter a whole number greater than or equal to ".concat(1)}:e>at?{message:"Please enter a whole number less than or equal to ".concat(at)}:void 0:void 0})),d=c.useMemo((function(){var e=u.value;return Number.isNaN(e)?"":e&&e>=1&&e<=at?"x $".concat(15,"/seat = $").concat(15*e,"/month"):void 0}),[u.value]),m=Boolean(u.error),h=(0,Vn.Z)("seat",n),v=(0,Vn.Z)("seat",a);return(0,s.tZ)(L.ZP,{children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(48)],children:[(0,s.tZ)(V.h,{level:1,variant:"headerDefault",children:"Update Seat Count"}),(0,s.BX)("form",{css:[F.l0.colWithGap(48)],onSubmit:function(e){e.preventDefault(),u.value&&o(u.value)},children:[(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.tZ)(tt.Z,{text:"Your subscription includes ".concat(n," ").concat(h,". \n                You are currently using ").concat(r," of ").concat(n," ").concat(h,". \n                You have ").concat(a," ").concat(v," available.")}),(0,s.tZ)("label",{htmlFor:l,children:"Number of seats"}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(8),F.l0.align.center],children:[(0,s.tZ)(L.ZP,{children:(0,s.tZ)(Cn.ZP,{type:"number",min:r,max:at,css:it,id:l,required:!0,value:u.value||void 0,onBlur:u.handleBlur,validationResults:u.error?[{message:u.error.message,state:"error"}]:void 0,onChange:function(e){return u.setValue(parseInt(e.currentTarget.value,10))}})}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:d})]}),(0,s.tZ)(L.ZP,{children:(0,s.tZ)(V.x,{multiline:!0,children:"This will be charged monthly, starting with your next statement. You will also be charged or credited a prorated amount for the time left in this month for your increased or decreased seats at the beginning of your next statement."})})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",type:"button",onClick:function(){return i()}}),(0,s.tZ)(et.ZP,{tooltip:"Please fix the errors above before checking out",isOpen:m,children:(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(we.Z,{}),disabled:m||u.value===n,text:"Preview Changes",colorway:"primary",type:"submit"})})]})]})]})})},lt=function(e){var n,t,r,a=e.orgId,i=e.seats,o=e.onCancel,l=e.onPreview,c=function(e){var n=(0,u.Z)({},$n,e);return v.useQuery(Hn,n)}({variables:{orgId:a}}),d=c.data,m=c.loading;if(!d||m)return(0,s.tZ)(L.ZP,{css:F.l0.align.center,children:(0,s.tZ)(pe.Z,{size:32})});var h="TeamOrganization"===d.teamOrganization.__typename&&(null===(n=d.teamOrganization.subscription)||void 0===n?void 0:n.quantity),Z="TeamOrganization"===d.teamOrganization.__typename&&(null===(t=d.teamOrganization.capabilities)||void 0===t?void 0:t.availableSeats),g="TeamOrganization"===d.teamOrganization.__typename&&(null===(r=d.teamOrganization.capabilities)||void 0===r?void 0:r.memberCount);return h&&"number"===typeof Z&&"number"===typeof g?(0,s.tZ)(ot,{initialSeats:h,seats:i||h,availableSeats:Z,memberCount:g,onCancel:o,onPreview:l}):(0,s.tZ)(L.ZP,{children:(0,s.BX)(V.x,{children:["Something went wrong. Please"," ",(0,s.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",children:"contact support"}),"."]})})},st=function(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})},ct=function(e){return e<0?(0,s.tZ)(V.x,{css:{color:F.TV.accentPositiveStrongest},children:st(Math.abs(e))}):(0,s.tZ)(V.x,{css:{color:F.TV.accentNegativeStrongest},children:st(e)})},ut=Intl.DateTimeFormat("en-US",{timeZone:"UTC",month:"2-digit",year:"numeric",day:"2-digit"}),dt=function(e){return ut.format(new Date(e))},mt=function(e){var n=e.group;return(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(8),F.l0.p(8),{border:"1px solid ".concat(F.TV.outlineDefault),borderRadius:F.TV.borderRadiusDefault}],children:[(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(4),F.l0.align.baseline],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"proration"===n.type?"Prorated billing period:":"Next billing period:"}),(0,s.BX)(V.x,{css:{color:F.TV.foregroundDimmer},children:["(",dt(n.periodStart)," - ",dt(n.periodEnd),")"]})]}),n.items.map((function(e){return(0,s.tZ)(L.ZP,{css:[F.l0.colWithGap(4)],children:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"proration"===n.type?e.amount>0?"Charge for remaining time, ".concat(e.quantity," seats:"):"Credit for unused time, ".concat(e.quantity," seats:"):e.description}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:ct(e.amount)})]})})})),(0,s.tZ)(L.ZP,{css:{borderTop:"1px solid ".concat(F.TV.outlineDefault)}}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"Amount due:"}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:ct(n.items.reduce((function(e,n){return n.amount+e}),0))})]})]})},ht=function(e){var n=e.group;return(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(8),F.l0.p(8),{border:"1px solid ".concat(F.TV.outlineDefault),borderRadius:F.TV.borderRadiusDefault}],children:[(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(4),F.l0.align.baseline],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"proration"===n.type?"Prorated billing period:":"Next billing period:"}),(0,s.BX)(V.x,{css:{color:F.TV.foregroundDimmer},children:["(",dt(n.periodStart)," - ",dt(n.periodEnd),")"]})]}),n.items.map((function(e){return(0,s.tZ)(L.ZP,{css:[F.l0.colWithGap(4)],children:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"proration"===n.type?e.amount>0?"Charge for remaining time, ".concat(e.quantity," seats:"):"Credit for unused time, ".concat(e.quantity," seats:"):e.description}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:ct(e.amount)})]})})})),(0,s.tZ)(L.ZP,{css:{borderTop:"1px solid ".concat(F.TV.outlineDefault)}}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"Amount due:"}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:ct(n.items.reduce((function(e,n){return n.amount+e}),0))})]})]})},vt=function(e){var n,t=e.orgId,r=e.seats,a=e.onBack,i=e.onConfirm,o=function(e){var n=(0,u.Z)({},$n,e);return v.useQuery(Qn,n)}({variables:{input:{orgId:t,product:{quantity:r}}}}),l=o.data,c=o.loading,d="PreviewInvoiceOutput"===(null===l||void 0===l||null===(n=l.previewInvoice)||void 0===n?void 0:n.__typename)&&l.previewInvoice,m=d&&d.upcomingItems.filter((function(e){return"proration"===e.type})),h=d&&d.upcomingItems.filter((function(e){return"subscription"===e.type}));return h&&h.length>1&&rt.warn("More than one subscription group can not exist"),(0,s.tZ)(L.ZP,{children:c?(0,s.tZ)(L.ZP,{css:F.l0.align.center,children:(0,s.tZ)(pe.Z,{size:32})}):(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(48)],children:[(0,s.tZ)(V.h,{level:1,variant:"headerDefault",children:"Preview Subscription Changes"}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(16)],children:[d&&d.currentItems.map((function(e){return(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(8),F.l0.p(8),{border:"1px solid ".concat(F.TV.outlineDefault),borderRadius:F.TV.borderRadiusDefault}],children:[(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(4),F.l0.align.baseline],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Current billing period:"}),(0,s.BX)(V.x,{css:{color:F.TV.foregroundDimmer},children:["(",dt(e.periodStart)," -"," ",dt(e.periodEnd),")"]})]}),e.items.map((function(n){return(0,s.tZ)(L.ZP,{css:[F.l0.colWithGap(4)],children:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"proration"===e.type?n.amount>0?"Charge for ".concat(n.quantity," seats:"):"Credit for ".concat(n.quantity," seats:"):n.description}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:ct(n.amount)})]})})}))]})})),m&&m.map((function(e){return(0,s.tZ)(mt,{group:e})})),h&&h.map((function(e){return(0,s.tZ)(ht,{group:e})})),(0,s.BX)(L.ZP,{css:F.l0.colWithGap(8),children:[(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Total amount due next billing period:"}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:d&&st(d.total>0?d.total:0)})]}),d&&0!==d.balance&&(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"Remaining balance after next billing period:"}),(0,s.tZ)(V.x,{children:d&&ct(d.balance)})]}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.baseline],children:[(0,s.tZ)(V.x,{children:"You will be billed on:"}),(0,s.tZ)(V.x,{children:d&&dt(d.chargeDate)})]})]})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Back",type:"button",onClick:function(){return a()}}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(we.Z,{}),disabled:c,text:"Confirm Changes",colorway:"primary",type:"submit",onClick:function(){return i()}})]})]})})},Zt=function(e){var n,t,r,a,o=e.orgId,l=e.seats,d=e.onUpdated,m=(0,i.Z)(function(e){var n=(0,u.Z)({},$n,e);return v.useMutation(Jn,n)}({variables:{input:{orgId:o,product:{quantity:l}}},onCompleted:function(e){"UpdateSubscriptionOutput"===e.updateSubscription.__typename&&d()}}),2),h=m[0],Z=m[1],g=Z.data,p=Z.loading,f=Z.called;c.useEffect((function(){f||h()}),[]);var b=g&&"UpdateSubscriptionOutput"===(null===(n=g.updateSubscription)||void 0===n?void 0:n.__typename)&&g.updateSubscription,T=g&&("UserError"===(null===(t=g.updateSubscription)||void 0===t?void 0:t.__typename)||"NotFoundError"===(null===(r=g.updateSubscription)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(a=g.updateSubscription)||void 0===a?void 0:a.__typename))&&g.updateSubscription.message;return(0,s.tZ)(L.ZP,{children:p?(0,s.tZ)(L.ZP,{css:F.l0.align.center,children:(0,s.tZ)(pe.Z,{size:32})}):(0,s.BX)(L.ZP,{children:[T&&(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.tZ)(V.h,{variant:"headerDefault",level:1,children:"An error occurred"}),(0,s.tZ)(V.x,{children:T})]}),b&&(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.tZ)(V.h,{variant:"headerDefault",level:1,children:"Successfully updated subscription"}),(0,s.tZ)(V.x,{multiline:!0,children:"All subscriptions changes, including any charges or credits, will appear on your next invoice."})]})]})})},gt=function(e){var n=e.orgId,t=e.isOpen,r=e.onRequestClose,a=e.onSubscriptionUpdate,o=(0,i.Z)(c.useState(Kn.SelectSeats),2),l=o[0],u=o[1],d=(0,i.Z)(c.useState(),2),m=d[0],h=d[1];c.useEffect((function(){t&&(0,nt.j)(nt.U3.TEAMS_UPDATE_PLAN_MODAL_OPENED)}),[t]);var v,Z=c.useCallback((function(){u(Kn.SelectSeats),h(void 0),r()}),[r]);return l===Kn.SelectSeats?v=(0,s.tZ)(lt,{orgId:n,seats:m,onCancel:Z,onPreview:function(e){h(e),u(Kn.PreviewInvoice)}}):l===Kn.PreviewInvoice&&m?v=(0,s.tZ)(vt,{orgId:n,seats:m,onBack:function(){return u(Kn.SelectSeats)},onConfirm:function(){return u(Kn.Confirmation)}}):l===Kn.Confirmation&&m&&(v=(0,s.tZ)(Zt,{orgId:n,seats:m,onUpdated:a})),(0,s.tZ)(W.Z,{isOpen:t,onRequestClose:Z,maxWidth:600,children:v})},pt=t(49444),ft="@media screen and (min-width: ".concat(ne.j.tabletMin,"px)"),bt=function(e){var n=e.organization,t=e.onRemove,r=(0,i.Z)(function(e){var n=(0,u.Z)({},he,e);return v.useLazyQuery(Ze,n)}({variables:{orgId:n.id}}),2),a=r[0],o=r[1],l=o.loading,d=o.data,m=o.refetch,h=o.called,Z="TeamOrganization"===(null===d||void 0===d?void 0:d.teamOrganization.__typename)&&d.teamOrganization.unsubscribedTeams||[];return c.useEffect((function(){h&&m&&n.unsubscribedTeamsCount!==Z.length&&m(),h||n.unsubscribedTeamsCount===Z.length||a()}),[n.unsubscribedTeamsCount,Z.length,a,m,h]),n.unsubscribedTeamsCount?(0,s.BX)(L.ZP,{css:[{width:"100%"}],children:[(0,s.tZ)(cn.Z,{text:"".concat(n.unsubscribedTeamsCount," ").concat(1===n.unsubscribedTeamsCount?"team":"teams"," available to join")}),(0,s.BX)(L.ZP,{children:[l&&(0,s.tZ)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.center,F.l0.py(16)],children:(0,s.tZ)(pe.Z,{})}),Z.map((function(e){return(0,s.tZ)(ue,{canJoinTeam:!0,team:e,onRemove:function(){m&&m(),t()}},e.id)}))]})]}):null},Tt=function(e){var n=e.organization,t=e.onRemove,r=(0,i.Z)(function(e){var n=(0,u.Z)({},he,e);return v.useLazyQuery(ve,n)}({variables:{orgId:n.id}}),2),a=r[0],o=r[1],l=o.loading,d=o.data,m=o.refetch,h=o.called,Z="TeamOrganization"===(null===d||void 0===d?void 0:d.teamOrganization.__typename)&&d.teamOrganization.archivedTeams||[];return c.useEffect((function(){h&&m&&n.archivedTeamsCount!==Z.length&&m(),h||n.archivedTeamsCount===Z.length||a()}),[n.archivedTeamsCount,Z.length,a,m,h]),n.archivedTeamsCount?(0,s.BX)(L.ZP,{css:[{width:"100%"}],children:[(0,s.tZ)(cn.Z,{text:"Archived: ".concat(n.archivedTeamsCount," ").concat((0,Vn.Z)("team",n.archivedTeamsCount))}),(0,s.BX)(L.ZP,{children:[l&&(0,s.tZ)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.center,F.l0.py(16)],children:(0,s.tZ)(pe.Z,{})}),Z.map((function(e){return(0,s.tZ)(ue,{team:e,onRemove:function(){m&&m(),t()}},e.id)}))]})]}):null},Pt=function(e){var n,t,r,o,l=e.title,u=e.teams,d=e.organization,m=e.canCreateNewTeam,h=e.onRemove,v=e.onSubscriptionUpdate,Z=e.currentUserId,g=(0,ge.useRouter)(),p=(0,i.Z)(c.useState(!1),2),f=p[0],b=p[1],T=(0,i.Z)(c.useState(!1),2),P=T[0],O=T[1],y=c.useContext(fe.G).isGooglePlayStoreTWA,C=Number(g.query.addTeamForOrg)===(null===d||void 0===d?void 0:d.id)?"CreateTeam":null,w=(0,i.Z)(c.useState(C),2),x=w[0],z=w[1],B=(null===d||void 0===d?void 0:d.capabilities)?d.capabilities.memberCount:0,E=null;(null===d||void 0===d||null===(n=d.capabilities)||void 0===n?void 0:n.isBusinessPlan)&&d.isAdmin&&(E=null===d||void 0===d||null===(o=d.subscription)||void 0===o?void 0:o.quantity);var I=(null===d||void 0===d||null===(t=d.capabilities)||void 0===t?void 0:t.isExpired)&&d.isAdmin,_=function(){return z(null)},k=m||d&&Boolean(null===d||void 0===d?void 0:d.archivedTeamsCount);return(0,s.BX)($e.Z,{css:[F.l0.borderRadius(8),F.l0.backgroundColor.backgroundDefault,!d&&F.l0.pt(16),{width:"100%",border:"1px solid ".concat(F.TV.backgroundHighest),overflow:"hidden"}],elevated:!0,children:[d&&(0,s.tZ)(L.ZP,{css:[F.l0.p(16)],children:(0,s.BX)(L.ZP,{children:[(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.flex.grow(1),F.l0.justify.spaceBetween,F.l0.mb(16)],children:[(0,s.tZ)(V.h,{level:3,variant:"headerDefault",css:[F.l0.flex.shrink(2),F.l0.pt(8)],children:l}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[(null===d||void 0===d?void 0:d.isAdmin)&&(0,s.tZ)(ae.Z,{alt:"Open organization managment",onClick:function(){return z("OrgSettings")},size:28,css:[F.l0.p(8),F.l0.mr(4)],children:(0,s.tZ)(On.Z,{})}),d&&(0,s.tZ)(yn,{organization:d,onMenuItemSelected:function(e){z(e)}})]})]}),(0,s.BX)(L.ZP,{css:[F.l0.flex.row],children:[(0,s.tZ)(re.ZP,{text:E?"".concat(B,"/").concat(E," ").concat((0,Vn.Z)("User",E))+(y?"":": Add/Remove Seats"):"".concat(B," ").concat((0,Vn.Z)("User",B)),iconLeft:(0,s.tZ)(be.Z,{}),disabled:!E||y,onClick:function(){return z("ChangePlan")},small:!0,css:[F.l0.mr(8),(0,a.Z)({display:"none"},ft,{display:"flex"})]}),(null===d||void 0===d?void 0:d.isAdmin)&&(0,s.tZ)(re.ZP,{text:"You are an org ".concat(d.isOwner?"owner":"admin"),disabled:!0,small:!0,css:[F.l0.mr(8),(0,a.Z)({display:"none"},ft,{display:"flex"})]}),I&&(0,s.tZ)(re.ZP,{text:(null===(r=d.capabilities)||void 0===r?void 0:r.isEducationPlan)?"Teacher Verification Required":"Subscription expired",disabled:!0,colorway:"negative",outlined:!0,small:!0,css:[F.l0.mr(8),(0,a.Z)({display:"none"},ft,{display:"flex"})]})]})]})}),l&&(0,s.tZ)(cn.Z,{text:"You are a member of ".concat(u.length," ").concat((0,Vn.Z)("team",u.length)," on the ").concat(l," organization")}),(0,s.tZ)(L.ZP,{children:u.length>0&&u.map((function(e,n){return(0,s.tZ)(ue,{team:e,onRemove:h,showBottomBorder:n!==u.length-1||k},e.id)}))}),k&&(0,s.BX)(L.ZP,{css:[F.l0.p(16),(0,a.Z)({},ft,{flexDirection:"row"})],children:[m&&(0,s.tZ)(re.ZP,{iconLeft:(0,s.tZ)(Ln.Z,{}),text:"New team in ".concat(null!==l&&void 0!==l?l:"Friends"),outlined:!0,onClick:function(){z("CreateTeam")}}),!!(null===d||void 0===d?void 0:d.archivedTeamsCount)&&(0,s.tZ)(re.ZP,{css:[F.l0.justify.center,(0,a.Z)({marginTop:8},ft,{marginTop:0,marginLeft:8,border:"none",justifyContent:"flex-start"})],outlined:!0,text:"".concat(f?"Hide":"See"," archived Teams"),onClick:function(){return b(!f)},iconLeft:f?(0,s.tZ)(pt.ChevronUp,{}):(0,s.tZ)(pt.ChevronDown,{})}),!!(null===d||void 0===d?void 0:d.unsubscribedTeamsCount)&&(0,s.tZ)(re.ZP,{css:[F.l0.justify.center,(0,a.Z)({marginTop:8},ft,{marginTop:0,marginLeft:8,border:"none",justifyContent:"flex-start"})],outlined:!0,text:P?"Show only subscribed teams":"Show all teams on organization",onClick:function(){return O(!P)}})]}),d&&f&&(0,s.tZ)(Tt,{organization:d,onRemove:h}),d&&P&&(0,s.tZ)(bt,{organization:d,onRemove:h}),(0,s.tZ)(W.Z,{isOpen:"CreateTeam"===x,onRequestClose:_,children:(0,s.tZ)(Wn,{org:d,onCancel:_,onCreate:function(e){_(),g.push({pathname:"/teamProfile",query:{teamname:e.username}},"/team/".concat(e.username))}})}),d&&d.isAdmin&&(0,s.tZ)(gt,{orgId:d.id,isOpen:"ChangePlan"===x,onRequestClose:_,onSubscriptionUpdate:function(){return v&&v()}}),d&&Z&&(0,s.BX)(s.HY,{children:[(0,s.tZ)(Bn,{canBeDeleted:d.canBeDeleted,orgId:d.id,orgName:d.name,isOpen:"DeleteOrg"===x,onRequestClose:_,onOrgDeleted:h}),(0,s.tZ)(Sn,{orgId:d.id,currentUserId:Z,orgName:d.name,isOpen:"LeaveOrg"===x,onRequestClose:_,onLeave:h}),(0,s.tZ)(Pn,{isOpen:"OrgSettings"===x,setClose:_,organization:d,currentUserId:Z})]})]})},Ot=t(19526),yt=t(49393),Ct=t(85733),wt=t(45304);function xt(){var e=(0,d.Z)(["\n  fragment CreateEduOrgFormOrganization on TeamOrganization {\n    id\n    name\n  }\n"]);return xt=function(){return e},e}function zt(){var e=(0,d.Z)(["\n  mutation CreateNewTeamsEduOrganization(\n    $input: CreateNewTeamsEduOrganizationInput!\n  ) {\n    createNewTeamsEduOrganization(input: $input) {\n      __typename\n      ... on TeamOrganization {\n        id\n        ...CreateEduOrgFormOrganization\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return zt=function(){return e},e}var Bt={},Et=(0,m.ZP)(xt()),It=(0,m.ZP)(zt(),Et);var _t=t(99950),kt=function(){return(0,s.tZ)(L.ZP,{css:{borderBottom:"1px solid ".concat(F.TV.outlineDimmest)}})},St=function(){return(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(8)],children:[(0,s.tZ)(V.h,{level:2,variant:"headerDefault",children:"Oops, there was a problem."}),(0,s.tZ)(V.x,{multiline:!0,children:"Looks like you\u2019re a student in a Teams for Education organization already. Organization creation is only for teachers and faculty of approved education organizations. If that\u2019s you, please log out and create a new teacher account. You will then be able to create a new organization."})]})},Xt=[{value:"k12",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(4)],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"K-12"}),(0,s.tZ)(V.x,{variant:"small",children:"Primary & secondary schools"})]})},{value:"higher_ed",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(4)],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Higher Education"}),(0,s.tZ)(V.x,{variant:"small",children:"Colleges & universities"})]})},{value:"Vocational School",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(4)],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Vocational School or Afterschool Program"}),(0,s.tZ)(V.x,{variant:"small",children:"Coding classes"})]})},{value:"Nonprofit",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(4)],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Nonprofit"}),(0,s.tZ)(V.x,{variant:"small",children:"Nonprofit organizations & clubs"})]})},{value:"Online Platform, Out-of-School Program",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(4)],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Online Platform, Out-of-School Program"}),(0,s.tZ)(V.x,{variant:"small",multiline:!0,children:"Independent educators through an online platform, afterschool programs, massive online open courses (MOOC), bootcamps"})]})},{value:"Curriculum and Content Provider",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(4)],children:[(0,s.tZ)(V.x,{variant:"subheadDefault",children:"Curriculum and Content Provider"}),(0,s.tZ)(V.x,{variant:"small",children:"Professional curriculum developers"})]})}],Dt=function(e){var n=e.onCancel,t=e.onOrgCreate,a=e.onUnauthorizedError,o=(0,z.H)(),d=o("orgName"),m=(0,S.Z)().showError,h=(0,i.Z)(function(e){var n=(0,u.Z)({},Bt,e);return v.useMutation(It,n)}({onError:function(e){m(e.message)},onCompleted:function(e){"TeamOrganization"===e.createNewTeamsEduOrganization.__typename?t(e.createNewTeamsEduOrganization):"UserError"===e.createNewTeamsEduOrganization.__typename?m(e.createNewTeamsEduOrganization.message):"UnauthorizedError"===e.createNewTeamsEduOrganization.__typename&&a()}}),2),Z=h[0],g=h[1].loading,p=(0,Ce.Y)("",(function(e){return 0===e.length?{message:"Organization name cannot be blank"}:e.length>60?{message:"Organization name is limited ".concat(60," characters")}:void 0})),f=(0,i.Z)(c.useState(!1),2),b=f[0],T=f[1],P=Boolean(p.error)||!b,O=(0,oe.iv)({borderRadius:"".concat(F.TV.space8," !important")}),y=(0,i.Z)(c.useState(Xt[0].value),2),C=y[0],w=y[1],x=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.validate()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Z({variables:{input:{orgName:p.value}}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(32)],tag:"form",onSubmit:function(e){e.preventDefault(),x()},children:[(0,s.tZ)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:"New Education Organization"}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.tZ)("label",{htmlFor:d,children:"Organization name"}),(0,s.tZ)(Cn.ZP,{autoFocus:!0,required:!0,css:O,id:d,value:p.value,placeholder:"What should the Organization be called?",onBlur:p.handleBlur,validationResults:p.error?[{message:p.error.message,state:"error"}]:void 0,onChange:function(e){return p.setValue(e.currentTarget.value)},disabled:g})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.tZ)(V.x,{variant:"text",children:"Type of organization"}),(0,s.tZ)(_t.E,{name:o("institutionType"),onChange:function(e){return w(e.target.value)},value:C,css:F.l0.colWithGap(12),children:Xt.map((function(e){return(0,s.BX)(s.HY,{children:[(0,s.tZ)(kt,{}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12)],children:[(0,s.tZ)(_t.Y,{id:o(e.value),value:e.value}),(0,s.tZ)("label",{css:[F.l0.cursor.pointer],htmlFor:o(e.value),children:e.children})]})]})}))})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(8)],children:[(0,s.tZ)(En.Z,{id:o("confirmTeacher"),checked:b,onChange:function(){return T(!b)}}),(0,s.tZ)("label",{htmlFor:o("confirmTeacher"),children:"I confirm that I am using Teams for Education for educational purposes."})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",type:"button",onClick:n}),(0,s.tZ)(et.ZP,{tooltip:"Please fix the errors above before checking out",isOpen:P,children:(0,s.tZ)(k.zx,{disabled:P||g,iconLeft:(0,s.tZ)(we.Z,{}),text:"Create New Organization",colorway:"primary",type:"submit"})})]})]})},Ut=function(e){var n=e.onCancel,t=e.onUpdate,r=e.canCreateEduTrial,a=(0,i.Z)(c.useState(),2),o=a[0],l=a[1],u=(0,i.Z)(c.useState(!1),2),d=u[0],m=u[1],h=(0,i.Z)(c.useState(!1),2),v=h[0],Z=h[1];return o||v?v?(0,s.tZ)(St,{}):!d&&o?(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(32)],children:[(0,s.BX)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:["Created ",o.name," Organization"]}),(0,s.BX)(V.x,{multiline:!0,children:["You have successfully created your ",o.name," trial Organization. Now you can create your first Team in the Organization."]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",type:"button",onClick:n}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(we.Z,{}),text:"Create Team",colorway:"primary",onClick:function(){return m(!0)}})]})]}):(0,s.tZ)(Wn,{org:o,onCancel:n,onCreate:t}):(0,s.tZ)(Dt,{canCreateEduTrial:r,onCancel:n,onOrgCreate:function(e){l(e),t()},onUnauthorizedError:function(){return Z(!0)}})},Nt=function(e){var n=e.onCancel,t=(0,z.H)(),r=t("orgName"),a=t("orgSeats"),i=(0,ge.useRouter)(),o=i.query.source,l=(0,Ce.Y)("",(function(e){return 0===e.length?{message:"Organization name cannot be blank"}:e.length>60?{message:"Organization name is limited ".concat(60," characters")}:void 0})),u=(0,Ce.Y)("10",(function(e){var n=parseInt(e,10);return Number.isNaN(n)?{message:"Please enter a whole number"}:n<1?{message:"Please enter a whole number greater than or equal to ".concat(1)}:n>999?{message:"Please enter a whole number less than or equal to ".concat(999)}:void 0})),d=Boolean(l.error||u.error),m=parseInt(u.value,10),h="x $".concat(15,"/seat");!Number.isNaN(m)&&m>=1&&m<=999&&(h+=" = $".concat(15*m,"/month"));var v=(0,oe.iv)({borderRadius:"".concat(F.TV.space8," !important")});return c.useEffect((function(){"banner"===o?(0,nt.j)(nt.U3.PRO_ORG_CREATE_FORM_OPENED,{source:o}):(0,nt.j)(nt.U3.PRO_ORG_CREATE_FORM_OPENED)}),[o]),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(48)],tag:"form",onSubmit:function(e){e.preventDefault();var n=l.validate(),t=u.validate();if(!n&&!t){(0,nt.j)(nt.U3.PLAN_SELECTED,{planID:"teams_pro_beta_per_seat_1mo_usd",source:i.pathname});var r="/stripe-checkout/teams_pro/beta_per_seat_1mo_usd"+"?quantity=".concat(u.value,"&orgName=").concat(encodeURIComponent(l.value));window.location.href=r}},children:[(0,s.tZ)(V.h,{variant:"headerDefault",level:2,css:F.l0.maxWidth("100%"),children:"New pro Organization"}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.tZ)("label",{htmlFor:r,children:"Organization name"}),(0,s.tZ)(Cn.ZP,{autoFocus:!0,required:!0,css:v,id:r,value:l.value,placeholder:"What should the Organization be called?",onBlur:l.handleBlur,validationResults:l.error?[{message:l.error.message,state:"error"}]:void 0,onChange:function(e){return l.setValue(e.currentTarget.value)}})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(12)],children:[(0,s.tZ)("label",{htmlFor:a,children:"Number of seats"}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(8),F.l0.align.center],children:[(0,s.tZ)(L.ZP,{children:(0,s.tZ)(Cn.ZP,{css:v,id:a,required:!0,value:u.value,onBlur:u.handleBlur,validationResults:u.error?[{message:u.error.message,state:"error"}]:void 0,onChange:function(e){return u.setValue(e.currentTarget.value)}})}),(0,s.tZ)(V.x,{variant:"subheadDefault",children:h})]})]}),(0,s.BX)(L.ZP,{css:[F.l0.rowWithGap(12),F.l0.justify.end],children:[(0,s.tZ)(k.zx,{text:"Cancel",type:"button",onClick:n}),(0,s.tZ)(et.ZP,{tooltip:"Please fix the errors above before checking out",isOpen:d,children:(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(we.Z,{}),disabled:d,text:"Go to Checkout",colorway:"primary",type:"submit"})})]})]})},Mt=t(4158),Rt=t(44044);function Gt(){var e=(0,ge.useRouter)();return(0,s.BX)(L.ZP,{css:[F.l0.p(16),F.l0.borderRadius(8),F.l0.flex.row,F.l0.justify.spaceBetween,F.l0.align.center,Rt.gU.filled,F.l0.backgroundColor.accentPrimaryDimmest],onClick:function(){e.push("/verify-teacher")},children:[(0,s.tZ)(V.x,{variant:"subheadDefault",css:[F.l0.maxWidth("80%")],children:"Please click here to verify your status as an approved educator."}),(0,s.tZ)(et.ZP,{placement:"left",tooltip:"By verifying that you are an approved educator you will be able to create Teams for Education organizations and gain access to higher compute power for your teams.",children:(0,s.tZ)(Mt.Z,{})})]})}var Wt=function(e){var n=e.text,t=e.onClick,r=e.disabled,a=void 0!==r&&r;return(0,s.tZ)(L.ZP,{css:[F.l0.colWithGap(8),F.l0.align.start],children:(0,s.tZ)(re.ZP,{iconLeft:(0,s.tZ)(Ln.Z,{}),text:n,onClick:t,disabled:a})})},Lt=function(e){var n=e.title,t=e.IconComponent;return(0,s.tZ)(L.ZP,{children:(0,s.BX)(L.ZP,{css:[F.l0.flex.row,F.l0.align.center],children:[(0,s.tZ)(L.ZP,{children:t}),(0,s.tZ)(V.x,{css:[F.l0.px(8)],variant:"headerDefault",children:n}),(0,s.tZ)(L.ZP,{css:{borderWidth:1,borderColor:"var(--outline-dimmest)",flexGrow:2}})]})})},Vt=function(e){var n=e.text,t=e.cta,r=e.onClick;return(0,s.tZ)(L.ZP,{css:[F.l0.borderRadius(4),F.l0.p(16),F.l0.mb(32),F.l0.backgroundColor.backgroundDefault,{width:"100%",border:"1px solid ".concat(F.TV.backgroundHighest)}],children:(0,s.BX)(L.ZP,{css:[F.l0.justify.center,F.l0.align.stretch],children:[(0,s.tZ)(L.ZP,{css:[F.l0.flex.grow(1),F.l0.p(16),F.l0.textAlign.center],children:(0,s.tZ)(V.x,{multiline:!0,children:n})}),(0,s.tZ)(L.ZP,{css:[F.l0.flex.row,F.l0.justify.center],children:(0,s.tZ)("a",{onClick:r,children:t})})]})})},Ft=function(e){var n=e.currentUserId,t=e.canCreateNewFreeTeam,r=e.canCreateEduTrial,a=e.freeTeams,o=e.educationTeamOrgs,l=e.businessTeamOrgs,u=e.onRemove,d=e.onUpdate,m=e.isPrivacyUser,h=e.showEducationVerificationBanner,v=(0,ge.useRouter)(),Z=(0,i.Z)(c.useState(null),2),g=Z[0],p=Z[1],f=function(){return p(null)};return(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(32)],children:[(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.tZ)(Lt,{IconComponent:(0,s.tZ)(yt.Z,{size:24}),title:"Education"}),!m&&(0,s.tZ)(Wt,{text:"New Education Organization",onClick:function(){p("CreateEduOrg")}}),h&&(0,s.tZ)(Gt,{}),(0,s.tZ)(L.ZP,{children:(0,s.tZ)(L.ZP,{css:[F.l0.colWithGap(32)],children:o&&o.length?o.map((function(e){var t,r;return(0,s.tZ)(Pt,{title:e.name,teams:e.teams,organization:e,canCreateNewTeam:(null===(t=e.userPermissions)||void 0===t?void 0:t.canCreateTeamsInOrg)&&(null===(r=e.capabilities)||void 0===r?void 0:r.canCreateNewTeam)&&!e.capabilities.isExpired,onRemove:u,onSubscriptionUpdate:d,currentUserId:n},e.id)})):(0,s.tZ)(Vt,{text:"Teams for Education is a place for teachers to create and manage student projects.",cta:"Try Teams for Education for free today",onClick:function(){return v.push("/teams/free-trial")}})})})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.tZ)(Lt,{IconComponent:(0,s.tZ)(Ct.Z,{size:24}),title:"Pro"}),!m&&(0,s.tZ)(Wt,{text:"New Pro Organization",onClick:function(){return p("CreateProOrg")}}),(0,s.tZ)(Ot.gC,{spacing:4,children:l&&l.length?l.map((function(e){var t,r;return(0,s.tZ)(Pt,{title:e.name,teams:e.teams,organization:e,canCreateNewTeam:(null===(t=e.userPermissions)||void 0===t?void 0:t.canCreateTeamsInOrg)&&(null===(r=e.capabilities)||void 0===r?void 0:r.canCreateNewTeam)&&!e.capabilities.isExpired,onRemove:u,onSubscriptionUpdate:d,currentUserId:n},e.id)})):(0,s.tZ)(Vt,{text:"Teams Pro is a place for coworkers to create prototypes and develop products.",cta:"Learn more",onClick:function(){return v.push("/site/teams-pro")}})})]}),(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.tZ)(Lt,{IconComponent:(0,s.tZ)(wt.Z,{size:24}),title:"Friends"}),(0,s.tZ)(L.ZP,{children:(0,s.BX)(V.x,{multiline:!0,children:["Free starter teams. Limited to 5 teams of up to 10 members. Everything is public. Less processing power. Upgrade to"," ",(0,s.tZ)(w(),{href:"/site/teams-pro",children:"Teams Pro"})," or"," ",(0,s.tZ)(w(),{href:"/site/teams-for-education",children:"Teams for Education"})," ","for more power."]})}),a&&a.length?(0,s.tZ)(Pt,{teams:a,canCreateNewTeam:t,onRemove:u}):(0,s.tZ)(Vt,{text:"Teams for Friends lets up to 10 people collaborate on shared Repls for free.",cta:"Create your first team",onClick:function(){return v.push("/teams/add")}})]}),(0,s.tZ)(W.Z,{isOpen:"CreateEduOrg"===g,onRequestClose:f,children:(0,s.tZ)(Ut,{onUpdate:d,onCancel:f,canCreateEduTrial:r})}),(0,s.tZ)(W.Z,{isOpen:"CreateProOrg"===g,onRequestClose:f,children:(0,s.tZ)(Nt,{onCancel:f})})]})},qt=t(92876),At=t(57208),jt=t(30019),$t=t(78738),Yt="@media screen and (min-width: ".concat(ne.j.mobileMax,"px)"),Ht=(0,oe.iv)((0,a.Z)({justifyContent:"center",padding:F.TV.space16},Yt,{padding:F.TV.space48})),Qt=function(){var e,n,t,r,a,o,l,d,m,h,Z,g,p=(0,ge.useRouter)(),f=p.query.checkout,T=(0,S.Z)().showError,P=function(e){var n=(0,u.Z)({},b,e);return v.useQuery(O,n)}({onError:function(e){T((0,At.Z)(e.message)),qt.Tb(e)}}),y=P.data,C=P.loading,w=P.refetch,x=(0,i.Z)(c.useState(Boolean(f)),2),z=x[0],B=x[1],E=function(){f&&p.replace("/teamsDashboard","/teams",{shallow:!0}),B(!1)},I=null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.isPrivacyLimitedAccess;return(null===y||void 0===y||null===(n=y.currentUser)||void 0===n?void 0:n.hasTeamsKillswitch)?(0,s.tZ)($t.Z,{title:"Teams",children:(0,s.tZ)(L.ZP,{css:Ht,children:(0,s.tZ)(jt.Z,{level:1,children:"Sorry for the inconvenience, Teams are temporarily unavailable."})})}):(0,s.BX)($t.Z,{title:"Teams",children:[z&&(0,s.tZ)(W.Z,{isOpen:z,onRequestClose:E,children:f.startsWith("teams_pro")?(0,s.tZ)(Nt,{onCancel:E}):(0,s.tZ)(Ut,{onUpdate:function(){return w()},onCancel:E,canCreateEduTrial:Boolean(null===y||void 0===y||null===(t=y.currentUser)||void 0===t||null===(r=t.capabilities)||void 0===r?void 0:r.canCreateEduTrial)})}),(0,s.tZ)($e.Z,{css:[F.l0.maxWidth(1200),{marginLeft:"auto",marginRight:"auto"}],children:(0,s.tZ)(L.ZP,{css:Ht,className:"teams-dashboard",children:(0,s.BX)(L.ZP,{css:[F.l0.colWithGap(24)],children:[(0,s.tZ)(L.ZP,{css:[F.l0.justify.spaceBetween],children:(0,s.tZ)(jt.Z,{level:1,children:"Your Organizations"})}),C?(0,s.tZ)(L.ZP,{css:[F.l0.justify.center,F.l0.align.center,F.l0.height("50vh")],className:"spinner-container",children:(0,s.tZ)(pe.Z,{})}):(0,s.tZ)(Ft,{currentUserId:null===y||void 0===y||null===(a=y.currentUser)||void 0===a?void 0:a.id,canCreateEduTrial:Boolean(null===y||void 0===y||null===(o=y.currentUser)||void 0===o||null===(l=o.capabilities)||void 0===l?void 0:l.canCreateEduTrial),canCreateNewFreeTeam:(null===y||void 0===y||null===(d=y.currentUser)||void 0===d?void 0:d.canCreateNewFreeTeam)||!1,freeTeams:(null===y||void 0===y||null===(m=y.currentUser)||void 0===m?void 0:m.freeTeams)||[],educationTeamOrgs:(null===y||void 0===y||null===(h=y.currentUser)||void 0===h?void 0:h.educationTeamOrgs)||[],businessTeamOrgs:(null===y||void 0===y||null===(Z=y.currentUser)||void 0===Z?void 0:Z.proTeamOrgs)||[],onRemove:function(){return w()},onUpdate:function(){return w()},isPrivacyUser:Boolean(I),showEducationVerificationBanner:Boolean(null===y||void 0===y||null===(g=y.currentUser)||void 0===g?void 0:g.showVerifyTeacherBanner)})]})})})]})};Qt.getInitialProps=function(){var e=(0,r.Z)(l().mark((function e(n){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.req,r=n.store,e.next=3,(0,y.Z)(t,r);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Jt=Qt}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[3662,5762,8350,1627,8764,6625,8966,395,8738,4286,7046,5567,1369,9774,2888,179],(function(){return n(25436),n(8930)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=teamsDashboard-890850db61aa3967.js.map